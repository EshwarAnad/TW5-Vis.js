/*\
title: $:/plugins/felixhayashi/vis/vis.js
type: application/javascript
module-type: library

@preserve
\*/

"use strict";(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define(factory);else if(typeof exports==="object")exports["vis"]=factory();else root["vis"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){exports.util=__webpack_require__(1);exports.DOMutil=__webpack_require__(6);exports.DataSet=__webpack_require__(7);exports.DataView=__webpack_require__(9);exports.Queue=__webpack_require__(8);exports.Graph3d=__webpack_require__(10);exports.graph3d={Camera:__webpack_require__(14),Filter:__webpack_require__(15),Point2d:__webpack_require__(13),Point3d:__webpack_require__(12),Slider:__webpack_require__(16),StepNumber:__webpack_require__(17)};exports.Timeline=__webpack_require__(18);exports.Graph2d=__webpack_require__(42);exports.timeline={DateUtil:__webpack_require__(24),DataStep:__webpack_require__(45),Range:__webpack_require__(21),stack:__webpack_require__(28),TimeStep:__webpack_require__(38),components:{items:{Item:__webpack_require__(30),BackgroundItem:__webpack_require__(34),BoxItem:__webpack_require__(32),PointItem:__webpack_require__(33),RangeItem:__webpack_require__(29)},Component:__webpack_require__(23),CurrentTime:__webpack_require__(39),CustomTime:__webpack_require__(41),DataAxis:__webpack_require__(44),GraphGroup:__webpack_require__(46),Group:__webpack_require__(27),BackgroundGroup:__webpack_require__(31),ItemSet:__webpack_require__(26),Legend:__webpack_require__(50),LineGraph:__webpack_require__(43),TimeAxis:__webpack_require__(37)}};exports.Network=__webpack_require__(51);exports.network={Edge:__webpack_require__(57),Groups:__webpack_require__(54),Images:__webpack_require__(55),Node:__webpack_require__(56),Popup:__webpack_require__(58),dotparser:__webpack_require__(52),gephiParser:__webpack_require__(53)};exports.Graph=function(){throw new Error("Graph is renamed to Network. Please create a graph as new vis.Network(...)")};exports.moment=__webpack_require__(2);exports.hammer=__webpack_require__(19)},function(module,exports,__webpack_require__){var moment=__webpack_require__(2);exports.isNumber=function(object){return object instanceof Number||typeof object=="number"};exports.isString=function(object){return object instanceof String||typeof object=="string"};exports.isDate=function(object){if(object instanceof Date){return true}else if(exports.isString(object)){var match=ASPDateRegex.exec(object);if(match){return true}else if(!isNaN(Date.parse(object))){return true}}return false};exports.isDataTable=function(object){return typeof google!=="undefined"&&google.visualization&&google.visualization.DataTable&&object instanceof google.visualization.DataTable};exports.randomUUID=function(){var S4=function(){return Math.floor(Math.random()*65536).toString(16)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()};exports.extend=function(a,b){for(var i=1,len=arguments.length;i<len;i++){var other=arguments[i];for(var prop in other){if(other.hasOwnProperty(prop)){a[prop]=other[prop]}}}return a};exports.selectiveExtend=function(props,a,b){if(!Array.isArray(props)){throw new Error("Array with property names expected as first argument")}for(var i=2;i<arguments.length;i++){var other=arguments[i];for(var p=0;p<props.length;p++){var prop=props[p];if(other.hasOwnProperty(prop)){a[prop]=other[prop]}}}return a};exports.selectiveDeepExtend=function(props,a,b){if(Array.isArray(b)){throw new TypeError("Arrays are not supported by deepExtend")}for(var i=2;i<arguments.length;i++){var other=arguments[i];for(var p=0;p<props.length;p++){var prop=props[p];if(other.hasOwnProperty(prop)){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={}}if(a[prop].constructor===Object){exports.deepExtend(a[prop],b[prop])}else{a[prop]=b[prop]}}else if(Array.isArray(b[prop])){throw new TypeError("Arrays are not supported by deepExtend")}else{a[prop]=b[prop]}}}}return a};exports.selectiveNotDeepExtend=function(props,a,b){if(Array.isArray(b)){throw new TypeError("Arrays are not supported by deepExtend")}for(var prop in b){if(b.hasOwnProperty(prop)){if(props.indexOf(prop)==-1){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={}}if(a[prop].constructor===Object){exports.deepExtend(a[prop],b[prop])}else{a[prop]=b[prop]}}else if(Array.isArray(b[prop])){throw new TypeError("Arrays are not supported by deepExtend")}else{a[prop]=b[prop]}}}}return a};exports.deepExtend=function(a,b){if(Array.isArray(b)){throw new TypeError("Arrays are not supported by deepExtend")}for(var prop in b){if(b.hasOwnProperty(prop)){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={}}if(a[prop].constructor===Object){exports.deepExtend(a[prop],b[prop])}else{a[prop]=b[prop]}}else if(Array.isArray(b[prop])){throw new TypeError("Arrays are not supported by deepExtend")}else{a[prop]=b[prop]}}}return a};exports.equalArray=function(a,b){if(a.length!=b.length)return false;for(var i=0,len=a.length;i<len;i++){if(a[i]!=b[i])return false}return true};exports.convert=function(object,type){var match;if(object===undefined){return undefined}if(object===null){return null}if(!type){return object}if(!(typeof type==="string")&&!(type instanceof String)){throw new Error("Type must be a string")}switch(type){case"boolean":case"Boolean":return Boolean(object);case"number":case"Number":return Number(object.valueOf());case"string":case"String":return String(object);case"Date":if(exports.isNumber(object)){return new Date(object)}if(object instanceof Date){return new Date(object.valueOf())}else if(moment.isMoment(object)){return new Date(object.valueOf())}if(exports.isString(object)){match=ASPDateRegex.exec(object);if(match){return new Date(Number(match[1]))}else{return moment(object).toDate()}}else{throw new Error("Cannot convert object of type "+exports.getType(object)+" to type Date")}case"Moment":if(exports.isNumber(object)){return moment(object)}if(object instanceof Date){return moment(object.valueOf())}else if(moment.isMoment(object)){return moment(object)}if(exports.isString(object)){match=ASPDateRegex.exec(object);if(match){return moment(Number(match[1]))}else{return moment(object)}}else{throw new Error("Cannot convert object of type "+exports.getType(object)+" to type Date")}case"ISODate":if(exports.isNumber(object)){return new Date(object)}else if(object instanceof Date){return object.toISOString()}else if(moment.isMoment(object)){return object.toDate().toISOString()}else if(exports.isString(object)){match=ASPDateRegex.exec(object);if(match){return new Date(Number(match[1])).toISOString()}else{return new Date(object).toISOString()}}else{throw new Error("Cannot convert object of type "+exports.getType(object)+" to type ISODate")}case"ASPDate":if(exports.isNumber(object)){return"/Date("+object+")/"}else if(object instanceof Date){return"/Date("+object.valueOf()+")/"}else if(exports.isString(object)){match=ASPDateRegex.exec(object);var value;if(match){value=new Date(Number(match[1])).valueOf()}else{value=new Date(object).valueOf()}return"/Date("+value+")/"}else{throw new Error("Cannot convert object of type "+exports.getType(object)+" to type ASPDate")}default:throw new Error('Unknown type "'+type+'"')}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;exports.getType=function(object){var type=typeof object;if(type=="object"){if(object==null){return"null"}if(object instanceof Boolean){return"Boolean"}if(object instanceof Number){return"Number"}if(object instanceof String){return"String"}if(Array.isArray(object)){return"Array"}if(object instanceof Date){return"Date"}return"Object"}else if(type=="number"){return"Number"}else if(type=="boolean"){return"Boolean"}else if(type=="string"){return"String"}return type};exports.getAbsoluteLeft=function(elem){return elem.getBoundingClientRect().left+window.pageXOffset};exports.getAbsoluteTop=function(elem){return elem.getBoundingClientRect().top+window.pageYOffset};exports.addClassName=function(elem,className){var classes=elem.className.split(" ");if(classes.indexOf(className)==-1){classes.push(className);elem.className=classes.join(" ")}};exports.removeClassName=function(elem,className){var classes=elem.className.split(" ");var index=classes.indexOf(className);if(index!=-1){classes.splice(index,1);elem.className=classes.join(" ")}};exports.forEach=function(object,callback){var i,len;if(Array.isArray(object)){for(i=0,len=object.length;i<len;i++){callback(object[i],i,object)}}else{for(i in object){if(object.hasOwnProperty(i)){callback(object[i],i,object)}}}};exports.toArray=function(object){var array=[];for(var prop in object){if(object.hasOwnProperty(prop))array.push(object[prop])}return array};exports.updateProperty=function(object,key,value){if(object[key]!==value){object[key]=value;return true}else{return false}};exports.addEventListener=function(element,action,listener,useCapture){if(element.addEventListener){if(useCapture===undefined)useCapture=false;if(action==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){action="DOMMouseScroll"}element.addEventListener(action,listener,useCapture)}else{element.attachEvent("on"+action,listener)}};exports.removeEventListener=function(element,action,listener,useCapture){if(element.removeEventListener){if(useCapture===undefined)useCapture=false;if(action==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){action="DOMMouseScroll"}element.removeEventListener(action,listener,useCapture)}else{element.detachEvent("on"+action,listener)}};exports.preventDefault=function(event){if(!event)event=window.event;if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}};exports.getTarget=function(event){if(!event){event=window.event}var target;if(event.target){target=event.target}else if(event.srcElement){target=event.srcElement}if(target.nodeType!=undefined&&target.nodeType==3){target=target.parentNode}return target};exports.option={};exports.option.asBoolean=function(value,defaultValue){if(typeof value=="function"){value=value()}if(value!=null){return value!=false}return defaultValue||null};exports.option.asNumber=function(value,defaultValue){if(typeof value=="function"){value=value()}if(value!=null){return Number(value)||defaultValue||null}return defaultValue||null};exports.option.asString=function(value,defaultValue){if(typeof value=="function"){value=value()}if(value!=null){return String(value)}return defaultValue||null};exports.option.asSize=function(value,defaultValue){if(typeof value=="function"){value=value()}if(exports.isString(value)){return value}else if(exports.isNumber(value)){return value+"px"}else{return defaultValue||null}};exports.option.asElement=function(value,defaultValue){if(typeof value=="function"){value=value()}return value||defaultValue||null};exports.GiveDec=function(Hex){var Value;if(Hex=="A")Value=10;else if(Hex=="B")Value=11;else if(Hex=="C")Value=12;else if(Hex=="D")Value=13;else if(Hex=="E")Value=14;else if(Hex=="F")Value=15;else Value=eval(Hex);return Value};exports.GiveHex=function(Dec){var Value;if(Dec==10)Value="A";else if(Dec==11)Value="B";else if(Dec==12)Value="C";else if(Dec==13)Value="D";else if(Dec==14)Value="E";else if(Dec==15)Value="F";else Value=""+Dec;return Value};exports.parseColor=function(color){var c;if(exports.isString(color)){if(exports.isValidRGB(color)){var rgb=color.substr(4).substr(0,color.length-5).split(",");color=exports.RGBToHex(rgb[0],rgb[1],rgb[2])}if(exports.isValidHex(color)){var hsv=exports.hexToHSV(color);var lighterColorHSV={h:hsv.h,s:hsv.s*.45,v:Math.min(1,hsv.v*1.05)};var darkerColorHSV={h:hsv.h,s:Math.min(1,hsv.v*1.25),v:hsv.v*.6};var darkerColorHex=exports.HSVToHex(darkerColorHSV.h,darkerColorHSV.h,darkerColorHSV.v);var lighterColorHex=exports.HSVToHex(lighterColorHSV.h,lighterColorHSV.s,lighterColorHSV.v);c={background:color,border:darkerColorHex,highlight:{background:lighterColorHex,border:darkerColorHex},hover:{background:lighterColorHex,border:darkerColorHex}}}else{c={background:color,border:color,highlight:{background:color,border:color},hover:{background:color,border:color}}}}else{c={};c.background=color.background||"white";c.border=color.border||c.background;if(exports.isString(color.highlight)){c.highlight={border:color.highlight,background:color.highlight}}else{c.highlight={};c.highlight.background=color.highlight&&color.highlight.background||c.background;c.highlight.border=color.highlight&&color.highlight.border||c.border}if(exports.isString(color.hover)){c.hover={border:color.hover,background:color.hover}}else{c.hover={};c.hover.background=color.hover&&color.hover.background||c.background;c.hover.border=color.hover&&color.hover.border||c.border}}return c};exports.hexToRGB=function(hex){hex=hex.replace("#","").toUpperCase();var a=exports.GiveDec(hex.substring(0,1));var b=exports.GiveDec(hex.substring(1,2));var c=exports.GiveDec(hex.substring(2,3));var d=exports.GiveDec(hex.substring(3,4));var e=exports.GiveDec(hex.substring(4,5));var f=exports.GiveDec(hex.substring(5,6));var r=a*16+b;var g=c*16+d;var b=e*16+f;return{r:r,g:g,b:b}};exports.RGBToHex=function(red,green,blue){var a=exports.GiveHex(Math.floor(red/16));var b=exports.GiveHex(red%16);var c=exports.GiveHex(Math.floor(green/16));var d=exports.GiveHex(green%16);var e=exports.GiveHex(Math.floor(blue/16));var f=exports.GiveHex(blue%16);var hex=a+b+c+d+e+f;return"#"+hex};exports.RGBToHSV=function(red,green,blue){red=red/255;green=green/255;blue=blue/255;var minRGB=Math.min(red,Math.min(green,blue));var maxRGB=Math.max(red,Math.max(green,blue));if(minRGB==maxRGB){return{h:0,s:0,v:minRGB}}var d=red==minRGB?green-blue:blue==minRGB?red-green:blue-red;var h=red==minRGB?3:blue==minRGB?1:5;var hue=60*(h-d/(maxRGB-minRGB))/360;var saturation=(maxRGB-minRGB)/maxRGB;var value=maxRGB;return{h:hue,s:saturation,v:value}};var cssUtil={split:function(cssText){var styles={};cssText.split(";").forEach(function(style){if(style.trim()!=""){var parts=style.split(":");var key=parts[0].trim();var value=parts[1].trim();styles[key]=value}});return styles},join:function(styles){return Object.keys(styles).map(function(key){return key+": "+styles[key]}).join("; ")}};exports.addCssText=function(element,cssText){var currentStyles=cssUtil.split(element.style.cssText);var newStyles=cssUtil.split(cssText);var styles=exports.extend(currentStyles,newStyles);element.style.cssText=cssUtil.join(styles)};exports.removeCssText=function(element,cssText){var styles=cssUtil.split(element.style.cssText);var removeStyles=cssUtil.split(cssText);for(var key in removeStyles){if(removeStyles.hasOwnProperty(key)){delete styles[key]}}element.style.cssText=cssUtil.join(styles)};exports.HSVToRGB=function(h,s,v){var r,g,b;var i=Math.floor(h*6);var f=h*6-i;var p=v*(1-s);var q=v*(1-f*s);var t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q;break}return{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255)}};exports.HSVToHex=function(h,s,v){var rgb=exports.HSVToRGB(h,s,v);return exports.RGBToHex(rgb.r,rgb.g,rgb.b)};exports.hexToHSV=function(hex){var rgb=exports.hexToRGB(hex);return exports.RGBToHSV(rgb.r,rgb.g,rgb.b)};exports.isValidHex=function(hex){var isOk=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);return isOk};exports.isValidRGB=function(rgb){rgb=rgb.replace(" ","");var isOk=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(rgb);return isOk};exports.selectiveBridgeObject=function(fields,referenceObject){if(typeof referenceObject=="object"){var objectTo=Object.create(referenceObject);for(var i=0;i<fields.length;i++){if(referenceObject.hasOwnProperty(fields[i])){if(typeof referenceObject[fields[i]]=="object"){objectTo[fields[i]]=exports.bridgeObject(referenceObject[fields[i]])}}}return objectTo}else{return null}};exports.bridgeObject=function(referenceObject){if(typeof referenceObject=="object"){var objectTo=Object.create(referenceObject);for(var i in referenceObject){if(referenceObject.hasOwnProperty(i)){if(typeof referenceObject[i]=="object"){objectTo[i]=exports.bridgeObject(referenceObject[i])}}}return objectTo}else{return null}};exports.mergeOptions=function(mergeTarget,options,option){if(options[option]!==undefined){if(typeof options[option]=="boolean"){mergeTarget[option].enabled=options[option]}else{mergeTarget[option].enabled=true;for(var prop in options[option]){if(options[option].hasOwnProperty(prop)){mergeTarget[option][prop]=options[option][prop]}}}}};exports.binarySearchCustom=function(orderedItems,searchFunction,field,field2){var maxIterations=1e4;var iteration=0;var low=0;var high=orderedItems.length-1;while(low<=high&&iteration<maxIterations){var middle=Math.floor((low+high)/2);var item=orderedItems[middle];var value=field2===undefined?item[field]:item[field][field2];var searchResult=searchFunction(value);if(searchResult==0){return middle}else if(searchResult==-1){low=middle+1}else{high=middle-1}iteration++}return-1};exports.binarySearchValue=function(orderedItems,target,field,sidePreference){var maxIterations=1e4;var iteration=0;var low=0;var high=orderedItems.length-1;var prevValue,value,nextValue,middle;while(low<=high&&iteration<maxIterations){middle=Math.floor(.5*(high+low));prevValue=orderedItems[Math.max(0,middle-1)][field];value=orderedItems[middle][field];nextValue=orderedItems[Math.min(orderedItems.length-1,middle+1)][field];if(value==target){return middle}else if(prevValue<target&&value>target){return sidePreference=="before"?Math.max(0,middle-1):middle}else if(value<target&&nextValue>target){return sidePreference=="before"?middle:Math.min(orderedItems.length-1,middle+1)}else{if(value<target){low=middle+1}else{high=middle-1}}iteration++}return-1};exports.easeInOutQuad=function(t,start,end,duration){var change=end-start;t/=duration/2;if(t<1)return change/2*t*t+start;t--;return-change/2*(t*(t-2)-1)+start};exports.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},function(module,exports,__webpack_require__){module.exports=typeof window!=="undefined"&&window["moment"]||__webpack_require__(3)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global,module){(function(undefined){var moment,VERSION="2.8.4",globalScope=typeof global!=="undefined"?global:this,oldGlobalMoment,round=Math.round,hasOwnProperty=Object.prototype.hasOwnProperty,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,locales={},momentProperties=[],hasModule=typeof module!=="undefined"&&module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenOffsetMs=/[\+\-]?\d+/,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,d:26,M:11},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.localeData().monthsShort(this,format)},MMMM:function(format){return this.localeData().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.localeData().weekdaysMin(this,format)},ddd:function(format){return this.localeData().weekdaysShort(this,format)},dddd:function(format){return this.localeData().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},deprecations={},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function dfl(a,b,c){switch(arguments.length){case 2:return a!=null?a:b;case 3:return a!=null?a:b!=null?b:c;default:throw new Error("Implement me")}}function hasOwnProp(a,b){return hasOwnProperty.call(a,b)}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function printMsg(msg){if(moment.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(firstTime){printMsg(msg);firstTime=false}return fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){if(!deprecations[name]){printMsg(msg);deprecations[name]=true}}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.localeData().ordinal(func.call(this,a),period)}}while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i)}while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function Locale(){}function Moment(config,skipOverflow){if(skipOverflow!==false){checkOverflow(config)}copyConfig(this,config);this._d=new Date(+config._d)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=moment.localeData();this._bubble()}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=="undefined"){to._isAMomentObject=from._isAMomentObject}if(typeof from._i!=="undefined"){to._i=from._i}if(typeof from._f!=="undefined"){to._f=from._f}if(typeof from._l!=="undefined"){to._l=from._l}if(typeof from._strict!=="undefined"){to._strict=from._strict}if(typeof from._tzm!=="undefined"){to._tzm=from._tzm}if(typeof from._isUTC!=="undefined"){to._isUTC=from._isUTC}if(typeof from._offset!=="undefined"){to._offset=from._offset}if(typeof from._pf!=="undefined"){to._pf=from._pf}if(typeof from._locale!=="undefined"){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=="undefined"){to[prop]=val}}}return to}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function leftZeroFill(number,targetLength,forceSign){var output=""+Math.abs(number),sign=number>=0;while(output.length<targetLength){output="0"+output}return(sign?forceSign?"+":"":"-")+output}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;other=makeAs(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period).");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=moment.duration(val,period);addOrSubtractDurationFromMoment(this,dur,direction);return this}}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding)}if(days){rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding)}if(months){rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding)}if(updateOffset){moment.updateOffset(mom,days||months)}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function isDate(input){return Object.prototype.toString.call(input)==="[object Date]"||input instanceof Date}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}function makeList(field){var count,setter;if(field.indexOf("week")===0){count=7;setter="day"}else if(field.indexOf("month")===0){count=12;setter="month"}else{return}moment[field]=function(format,index){var i,getter,method=moment._locale[field],results=[];if(typeof format==="number"){index=format;format=undefined}getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment._locale,m,format||"")};if(index!=null){return getter(index)}else{for(i=0;i<count;i++){results.push(getter(i))}return results}}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){if(coercedNumber>=0){value=Math.floor(coercedNumber)}else{value=Math.ceil(coercedNumber)}}return value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;if(m._a&&m._pf.overflow===-2){overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>24||m._a[HOUR]===24&&(m._a[MINUTE]!==0||m._a[SECOND]!==0||m._a[MILLISECOND]!==0)?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1;if(m._pf._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}m._pf.overflow=overflow}}function isValid(m){if(m._isValid==null){m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated;if(m._strict){m._isValid=m._isValid&&m._pf.charsLeftOver===0&&m._pf.unusedTokens.length===0&&m._pf.bigHour===undefined}}return m._isValid}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");
j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&hasModule){try{oldLocale=moment.locale();!function webpackMissingModule(){var e=new Error('Cannot find module "./locale"');e.code="MODULE_NOT_FOUND";throw e}();moment.locale(oldLocale)}catch(e){}}return locales[name]}function makeAs(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(moment.isMoment(input)||isDate(input)?+input:+moment(input))-+res;res._d.setTime(+res._d+diff);moment.updateOffset(res,false);return res}else{return moment(input).local()}}extend(Locale.prototype,{set:function(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=moment.utc([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[]}for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=moment([2e3,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._weekdaysParse[i].test(weekdayName)){return i}}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}return output},isPM:function(input){return(input+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom,now){var output=this._calendar[key];return typeof output==="function"?output.apply(mom,[now]):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict){return parseTokenOneDigit}case"SS":if(strict){return parseTokenTwoDigits}case"SSS":if(strict){return parseTokenThreeDigits}case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return config._locale._meridiemParse;case"x":return parseTokenOffsetMs;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return strict?config._locale._ordinalParse:config._locale._ordinalParseLenient;default:a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"));return a}}function timezoneMinutesFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":if(input!=null){datePartArray[MONTH]=(toInt(input)-1)*3}break;case"M":case"MM":if(input!=null){datePartArray[MONTH]=toInt(input)-1}break;case"MMM":case"MMMM":a=config._locale.monthsParse(input,token,config._strict);if(a!=null){datePartArray[MONTH]=a}else{config._pf.invalidMonth=input}break;case"D":case"DD":if(input!=null){datePartArray[DATE]=toInt(input)}break;case"Do":if(input!=null){datePartArray[DATE]=toInt(parseInt(input.match(/\d{1,2}/)[0],10))}break;case"DDD":case"DDDD":if(input!=null){config._dayOfYear=toInt(input)}break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=config._locale.isPM(input);break;case"h":case"hh":config._pf.bigHour=true;case"H":case"HH":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(("0."+input)*1e3);break;case"x":config._d=new Date(toInt(input));break;case"X":config._d=new Date(parseFloat(input)*1e3);break;case"Z":case"ZZ":config._useUTC=true;config._tzm=timezoneMinutesFromString(input);break;case"dd":case"ddd":case"dddd":a=config._locale.weekdaysParse(input);if(a!=null){config._w=config._w||{};config._w["d"]=a}else{config._pf.invalidWeekday=input}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":token=token.substr(0,1);case"gggg":case"GGGG":case"GGGGG":token=token.substr(0,2);if(input){config._w=config._w||{};config._w[token]=toInt(input)}break;case"gg":case"GG":config._w=config._w||{};config._w[token]=moment.parseTwoDigitYear(input)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year);week=dfl(w.W,1);weekday=dfl(w.E,1)}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year);week=dfl(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week}}else if(w.e!=null){weekday=w.e+dow}else{weekday=dow}}temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}function dateFromConfig(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=dfl(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){config._pf._overflowDayOfYear=true}date=makeUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()+config._tzm)}if(config._nextDay){config._a[HOUR]=24}}function dateFromObject(config){var normalizedInput;if(config._d){return}normalizedInput=normalizeObjectUnits(config._i);config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day||normalizedInput.date,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond];dateFromConfig(config)}function currentDateArray(config){var now=new Date;if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]}else{return[now.getFullYear(),now.getMonth(),now.getDate()]}}function makeDateFromStringAndFormat(config){if(config._f===moment.ISO_8601){parseISO(config);return}config._a=[];config._pf.empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){config._pf.unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){config._pf.empty=false}else{config._pf.unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){config._pf.unusedTokens.push(token)}}config._pf.charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){config._pf.unusedInput.push(string)}if(config._pf.bigHour===true&&config._a[HOUR]<=12){config._pf.bigHour=undefined}if(config._isPm&&config._a[HOUR]<12){config._a[HOUR]+=12}if(config._isPm===false&&config._a[HOUR]===12){config._a[HOUR]=0}dateFromConfig(config);checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){config._pf.invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._pf=defaultParsingFlags();tempConfig._f=config._f[i];makeDateFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue}currentScore+=tempConfig._pf.charsLeftOver;currentScore+=tempConfig._pf.unusedTokens.length*10;tempConfig._pf.score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){config._pf.iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}}for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}if(string.match(parseTokenTimezone)){config._f+="Z"}makeDateFromStringAndFormat(config)}else{config._isValid=false}}function makeDateFromString(config){parseISO(config);if(config._isValid===false){delete config._isValid;moment.createFromInputFallback(config)}}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function makeDateFromInput(config){var input=config._i,matched;if(input===undefined){config._d=new Date}else if(isDate(input)){config._d=new Date(+input)}else if((matched=aspNetJsonRegex.exec(input))!==null){config._d=new Date(+matched[1])}else if(typeof input==="string"){makeDateFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});dateFromConfig(config)}else if(typeof input==="object"){dateFromObject(config)}else if(typeof input==="number"){config._d=new Date(input)}else{moment.createFromInputFallback(config)}}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y)}return date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y)}return date}function parseWeekday(input,locale){if(typeof input==="string"){if(!isNaN(input)){input=parseInt(input,10)}else{input=locale.weekdaysParse(input);if(typeof input!=="number"){return null}}}return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(posNegDuration,withoutSuffix,locale){var duration=moment.duration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),args=seconds<relativeTimeThresholds.s&&["s",seconds]||minutes===1&&["m"]||minutes<relativeTimeThresholds.m&&["mm",minutes]||hours===1&&["h"]||hours<relativeTimeThresholds.h&&["hh",hours]||days===1&&["d"]||days<relativeTimeThresholds.d&&["dd",days]||months===1&&["M"]||months<relativeTimeThresholds.M&&["MM",months]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=+posNegDuration>0;args[4]=locale;return substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}adjustedMoment=moment(mom).add(daysToDayOfWeek,"d");return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var d=makeUTCDate(year,0,1).getUTCDay(),daysToAdd,dayOfYear;d=d===0?7:d;weekday=weekday!=null?weekday:firstDayOfWeek;daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0);dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var input=config._i,format=config._f,res;config._locale=config._locale||moment.localeData(config._l);if(input===null||format===undefined&&input===""){return moment.invalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(moment.isMoment(input)){return new Moment(input,true)}else if(format){if(isArray(format)){makeDateFromStringAndArray(config)}else{makeDateFromStringAndFormat(config)}}else{makeDateFromInput(config)}res=new Moment(config);if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}moment=function(input,format,locale,strict){var c;if(typeof locale==="boolean"){strict=locale;locale=undefined}c={};c._isAMomentObject=true;c._i=input;c._f=format;c._l=locale;c._strict=strict;c._isUTC=false;c._pf=defaultParsingFlags();return makeMoment(c)};moment.suppressDeprecationWarnings=false;moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return moment()}res=moments[0];for(i=1;i<moments.length;++i){if(moments[i][fn](res)){res=moments[i]}}return res}moment.min=function(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)};moment.max=function(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)};moment.utc=function(input,format,locale,strict){var c;if(typeof locale==="boolean"){strict=locale;locale=undefined}c={};c._isAMomentObject=true;c._useUTC=true;c._isUTC=true;c._l=locale;c._i=input;c._f=format;c._strict=strict;c._pf=defaultParsingFlags();return makeMoment(c).utc()};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var duration=input,match=null,sign,ret,parseIso,diffRes;if(moment.isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(typeof input==="number"){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetTimeSpanJsonRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}}else if(!!(match=isoDurationRegex.exec(input))){sign=match[1]==="-"?-1:1;parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign};duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(moment(duration.from),moment(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(moment.isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.ISO_8601=function(){};moment.momentProperties=momentProperties;moment.updateOffset=function(){};moment.relativeTimeThreshold=function(threshold,limit){if(relativeTimeThresholds[threshold]===undefined){return false}if(limit===undefined){return relativeTimeThresholds[threshold]}relativeTimeThresholds[threshold]=limit;return true};moment.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",function(key,value){return moment.locale(key,value)});moment.locale=function(key,values){var data;if(key){if(typeof values!=="undefined"){data=moment.defineLocale(key,values)}else{data=moment.localeData(key)}if(data){moment.duration._locale=moment._locale=data}}return moment._locale._abbr};moment.defineLocale=function(name,values){if(values!==null){values.abbr=name;if(!locales[name]){locales[name]=new Locale}locales[name].set(values);moment.locale(name);return locales[name]}else{delete locales[name];return null}};moment.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",function(key){return moment.localeData(key)});moment.localeData=function(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return moment._locale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)};moment.isMoment=function(obj){return obj instanceof Moment||obj!=null&&hasOwnProp(obj,"_isAMomentObject")};moment.isDuration=function(obj){return obj instanceof Duration};for(i=lists.length-1;i>=0;--i){makeList(lists[i])}moment.normalizeUnits=function(units){return normalizeUnits(units)};moment.invalid=function(flags){var m=moment.utc(NaN);if(flags!=null){extend(m._pf,flags)}else{m._pf.userInvalidated=true}return m};moment.parseZone=function(){return moment.apply(null,arguments).parseZone()};moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();if(0<m.year()&&m.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0}return false},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(keepLocalTime){return this.zone(0,keepLocalTime)},local:function(keepLocalTime){if(this._isUTC){this.zone(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.add(this._dateTzOffset(),"m")}}return this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.localeData().postformat(output)},add:createAdder(1,"add"),subtract:createAdder(-1,"subtract"),diff:function(input,units,asFloat){var that=makeAs(input,this),zoneDiff=(this.zone()-that.zone())*6e4,diff,output,daysAdjust;units=normalizeUnits(units);if(units==="year"||units==="month"){diff=(this.daysInMonth()+that.daysInMonth())*432e5;output=(this.year()-that.year())*12+(this.month()-that.month());daysAdjust=this-moment(this).startOf("month")-(that-moment(that).startOf("month"));daysAdjust-=(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))*6e4;output+=daysAdjust/diff;if(units==="year"){output=output/12}}else{diff=this-that;output=units==="second"?diff/1e3:units==="minute"?diff/6e4:units==="hour"?diff/36e5:units==="day"?(diff-zoneDiff)/864e5:units==="week"?(diff-zoneDiff)/6048e5:diff}return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var now=time||moment(),sod=makeAs(now,this).startOf("day"),diff=this.diff(sod,"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(format,this,moment(now)))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}},month:makeAccessor("Month",true),startOf:function(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}else if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")},isAfter:function(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=moment.isMoment(input)?input:moment(input);return+this>+input}else{inputMs=moment.isMoment(input)?+input:+moment(input);return inputMs<+this.clone().startOf(units)}},isBefore:function(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=moment.isMoment(input)?input:moment(input);return+this<+input}else{inputMs=moment.isMoment(input)?+input:+moment(input);return+this.clone().endOf(units)<inputMs}},isSame:function(input,units){var inputMs;units=normalizeUnits(units||"millisecond");if(units==="millisecond"){input=moment.isMoment(input)?input:moment(input);return+this===+input}else{inputMs=+moment(input);return+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units)}},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){other=moment.apply(null,arguments);return other<this?this:other}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){other=moment.apply(null,arguments);return other>this?this:other}),zone:function(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==="string"){input=timezoneMinutesFromString(input)}if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=this._dateTzOffset()}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.subtract(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;moment.updateOffset(this,true);this._changeInProgress=null}}}else{return this._isUTC?offset:this._dateTzOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else if(typeof this._i==="string"){this.zone(this._i)}return this},hasAlignedHourOffset:function(input){if(!input){input=0}else{input=moment(input).zone()}return(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")},quarter:function(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add(input-year,"y")},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add(input-year,"y")},week:function(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")},weekday:function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")},isoWeekday:function(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){units=normalizeUnits(units);return this[units]()},set:function(units,value){units=normalizeUnits(units);if(typeof this[units]==="function"){this[units](value)}return this},locale:function(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=moment.localeData(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}},lang:deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}});function rawMonthSetter(mom,value){var dayOfMonth;if(typeof value==="string"){value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){if(unit==="Month"){return rawMonthSetter(mom,value)}else{return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}function makeAccessor(unit,keepTime){return function(value){if(value!=null){rawSetter(this,unit,value);moment.updateOffset(this,keepTime);return this}else{return rawGetter(this,unit)}}}moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",false);moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",false);moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",false);moment.fn.hour=moment.fn.hours=makeAccessor("Hours",true);moment.fn.date=makeAccessor("Date",true);moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",true));moment.fn.year=makeAccessor("FullYear",true);moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",true));moment.fn.days=moment.fn.day;moment.fn.months=moment.fn.month;moment.fn.weeks=moment.fn.week;moment.fn.isoWeeks=moment.fn.isoWeek;moment.fn.quarters=moment.fn.quarter;moment.fn.toJSON=moment.fn.toISOString;function daysToYears(days){return days*400/146097}function yearsToDays(years){return years*146097/400}extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years=0;data.milliseconds=milliseconds%1e3;
seconds=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes=absRound(seconds/60);data.minutes=minutes%60;hours=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);years=absRound(daysToYears(days));days-=absRound(yearsToDays(years));months+=absRound(days/30);days%=30;years+=absRound(months/12);months%=12;data.days=days;data.months=months;data.years=years},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6},humanize:function(withSuffix){var output=relativeTime(this,!withSuffix,this.localeData());if(withSuffix){output=this.localeData().pastFuture(+this,output)}return this.localeData().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);this._milliseconds+=dur._milliseconds;this._days+=dur._days;this._months+=dur._months;this._bubble();return this},subtract:function(input,val){var dur=moment.duration(input,val);this._milliseconds-=dur._milliseconds;this._days-=dur._days;this._months-=dur._months;this._bubble();return this},get:function(units){units=normalizeUnits(units);return this[units.toLowerCase()+"s"]()},as:function(units){var days,months;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+this._milliseconds/864e5;months=this._months+daysToYears(days)*12;return units==="month"?months:months/12}else{days=this._days+Math.round(yearsToDays(this._months/12));switch(units){case"week":return days/7+this._milliseconds/6048e5;case"day":return days+this._milliseconds/864e5;case"hour":return days*24+this._milliseconds/36e5;case"minute":return days*24*60+this._milliseconds/6e4;case"second":return days*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(days*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+units)}}},lang:moment.fn.lang,locale:moment.fn.locale,toIsoString:deprecate("toIsoString() is deprecated. Please use toISOString() instead "+"(notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":"")},localeData:function(){return this._locale}});moment.duration.fn.toString=moment.duration.fn.toISOString;function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}for(i in unitMillisecondFactors){if(hasOwnProp(unitMillisecondFactors,i)){makeDurationGetter(i.toLowerCase())}}moment.duration.fn.asMilliseconds=function(){return this.as("ms")};moment.duration.fn.asSeconds=function(){return this.as("s")};moment.duration.fn.asMinutes=function(){return this.as("m")};moment.duration.fn.asHours=function(){return this.as("h")};moment.duration.fn.asDays=function(){return this.as("d")};moment.duration.fn.asWeeks=function(){return this.as("weeks")};moment.duration.fn.asMonths=function(){return this.as("M")};moment.duration.fn.asYears=function(){return this.as("y")};moment.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});function makeGlobal(shouldDeprecate){if(typeof ender!=="undefined"){return}oldGlobalMoment=globalScope.moment;if(shouldDeprecate){globalScope.moment=deprecate("Accessing Moment through the global scope is "+"deprecated, and will be removed in an upcoming "+"release.",moment)}else{globalScope.moment=moment}}if(hasModule){module.exports=moment}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){if(module.config&&module.config()&&module.config().noGlobal===true){globalScope.moment=oldGlobalMoment}return moment}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));makeGlobal(true)}else{makeGlobal()}}).call(this)}).call(exports,function(){return this}(),__webpack_require__(5)(module))},function(module,exports,__webpack_require__){function webpackContext(req){throw new Error("Cannot find module '"+req+"'.")}webpackContext.keys=function(){return[]};webpackContext.resolve=webpackContext;module.exports=webpackContext;webpackContext.id=4},function(module,exports,__webpack_require__){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];module.children=[];module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){exports.prepareElements=function(JSONcontainer){for(var elementType in JSONcontainer){if(JSONcontainer.hasOwnProperty(elementType)){JSONcontainer[elementType].redundant=JSONcontainer[elementType].used;JSONcontainer[elementType].used=[]}}};exports.cleanupElements=function(JSONcontainer){for(var elementType in JSONcontainer){if(JSONcontainer.hasOwnProperty(elementType)){if(JSONcontainer[elementType].redundant){for(var i=0;i<JSONcontainer[elementType].redundant.length;i++){JSONcontainer[elementType].redundant[i].parentNode.removeChild(JSONcontainer[elementType].redundant[i])}JSONcontainer[elementType].redundant=[]}}}};exports.getSVGElement=function(elementType,JSONcontainer,svgContainer){var element;if(JSONcontainer.hasOwnProperty(elementType)){if(JSONcontainer[elementType].redundant.length>0){element=JSONcontainer[elementType].redundant[0];JSONcontainer[elementType].redundant.shift()}else{element=document.createElementNS("http://www.w3.org/2000/svg",elementType);svgContainer.appendChild(element)}}else{element=document.createElementNS("http://www.w3.org/2000/svg",elementType);JSONcontainer[elementType]={used:[],redundant:[]};svgContainer.appendChild(element)}JSONcontainer[elementType].used.push(element);return element};exports.getDOMElement=function(elementType,JSONcontainer,DOMContainer,insertBefore){var element;if(JSONcontainer.hasOwnProperty(elementType)){if(JSONcontainer[elementType].redundant.length>0){element=JSONcontainer[elementType].redundant[0];JSONcontainer[elementType].redundant.shift()}else{element=document.createElement(elementType);if(insertBefore!==undefined){DOMContainer.insertBefore(element,insertBefore)}else{DOMContainer.appendChild(element)}}}else{element=document.createElement(elementType);JSONcontainer[elementType]={used:[],redundant:[]};if(insertBefore!==undefined){DOMContainer.insertBefore(element,insertBefore)}else{DOMContainer.appendChild(element)}}JSONcontainer[elementType].used.push(element);return element};exports.drawPoint=function(x,y,group,JSONcontainer,svgContainer){var point;if(group.options.drawPoints.style=="circle"){point=exports.getSVGElement("circle",JSONcontainer,svgContainer);point.setAttributeNS(null,"cx",x);point.setAttributeNS(null,"cy",y);point.setAttributeNS(null,"r",.5*group.options.drawPoints.size)}else{point=exports.getSVGElement("rect",JSONcontainer,svgContainer);point.setAttributeNS(null,"x",x-.5*group.options.drawPoints.size);point.setAttributeNS(null,"y",y-.5*group.options.drawPoints.size);point.setAttributeNS(null,"width",group.options.drawPoints.size);point.setAttributeNS(null,"height",group.options.drawPoints.size)}if(group.options.drawPoints.styles!==undefined){point.setAttributeNS(null,"style",group.group.options.drawPoints.styles)}point.setAttributeNS(null,"class",group.className+" point");return point};exports.drawBar=function(x,y,width,height,className,JSONcontainer,svgContainer){if(height!=0){if(height<0){height*=-1;y-=height}var rect=exports.getSVGElement("rect",JSONcontainer,svgContainer);rect.setAttributeNS(null,"x",x-.5*width);rect.setAttributeNS(null,"y",y);rect.setAttributeNS(null,"width",width);rect.setAttributeNS(null,"height",height);rect.setAttributeNS(null,"class",className)}}},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Queue=__webpack_require__(8);function DataSet(data,options){if(data&&!Array.isArray(data)&&!util.isDataTable(data)){options=data;data=null}this._options=options||{};this._data={};this._fieldId=this._options.fieldId||"id";this._type={};if(this._options.type){for(var field in this._options.type){if(this._options.type.hasOwnProperty(field)){var value=this._options.type[field];if(value=="Date"||value=="ISODate"||value=="ASPDate"){this._type[field]="Date"}else{this._type[field]=value}}}}if(this._options.convert){throw new Error('Option "convert" is deprecated. Use "type" instead.')}this._subscribers={};if(data){this.add(data)}this.setOptions(options)}DataSet.prototype.setOptions=function(options){if(options&&options.queue!==undefined){if(options.queue===false){if(this._queue){this._queue.destroy();delete this._queue}}else{if(!this._queue){this._queue=Queue.extend(this,{replace:["add","update","remove"]})}if(typeof options.queue==="object"){this._queue.setOptions(options.queue)}}}};DataSet.prototype.on=function(event,callback){var subscribers=this._subscribers[event];if(!subscribers){subscribers=[];this._subscribers[event]=subscribers}subscribers.push({callback:callback})};DataSet.prototype.subscribe=DataSet.prototype.on;DataSet.prototype.off=function(event,callback){var subscribers=this._subscribers[event];if(subscribers){this._subscribers[event]=subscribers.filter(function(listener){return listener.callback!=callback})}};DataSet.prototype.unsubscribe=DataSet.prototype.off;DataSet.prototype._trigger=function(event,params,senderId){if(event=="*"){throw new Error("Cannot trigger event *")}var subscribers=[];if(event in this._subscribers){subscribers=subscribers.concat(this._subscribers[event])}if("*"in this._subscribers){subscribers=subscribers.concat(this._subscribers["*"])}for(var i=0;i<subscribers.length;i++){var subscriber=subscribers[i];if(subscriber.callback){subscriber.callback(event,params,senderId||null)}}};DataSet.prototype.add=function(data,senderId){var addedIds=[],id,me=this;if(Array.isArray(data)){for(var i=0,len=data.length;i<len;i++){id=me._addItem(data[i]);addedIds.push(id)}}else if(util.isDataTable(data)){var columns=this._getColumnNames(data);for(var row=0,rows=data.getNumberOfRows();row<rows;row++){var item={};for(var col=0,cols=columns.length;col<cols;col++){var field=columns[col];item[field]=data.getValue(row,col)}id=me._addItem(item);addedIds.push(id)}}else if(data instanceof Object){id=me._addItem(data);addedIds.push(id)}else{throw new Error("Unknown dataType")}if(addedIds.length){this._trigger("add",{items:addedIds},senderId)}return addedIds};DataSet.prototype.update=function(data,senderId){var addedIds=[];var updatedIds=[];var updatedData=[];var me=this;var fieldId=me._fieldId;var addOrUpdate=function(item){var id=item[fieldId];if(me._data[id]){id=me._updateItem(item);updatedIds.push(id);updatedData.push(item)}else{id=me._addItem(item);addedIds.push(id)}};if(Array.isArray(data)){for(var i=0,len=data.length;i<len;i++){addOrUpdate(data[i])}}else if(util.isDataTable(data)){var columns=this._getColumnNames(data);for(var row=0,rows=data.getNumberOfRows();row<rows;row++){var item={};for(var col=0,cols=columns.length;col<cols;col++){var field=columns[col];item[field]=data.getValue(row,col)}addOrUpdate(item)}}else if(data instanceof Object){addOrUpdate(data)}else{throw new Error("Unknown dataType")}if(addedIds.length){this._trigger("add",{items:addedIds},senderId)}if(updatedIds.length){this._trigger("update",{items:updatedIds,data:updatedData},senderId)}return addedIds.concat(updatedIds)};DataSet.prototype.get=function(args){var me=this;var id,ids,options,data;var firstType=util.getType(arguments[0]);if(firstType=="String"||firstType=="Number"){id=arguments[0];options=arguments[1];data=arguments[2]}else if(firstType=="Array"){ids=arguments[0];options=arguments[1];data=arguments[2]}else{options=arguments[0];data=arguments[1]}var returnType;if(options&&options.returnType){var allowedValues=["DataTable","Array","Object"];returnType=allowedValues.indexOf(options.returnType)==-1?"Array":options.returnType;if(data&&returnType!=util.getType(data)){throw new Error('Type of parameter "data" ('+util.getType(data)+") "+"does not correspond with specified options.type ("+options.type+")")}if(returnType=="DataTable"&&!util.isDataTable(data)){throw new Error('Parameter "data" must be a DataTable '+'when options.type is "DataTable"')}}else if(data){returnType=util.getType(data)=="DataTable"?"DataTable":"Array"}else{returnType="Array"}var type=options&&options.type||this._options.type;var filter=options&&options.filter;var items=[],item,itemId,i,len;if(id!=undefined){item=me._getItem(id,type);if(filter&&!filter(item)){item=null}}else if(ids!=undefined){for(i=0,len=ids.length;i<len;i++){item=me._getItem(ids[i],type);if(!filter||filter(item)){items.push(item)}}}else{for(itemId in this._data){if(this._data.hasOwnProperty(itemId)){item=me._getItem(itemId,type);if(!filter||filter(item)){items.push(item)}}}}if(options&&options.order&&id==undefined){this._sort(items,options.order)}if(options&&options.fields){var fields=options.fields;if(id!=undefined){item=this._filterFields(item,fields)}else{for(i=0,len=items.length;i<len;i++){items[i]=this._filterFields(items[i],fields)}}}if(returnType=="DataTable"){var columns=this._getColumnNames(data);if(id!=undefined){me._appendRow(data,columns,item)}else{for(i=0;i<items.length;i++){me._appendRow(data,columns,items[i])}}return data}else if(returnType=="Object"){var result={};for(i=0;i<items.length;i++){result[items[i].id]=items[i]}return result}else{if(id!=undefined){return item}else{if(data){for(i=0,len=items.length;i<len;i++){data.push(items[i])}return data}else{return items}}}};DataSet.prototype.getIds=function(options){var data=this._data,filter=options&&options.filter,order=options&&options.order,type=options&&options.type||this._options.type,i,len,id,item,items,ids=[];if(filter){if(order){items=[];for(id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(filter(item)){items.push(item)}}}this._sort(items,order);for(i=0,len=items.length;i<len;i++){ids[i]=items[i][this._fieldId]}}else{for(id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(filter(item)){ids.push(item[this._fieldId])}}}}}else{if(order){items=[];for(id in data){if(data.hasOwnProperty(id)){items.push(data[id])}}this._sort(items,order);for(i=0,len=items.length;i<len;i++){ids[i]=items[i][this._fieldId]}}else{for(id in data){if(data.hasOwnProperty(id)){item=data[id];ids.push(item[this._fieldId])}}}}return ids};DataSet.prototype.getDataSet=function(){return this};DataSet.prototype.forEach=function(callback,options){var filter=options&&options.filter,type=options&&options.type||this._options.type,data=this._data,item,id;if(options&&options.order){var items=this.get(options);for(var i=0,len=items.length;i<len;i++){item=items[i];id=item[this._fieldId];callback(item,id)}}else{for(id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(!filter||filter(item)){callback(item,id)}}}}};DataSet.prototype.map=function(callback,options){var filter=options&&options.filter,type=options&&options.type||this._options.type,mappedItems=[],data=this._data,item;for(var id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(!filter||filter(item)){mappedItems.push(callback(item,id))}}}if(options&&options.order){this._sort(mappedItems,options.order)}return mappedItems};DataSet.prototype._filterFields=function(item,fields){var filteredItem={};for(var field in item){if(item.hasOwnProperty(field)&&fields.indexOf(field)!=-1){filteredItem[field]=item[field]}}return filteredItem};DataSet.prototype._sort=function(items,order){if(util.isString(order)){var name=order;items.sort(function(a,b){var av=a[name];var bv=b[name];return av>bv?1:av<bv?-1:0})}else if(typeof order==="function"){items.sort(order)}else{throw new TypeError("Order must be a function or a string")}};DataSet.prototype.remove=function(id,senderId){var removedIds=[],i,len,removedId;if(Array.isArray(id)){for(i=0,len=id.length;i<len;i++){removedId=this._remove(id[i]);if(removedId!=null){removedIds.push(removedId)}}}else{removedId=this._remove(id);if(removedId!=null){removedIds.push(removedId)}}if(removedIds.length){this._trigger("remove",{items:removedIds},senderId)}return removedIds};DataSet.prototype._remove=function(id){if(util.isNumber(id)||util.isString(id)){if(this._data[id]){delete this._data[id];return id}}else if(id instanceof Object){var itemId=id[this._fieldId];if(itemId&&this._data[itemId]){delete this._data[itemId];return itemId}}return null};DataSet.prototype.clear=function(senderId){var ids=Object.keys(this._data);this._data={};this._trigger("remove",{items:ids},senderId);return ids};DataSet.prototype.max=function(field){var data=this._data,max=null,maxField=null;for(var id in data){if(data.hasOwnProperty(id)){var item=data[id];var itemField=item[field];if(itemField!=null&&(!max||itemField>maxField)){max=item;maxField=itemField}}}return max};DataSet.prototype.min=function(field){var data=this._data,min=null,minField=null;for(var id in data){if(data.hasOwnProperty(id)){var item=data[id];var itemField=item[field];if(itemField!=null&&(!min||itemField<minField)){min=item;minField=itemField}}}return min};DataSet.prototype.distinct=function(field){var data=this._data;var values=[];var fieldType=this._options.type&&this._options.type[field]||null;var count=0;var i;for(var prop in data){if(data.hasOwnProperty(prop)){var item=data[prop];var value=item[field];var exists=false;for(i=0;i<count;i++){if(values[i]==value){exists=true;break}}if(!exists&&value!==undefined){values[count]=value;count++}}}if(fieldType){for(i=0;i<values.length;i++){values[i]=util.convert(values[i],fieldType)}}return values};DataSet.prototype._addItem=function(item){var id=item[this._fieldId];if(id!=undefined){if(this._data[id]){throw new Error("Cannot add item: item with id "+id+" already exists")}}else{id=util.randomUUID();item[this._fieldId]=id}var d={};for(var field in item){if(item.hasOwnProperty(field)){var fieldType=this._type[field];d[field]=util.convert(item[field],fieldType)}}this._data[id]=d;return id};DataSet.prototype._getItem=function(id,types){var field,value;var raw=this._data[id];if(!raw){return null}var converted={};if(types){for(field in raw){if(raw.hasOwnProperty(field)){value=raw[field];converted[field]=util.convert(value,types[field])}}}else{for(field in raw){if(raw.hasOwnProperty(field)){value=raw[field];converted[field]=value}}}return converted};DataSet.prototype._updateItem=function(item){var id=item[this._fieldId];if(id==undefined){throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(item)+")")}var d=this._data[id];if(!d){throw new Error("Cannot update item: no item with id "+id+" found")}for(var field in item){if(item.hasOwnProperty(field)){var fieldType=this._type[field];d[field]=util.convert(item[field],fieldType)}}return id};DataSet.prototype._getColumnNames=function(dataTable){var columns=[];for(var col=0,cols=dataTable.getNumberOfColumns();col<cols;col++){columns[col]=dataTable.getColumnId(col)||dataTable.getColumnLabel(col)}return columns};DataSet.prototype._appendRow=function(dataTable,columns,item){var row=dataTable.addRow();for(var col=0,cols=columns.length;col<cols;col++){var field=columns[col];dataTable.setValue(row,col,item[field])}};module.exports=DataSet},function(module,exports,__webpack_require__){function Queue(options){this.delay=null;this.max=Infinity;this._queue=[];this._timeout=null;this._extended=null;this.setOptions(options)}Queue.prototype.setOptions=function(options){if(options&&typeof options.delay!=="undefined"){this.delay=options.delay}if(options&&typeof options.max!=="undefined"){this.max=options.max}this._flushIfNeeded()};Queue.extend=function(object,options){var queue=new Queue(options);if(object.flush!==undefined){throw new Error("Target object already has a property flush")}object.flush=function(){queue.flush()};var methods=[{name:"flush",original:undefined}];if(options&&options.replace){for(var i=0;i<options.replace.length;i++){var name=options.replace[i];methods.push({name:name,original:object[name]});queue.replace(object,name)}}queue._extended={object:object,methods:methods};return queue};Queue.prototype.destroy=function(){this.flush();if(this._extended){var object=this._extended.object;var methods=this._extended.methods;for(var i=0;i<methods.length;i++){var method=methods[i];if(method.original){object[method.name]=method.original}else{delete object[method.name]}}this._extended=null}};Queue.prototype.replace=function(object,method){var me=this;var original=object[method];if(!original){throw new Error("Method "+method+" undefined")}object[method]=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i]}me.queue({args:args,fn:original,context:this})}};Queue.prototype.queue=function(entry){if(typeof entry==="function"){this._queue.push({fn:entry})}else{this._queue.push(entry)}this._flushIfNeeded()};Queue.prototype._flushIfNeeded=function(){if(this._queue.length>this.max){this.flush()}clearTimeout(this._timeout);if(this.queue.length>0&&typeof this.delay==="number"){var me=this;this._timeout=setTimeout(function(){me.flush()},this.delay)}};Queue.prototype.flush=function(){while(this._queue.length>0){var entry=this._queue.shift();entry.fn.apply(entry.context||entry.fn,entry.args||[])}};module.exports=Queue},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var DataSet=__webpack_require__(7);function DataView(data,options){this._data=null;this._ids={};this._options=options||{};this._fieldId="id";this._subscribers={};var me=this;this.listener=function(){me._onEvent.apply(me,arguments)};this.setData(data)}DataView.prototype.setData=function(data){var ids,i,len;if(this._data){if(this._data.unsubscribe){this._data.unsubscribe("*",this.listener)}ids=[];for(var id in this._ids){if(this._ids.hasOwnProperty(id)){ids.push(id)}}this._ids={};this._trigger("remove",{items:ids})}this._data=data;if(this._data){this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id";ids=this._data.getIds({filter:this._options&&this._options.filter});for(i=0,len=ids.length;i<len;i++){id=ids[i];this._ids[id]=true}this._trigger("add",{items:ids});if(this._data.on){this._data.on("*",this.listener)}}};DataView.prototype.get=function(args){var me=this;var ids,options,data;var firstType=util.getType(arguments[0]);if(firstType=="String"||firstType=="Number"||firstType=="Array"){ids=arguments[0];options=arguments[1];data=arguments[2]}else{options=arguments[0];data=arguments[1]}var viewOptions=util.extend({},this._options,options);if(this._options.filter&&options&&options.filter){viewOptions.filter=function(item){return me._options.filter(item)&&options.filter(item)}}var getArguments=[];if(ids!=undefined){getArguments.push(ids)}getArguments.push(viewOptions);getArguments.push(data);return this._data&&this._data.get.apply(this._data,getArguments)};DataView.prototype.getIds=function(options){var ids;if(this._data){var defaultFilter=this._options.filter;var filter;if(options&&options.filter){if(defaultFilter){filter=function(item){return defaultFilter(item)&&options.filter(item)}}else{filter=options.filter}}else{filter=defaultFilter}ids=this._data.getIds({filter:filter,order:options&&options.order})}else{ids=[]}return ids};DataView.prototype.getDataSet=function(){var dataSet=this;while(dataSet instanceof DataView){dataSet=dataSet._data}return dataSet||null};DataView.prototype._onEvent=function(event,params,senderId){var i,len,id,item,ids=params&&params.items,data=this._data,added=[],updated=[],removed=[];if(ids&&data){switch(event){case"add":for(i=0,len=ids.length;i<len;i++){id=ids[i];item=this.get(id);if(item){this._ids[id]=true;added.push(id)}}break;case"update":for(i=0,len=ids.length;i<len;i++){id=ids[i];item=this.get(id);if(item){if(this._ids[id]){updated.push(id)}else{this._ids[id]=true;added.push(id)}}else{if(this._ids[id]){delete this._ids[id];removed.push(id)}else{}}}break;case"remove":for(i=0,len=ids.length;i<len;i++){id=ids[i];if(this._ids[id]){delete this._ids[id];removed.push(id)}}break}if(added.length){this._trigger("add",{items:added},senderId)}if(updated.length){this._trigger("update",{items:updated},senderId)}if(removed.length){this._trigger("remove",{items:removed},senderId)}}};DataView.prototype.on=DataSet.prototype.on;DataView.prototype.off=DataSet.prototype.off;DataView.prototype._trigger=DataSet.prototype._trigger;DataView.prototype.subscribe=DataView.prototype.on;DataView.prototype.unsubscribe=DataView.prototype.off;module.exports=DataView},function(module,exports,__webpack_require__){var Emitter=__webpack_require__(11);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var util=__webpack_require__(1);var Point3d=__webpack_require__(12);var Point2d=__webpack_require__(13);var Camera=__webpack_require__(14);var Filter=__webpack_require__(15);var Slider=__webpack_require__(16);var StepNumber=__webpack_require__(17);function Graph3d(container,data,options){if(!(this instanceof Graph3d)){throw new SyntaxError("Constructor must be called with the new operator")}this.containerElement=container;this.width="400px";this.height="400px";this.margin=10;this.defaultXCenter="55%";this.defaultYCenter="50%";this.xLabel="x";this.yLabel="y";this.zLabel="z";var passValueFn=function(v){return v};this.xValueLabel=passValueFn;this.yValueLabel=passValueFn;this.zValueLabel=passValueFn;this.filterLabel="time";this.legendLabel="value";this.style=Graph3d.STYLE.DOT;this.showPerspective=true;this.showGrid=true;this.keepAspectRatio=true;this.showShadow=false;this.showGrayBottom=false;this.showTooltip=false;this.verticalRatio=.5;this.animationInterval=1e3;this.animationPreload=false;this.camera=new Camera;this.eye=new Point3d(0,0,-1);this.dataTable=null;this.dataPoints=null;this.colX=undefined;this.colY=undefined;this.colZ=undefined;this.colValue=undefined;this.colFilter=undefined;this.xMin=0;this.xStep=undefined;this.xMax=1;this.yMin=0;this.yStep=undefined;this.yMax=1;this.zMin=0;this.zStep=undefined;this.zMax=1;this.valueMin=0;this.valueMax=1;this.xBarWidth=1;this.yBarWidth=1;this.colorAxis="#4D4D4D";this.colorGrid="#D3D3D3";this.colorDot="#7DC1FF";this.colorDotBorder="#3267D2";this.create();this.setOptions(options);if(data){this.setData(data)}}Emitter(Graph3d.prototype);Graph3d.prototype._setScale=function(){this.scale=new Point3d(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin));if(this.keepAspectRatio){if(this.scale.x<this.scale.y){this.scale.y=this.scale.x}else{this.scale.x=this.scale.y}}this.scale.z*=this.verticalRatio;this.scale.value=1/(this.valueMax-this.valueMin);var xCenter=(this.xMax+this.xMin)/2*this.scale.x;var yCenter=(this.yMax+this.yMin)/2*this.scale.y;var zCenter=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(xCenter,yCenter,zCenter)};Graph3d.prototype._convert3Dto2D=function(point3d){var translation=this._convertPointToTranslation(point3d);return this._convertTranslationToScreen(translation)};Graph3d.prototype._convertPointToTranslation=function(point3d){var ax=point3d.x*this.scale.x,ay=point3d.y*this.scale.y,az=point3d.z*this.scale.z,cx=this.camera.getCameraLocation().x,cy=this.camera.getCameraLocation().y,cz=this.camera.getCameraLocation().z,sinTx=Math.sin(this.camera.getCameraRotation().x),cosTx=Math.cos(this.camera.getCameraRotation().x),sinTy=Math.sin(this.camera.getCameraRotation().y),cosTy=Math.cos(this.camera.getCameraRotation().y),sinTz=Math.sin(this.camera.getCameraRotation().z),cosTz=Math.cos(this.camera.getCameraRotation().z),dx=cosTy*(sinTz*(ay-cy)+cosTz*(ax-cx))-sinTy*(az-cz),dy=sinTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))+cosTx*(cosTz*(ay-cy)-sinTz*(ax-cx)),dz=cosTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))-sinTx*(cosTz*(ay-cy)-sinTz*(ax-cx));return new Point3d(dx,dy,dz)};Graph3d.prototype._convertTranslationToScreen=function(translation){var ex=this.eye.x,ey=this.eye.y,ez=this.eye.z,dx=translation.x,dy=translation.y,dz=translation.z;var bx;var by;if(this.showPerspective){bx=(dx-ex)*(ez/dz);by=(dy-ey)*(ez/dz)}else{bx=dx*-(ez/this.camera.getArmLength());by=dy*-(ez/this.camera.getArmLength())}return new Point2d(this.xcenter+bx*this.frame.canvas.clientWidth,this.ycenter-by*this.frame.canvas.clientWidth)};Graph3d.prototype._setBackgroundColor=function(backgroundColor){var fill="white";var stroke="gray";var strokeWidth=1;if(typeof backgroundColor==="string"){fill=backgroundColor;stroke="none";strokeWidth=0}else if(typeof backgroundColor==="object"){if(backgroundColor.fill!==undefined)fill=backgroundColor.fill;if(backgroundColor.stroke!==undefined)stroke=backgroundColor.stroke;if(backgroundColor.strokeWidth!==undefined)strokeWidth=backgroundColor.strokeWidth}else if(backgroundColor===undefined){}else{throw"Unsupported type of backgroundColor"}this.frame.style.backgroundColor=fill;this.frame.style.borderColor=stroke;this.frame.style.borderWidth=strokeWidth+"px";this.frame.style.borderStyle="solid"};Graph3d.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9};Graph3d.prototype._getStyleNumber=function(styleName){switch(styleName){case"dot":return Graph3d.STYLE.DOT;case"dot-line":return Graph3d.STYLE.DOTLINE;case"dot-color":return Graph3d.STYLE.DOTCOLOR;case"dot-size":return Graph3d.STYLE.DOTSIZE;case"line":return Graph3d.STYLE.LINE;case"grid":return Graph3d.STYLE.GRID;case"surface":return Graph3d.STYLE.SURFACE;case"bar":return Graph3d.STYLE.BAR;case"bar-color":return Graph3d.STYLE.BARCOLOR;case"bar-size":return Graph3d.STYLE.BARSIZE}return-1};Graph3d.prototype._determineColumnIndexes=function(data,style){if(this.style===Graph3d.STYLE.DOT||this.style===Graph3d.STYLE.DOTLINE||this.style===Graph3d.STYLE.LINE||this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE||this.style===Graph3d.STYLE.BAR){this.colX=0;this.colY=1;this.colZ=2;this.colValue=undefined;if(data.getNumberOfColumns()>3){this.colFilter=3}}else if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE){this.colX=0;this.colY=1;this.colZ=2;this.colValue=3;if(data.getNumberOfColumns()>4){this.colFilter=4}}else{throw'Unknown style "'+this.style+'"'}};Graph3d.prototype.getNumberOfRows=function(data){return data.length};Graph3d.prototype.getNumberOfColumns=function(data){var counter=0;for(var column in data[0]){if(data[0].hasOwnProperty(column)){counter++}}return counter};Graph3d.prototype.getDistinctValues=function(data,column){var distinctValues=[];for(var i=0;i<data.length;i++){if(distinctValues.indexOf(data[i][column])==-1){distinctValues.push(data[i][column])}}return distinctValues};Graph3d.prototype.getColumnRange=function(data,column){var minMax={min:data[0][column],max:data[0][column]};for(var i=0;i<data.length;i++){if(minMax.min>data[i][column]){minMax.min=data[i][column]}if(minMax.max<data[i][column]){minMax.max=data[i][column]}}return minMax};Graph3d.prototype._dataInitialize=function(rawData,style){var me=this;if(this.dataSet){this.dataSet.off("*",this._onChange)}if(rawData===undefined)return;if(Array.isArray(rawData)){rawData=new DataSet(rawData)}var data;if(rawData instanceof DataSet||rawData instanceof DataView){data=rawData.get()}else{throw new Error("Array, DataSet, or DataView expected")}if(data.length==0)return;
this.dataSet=rawData;this.dataTable=data;this._onChange=function(){me.setData(me.dataSet)};this.dataSet.on("*",this._onChange);this.colX="x";this.colY="y";this.colZ="z";this.colValue="style";this.colFilter="filter";if(data[0].hasOwnProperty("filter")){if(this.dataFilter===undefined){this.dataFilter=new Filter(rawData,this.colFilter,this);this.dataFilter.setOnLoadCallback(function(){me.redraw()})}}var withBars=this.style==Graph3d.STYLE.BAR||this.style==Graph3d.STYLE.BARCOLOR||this.style==Graph3d.STYLE.BARSIZE;if(withBars){if(this.defaultXBarWidth!==undefined){this.xBarWidth=this.defaultXBarWidth}else{var dataX=this.getDistinctValues(data,this.colX);this.xBarWidth=dataX[1]-dataX[0]||1}if(this.defaultYBarWidth!==undefined){this.yBarWidth=this.defaultYBarWidth}else{var dataY=this.getDistinctValues(data,this.colY);this.yBarWidth=dataY[1]-dataY[0]||1}}var xRange=this.getColumnRange(data,this.colX);if(withBars){xRange.min-=this.xBarWidth/2;xRange.max+=this.xBarWidth/2}this.xMin=this.defaultXMin!==undefined?this.defaultXMin:xRange.min;this.xMax=this.defaultXMax!==undefined?this.defaultXMax:xRange.max;if(this.xMax<=this.xMin)this.xMax=this.xMin+1;this.xStep=this.defaultXStep!==undefined?this.defaultXStep:(this.xMax-this.xMin)/5;var yRange=this.getColumnRange(data,this.colY);if(withBars){yRange.min-=this.yBarWidth/2;yRange.max+=this.yBarWidth/2}this.yMin=this.defaultYMin!==undefined?this.defaultYMin:yRange.min;this.yMax=this.defaultYMax!==undefined?this.defaultYMax:yRange.max;if(this.yMax<=this.yMin)this.yMax=this.yMin+1;this.yStep=this.defaultYStep!==undefined?this.defaultYStep:(this.yMax-this.yMin)/5;var zRange=this.getColumnRange(data,this.colZ);this.zMin=this.defaultZMin!==undefined?this.defaultZMin:zRange.min;this.zMax=this.defaultZMax!==undefined?this.defaultZMax:zRange.max;if(this.zMax<=this.zMin)this.zMax=this.zMin+1;this.zStep=this.defaultZStep!==undefined?this.defaultZStep:(this.zMax-this.zMin)/5;if(this.colValue!==undefined){var valueRange=this.getColumnRange(data,this.colValue);this.valueMin=this.defaultValueMin!==undefined?this.defaultValueMin:valueRange.min;this.valueMax=this.defaultValueMax!==undefined?this.defaultValueMax:valueRange.max;if(this.valueMax<=this.valueMin)this.valueMax=this.valueMin+1}this._setScale()};Graph3d.prototype._getDataPoints=function(data){var x,y,i,z,obj,point;var dataPoints=[];if(this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE){var dataX=[];var dataY=[];for(i=0;i<this.getNumberOfRows(data);i++){x=data[i][this.colX]||0;y=data[i][this.colY]||0;if(dataX.indexOf(x)===-1){dataX.push(x)}if(dataY.indexOf(y)===-1){dataY.push(y)}}var sortNumber=function(a,b){return a-b};dataX.sort(sortNumber);dataY.sort(sortNumber);var dataMatrix=[];for(i=0;i<data.length;i++){x=data[i][this.colX]||0;y=data[i][this.colY]||0;z=data[i][this.colZ]||0;var xIndex=dataX.indexOf(x);var yIndex=dataY.indexOf(y);if(dataMatrix[xIndex]===undefined){dataMatrix[xIndex]=[]}var point3d=new Point3d;point3d.x=x;point3d.y=y;point3d.z=z;obj={};obj.point=point3d;obj.trans=undefined;obj.screen=undefined;obj.bottom=new Point3d(x,y,this.zMin);dataMatrix[xIndex][yIndex]=obj;dataPoints.push(obj)}for(x=0;x<dataMatrix.length;x++){for(y=0;y<dataMatrix[x].length;y++){if(dataMatrix[x][y]){dataMatrix[x][y].pointRight=x<dataMatrix.length-1?dataMatrix[x+1][y]:undefined;dataMatrix[x][y].pointTop=y<dataMatrix[x].length-1?dataMatrix[x][y+1]:undefined;dataMatrix[x][y].pointCross=x<dataMatrix.length-1&&y<dataMatrix[x].length-1?dataMatrix[x+1][y+1]:undefined}}}}else{for(i=0;i<data.length;i++){point=new Point3d;point.x=data[i][this.colX]||0;point.y=data[i][this.colY]||0;point.z=data[i][this.colZ]||0;if(this.colValue!==undefined){point.value=data[i][this.colValue]||0}obj={};obj.point=point;obj.bottom=new Point3d(point.x,point.y,this.zMin);obj.trans=undefined;obj.screen=undefined;dataPoints.push(obj)}}return dataPoints};Graph3d.prototype.create=function(){while(this.containerElement.hasChildNodes()){this.containerElement.removeChild(this.containerElement.firstChild)}this.frame=document.createElement("div");this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);{var noCanvas=document.createElement("DIV");noCanvas.style.color="red";noCanvas.style.fontWeight="bold";noCanvas.style.padding="10px";noCanvas.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(noCanvas)}this.frame.filter=document.createElement("div");this.frame.filter.style.position="absolute";this.frame.filter.style.bottom="0px";this.frame.filter.style.left="0px";this.frame.filter.style.width="100%";this.frame.appendChild(this.frame.filter);var me=this;var onmousedown=function(event){me._onMouseDown(event)};var ontouchstart=function(event){me._onTouchStart(event)};var onmousewheel=function(event){me._onWheel(event)};var ontooltip=function(event){me._onTooltip(event)};util.addEventListener(this.frame.canvas,"keydown",onkeydown);util.addEventListener(this.frame.canvas,"mousedown",onmousedown);util.addEventListener(this.frame.canvas,"touchstart",ontouchstart);util.addEventListener(this.frame.canvas,"mousewheel",onmousewheel);util.addEventListener(this.frame.canvas,"mousemove",ontooltip);this.containerElement.appendChild(this.frame)};Graph3d.prototype.setSize=function(width,height){this.frame.style.width=width;this.frame.style.height=height;this._resizeCanvas()};Graph3d.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=this.frame.canvas.clientWidth;this.frame.canvas.height=this.frame.canvas.clientHeight;this.frame.filter.style.width=this.frame.canvas.clientWidth-2*10+"px"};Graph3d.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()};Graph3d.prototype.animationStop=function(){if(!this.frame.filter||!this.frame.filter.slider)return;this.frame.filter.slider.stop()};Graph3d.prototype._resizeCenter=function(){if(this.defaultXCenter.charAt(this.defaultXCenter.length-1)==="%"){this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth}else{this.xcenter=parseFloat(this.defaultXCenter)}if(this.defaultYCenter.charAt(this.defaultYCenter.length-1)==="%"){this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight)}else{this.ycenter=parseFloat(this.defaultYCenter)}};Graph3d.prototype.setCameraPosition=function(pos){if(pos===undefined){return}if(pos.horizontal!==undefined&&pos.vertical!==undefined){this.camera.setArmRotation(pos.horizontal,pos.vertical)}if(pos.distance!==undefined){this.camera.setArmLength(pos.distance)}this.redraw()};Graph3d.prototype.getCameraPosition=function(){var pos=this.camera.getArmRotation();pos.distance=this.camera.getArmLength();return pos};Graph3d.prototype._readData=function(data){this._dataInitialize(data,this.style);if(this.dataFilter){this.dataPoints=this.dataFilter._getDataPoints()}else{this.dataPoints=this._getDataPoints(this.dataTable)}this._redrawFilter()};Graph3d.prototype.setData=function(data){this._readData(data);this.redraw();if(this.animationAutoStart&&this.dataFilter){this.animationStart()}};Graph3d.prototype.setOptions=function(options){var cameraPosition=undefined;this.animationStop();if(options!==undefined){if(options.width!==undefined)this.width=options.width;if(options.height!==undefined)this.height=options.height;if(options.xCenter!==undefined)this.defaultXCenter=options.xCenter;if(options.yCenter!==undefined)this.defaultYCenter=options.yCenter;if(options.filterLabel!==undefined)this.filterLabel=options.filterLabel;if(options.legendLabel!==undefined)this.legendLabel=options.legendLabel;if(options.xLabel!==undefined)this.xLabel=options.xLabel;if(options.yLabel!==undefined)this.yLabel=options.yLabel;if(options.zLabel!==undefined)this.zLabel=options.zLabel;if(options.xValueLabel!==undefined)this.xValueLabel=options.xValueLabel;if(options.yValueLabel!==undefined)this.yValueLabel=options.yValueLabel;if(options.zValueLabel!==undefined)this.zValueLabel=options.zValueLabel;if(options.style!==undefined){var styleNumber=this._getStyleNumber(options.style);if(styleNumber!==-1){this.style=styleNumber}}if(options.showGrid!==undefined)this.showGrid=options.showGrid;if(options.showPerspective!==undefined)this.showPerspective=options.showPerspective;if(options.showShadow!==undefined)this.showShadow=options.showShadow;if(options.tooltip!==undefined)this.showTooltip=options.tooltip;if(options.showAnimationControls!==undefined)this.showAnimationControls=options.showAnimationControls;if(options.keepAspectRatio!==undefined)this.keepAspectRatio=options.keepAspectRatio;if(options.verticalRatio!==undefined)this.verticalRatio=options.verticalRatio;if(options.animationInterval!==undefined)this.animationInterval=options.animationInterval;if(options.animationPreload!==undefined)this.animationPreload=options.animationPreload;if(options.animationAutoStart!==undefined)this.animationAutoStart=options.animationAutoStart;if(options.xBarWidth!==undefined)this.defaultXBarWidth=options.xBarWidth;if(options.yBarWidth!==undefined)this.defaultYBarWidth=options.yBarWidth;if(options.xMin!==undefined)this.defaultXMin=options.xMin;if(options.xStep!==undefined)this.defaultXStep=options.xStep;if(options.xMax!==undefined)this.defaultXMax=options.xMax;if(options.yMin!==undefined)this.defaultYMin=options.yMin;if(options.yStep!==undefined)this.defaultYStep=options.yStep;if(options.yMax!==undefined)this.defaultYMax=options.yMax;if(options.zMin!==undefined)this.defaultZMin=options.zMin;if(options.zStep!==undefined)this.defaultZStep=options.zStep;if(options.zMax!==undefined)this.defaultZMax=options.zMax;if(options.valueMin!==undefined)this.defaultValueMin=options.valueMin;if(options.valueMax!==undefined)this.defaultValueMax=options.valueMax;if(options.cameraPosition!==undefined)cameraPosition=options.cameraPosition;if(cameraPosition!==undefined){this.camera.setArmRotation(cameraPosition.horizontal,cameraPosition.vertical);this.camera.setArmLength(cameraPosition.distance)}else{this.camera.setArmRotation(1,.5);this.camera.setArmLength(1.7)}}this._setBackgroundColor(options&&options.backgroundColor);this.setSize(this.width,this.height);if(this.dataTable){this.setData(this.dataTable)}if(this.animationAutoStart&&this.dataFilter){this.animationStart()}};Graph3d.prototype.redraw=function(){if(this.dataPoints===undefined){throw"Error: graph data not initialized"}this._resizeCanvas();this._resizeCenter();this._redrawSlider();this._redrawClear();this._redrawAxis();if(this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE){this._redrawDataGrid()}else if(this.style===Graph3d.STYLE.LINE){this._redrawDataLine()}else if(this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE){this._redrawDataBar()}else{this._redrawDataDot()}this._redrawInfo();this._redrawLegend()};Graph3d.prototype._redrawClear=function(){var canvas=this.frame.canvas;var ctx=canvas.getContext("2d");ctx.clearRect(0,0,canvas.width,canvas.height)};Graph3d.prototype._redrawLegend=function(){var y;if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var dotSize=this.frame.clientWidth*.02;var widthMin,widthMax;if(this.style===Graph3d.STYLE.DOTSIZE){widthMin=dotSize/2;widthMax=dotSize/2+dotSize*2}else{widthMin=20;widthMax=20}var height=Math.max(this.frame.clientHeight*.25,100);var top=this.margin;var right=this.frame.clientWidth-this.margin;var left=right-widthMax;var bottom=top+height}var canvas=this.frame.canvas;var ctx=canvas.getContext("2d");ctx.lineWidth=1;ctx.font="14px arial";if(this.style===Graph3d.STYLE.DOTCOLOR){var ymin=0;var ymax=height;for(y=ymin;y<ymax;y++){var f=(y-ymin)/(ymax-ymin);var hue=f*240;var color=this._hsv2rgb(hue,1,1);ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(left,top+y);ctx.lineTo(right,top+y);ctx.stroke()}ctx.strokeStyle=this.colorAxis;ctx.strokeRect(left,top,widthMax,height)}if(this.style===Graph3d.STYLE.DOTSIZE){ctx.strokeStyle=this.colorAxis;ctx.fillStyle=this.colorDot;ctx.beginPath();ctx.moveTo(left,top);ctx.lineTo(right,top);ctx.lineTo(right-widthMax+widthMin,bottom);ctx.lineTo(left,bottom);ctx.closePath();ctx.fill();ctx.stroke()}if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var gridLineLen=5;var step=new StepNumber(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,true);step.start();if(step.getCurrent()<this.valueMin){step.next()}while(!step.end()){y=bottom-(step.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*height;ctx.beginPath();ctx.moveTo(left-gridLineLen,y);ctx.lineTo(left,y);ctx.stroke();ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillStyle=this.colorAxis;ctx.fillText(step.getCurrent(),left-2*gridLineLen,y);step.next()}ctx.textAlign="right";ctx.textBaseline="top";var label=this.legendLabel;ctx.fillText(label,right,bottom+this.margin)}};Graph3d.prototype._redrawFilter=function(){this.frame.filter.innerHTML="";if(this.dataFilter){var options={visible:this.showAnimationControls};var slider=new Slider(this.frame.filter,options);this.frame.filter.slider=slider;this.frame.filter.style.padding="10px";slider.setValues(this.dataFilter.values);slider.setPlayInterval(this.animationInterval);var me=this;var onchange=function(){var index=slider.getIndex();me.dataFilter.selectValue(index);me.dataPoints=me.dataFilter._getDataPoints();me.redraw()};slider.setOnChangeCallback(onchange)}else{this.frame.filter.slider=undefined}};Graph3d.prototype._redrawSlider=function(){if(this.frame.filter.slider!==undefined){this.frame.filter.slider.redraw()}};Graph3d.prototype._redrawInfo=function(){if(this.dataFilter){var canvas=this.frame.canvas;var ctx=canvas.getContext("2d");ctx.font="14px arial";ctx.lineStyle="gray";ctx.fillStyle="gray";ctx.textAlign="left";ctx.textBaseline="top";var x=this.margin;var y=this.margin;ctx.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),x,y)}};Graph3d.prototype._redrawAxis=function(){var canvas=this.frame.canvas,ctx=canvas.getContext("2d"),from,to,step,prettyStep,text,xText,yText,zText,offset,xOffset,yOffset,xMin2d,xMax2d;ctx.font=24/this.camera.getArmLength()+"px arial";var gridLenX=.025/this.scale.x;var gridLenY=.025/this.scale.y;var textMargin=5/this.camera.getArmLength();var armAngle=this.camera.getArmRotation().horizontal;ctx.lineWidth=1;prettyStep=this.defaultXStep===undefined;step=new StepNumber(this.xMin,this.xMax,this.xStep,prettyStep);step.start();if(step.getCurrent()<this.xMin){step.next()}while(!step.end()){var x=step.getCurrent();if(this.showGrid){from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin));ctx.strokeStyle=this.colorGrid;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke()}else{from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(x,this.yMin+gridLenX,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();from=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin));to=this._convert3Dto2D(new Point3d(x,this.yMax-gridLenX,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke()}yText=Math.cos(armAngle)>0?this.yMin:this.yMax;text=this._convert3Dto2D(new Point3d(x,yText,this.zMin));if(Math.cos(armAngle*2)>0){ctx.textAlign="center";ctx.textBaseline="top";text.y+=textMargin}else if(Math.sin(armAngle*2)<0){ctx.textAlign="right";ctx.textBaseline="middle"}else{ctx.textAlign="left";ctx.textBaseline="middle"}ctx.fillStyle=this.colorAxis;ctx.fillText("  "+this.xValueLabel(step.getCurrent())+"  ",text.x,text.y);step.next()}ctx.lineWidth=1;prettyStep=this.defaultYStep===undefined;step=new StepNumber(this.yMin,this.yMax,this.yStep,prettyStep);step.start();if(step.getCurrent()<this.yMin){step.next()}while(!step.end()){if(this.showGrid){from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin));to=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin));ctx.strokeStyle=this.colorGrid;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke()}else{from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin));to=this._convert3Dto2D(new Point3d(this.xMin+gridLenY,step.getCurrent(),this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();from=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin));to=this._convert3Dto2D(new Point3d(this.xMax-gridLenY,step.getCurrent(),this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke()}xText=Math.sin(armAngle)>0?this.xMin:this.xMax;text=this._convert3Dto2D(new Point3d(xText,step.getCurrent(),this.zMin));if(Math.cos(armAngle*2)<0){ctx.textAlign="center";ctx.textBaseline="top";text.y+=textMargin}else if(Math.sin(armAngle*2)>0){ctx.textAlign="right";ctx.textBaseline="middle"}else{ctx.textAlign="left";ctx.textBaseline="middle"}ctx.fillStyle=this.colorAxis;ctx.fillText("  "+this.yValueLabel(step.getCurrent())+"  ",text.x,text.y);step.next()}ctx.lineWidth=1;prettyStep=this.defaultZStep===undefined;step=new StepNumber(this.zMin,this.zMax,this.zStep,prettyStep);step.start();if(step.getCurrent()<this.zMin){step.next()}xText=Math.cos(armAngle)>0?this.xMin:this.xMax;yText=Math.sin(armAngle)<0?this.yMin:this.yMax;while(!step.end()){from=this._convert3Dto2D(new Point3d(xText,yText,step.getCurrent()));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(from.x-textMargin,from.y);ctx.stroke();ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillStyle=this.colorAxis;ctx.fillText(this.zValueLabel(step.getCurrent())+" ",from.x-5,from.y);step.next()}ctx.lineWidth=1;from=this._convert3Dto2D(new Point3d(xText,yText,this.zMin));to=this._convert3Dto2D(new Point3d(xText,yText,this.zMax));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();ctx.lineWidth=1;xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin));xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(xMin2d.x,xMin2d.y);ctx.lineTo(xMax2d.x,xMax2d.y);ctx.stroke();xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin));xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(xMin2d.x,xMin2d.y);ctx.lineTo(xMax2d.x,xMax2d.y);ctx.stroke();ctx.lineWidth=1;from=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();from=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();var xLabel=this.xLabel;if(xLabel.length>0){yOffset=.1/this.scale.y;xText=(this.xMin+this.xMax)/2;yText=Math.cos(armAngle)>0?this.yMin-yOffset:this.yMax+yOffset;text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin));if(Math.cos(armAngle*2)>0){ctx.textAlign="center";ctx.textBaseline="top"}else if(Math.sin(armAngle*2)<0){ctx.textAlign="right";ctx.textBaseline="middle"}else{ctx.textAlign="left";ctx.textBaseline="middle"}ctx.fillStyle=this.colorAxis;ctx.fillText(xLabel,text.x,text.y)}var yLabel=this.yLabel;if(yLabel.length>0){xOffset=.1/this.scale.x;xText=Math.sin(armAngle)>0?this.xMin-xOffset:this.xMax+xOffset;yText=(this.yMin+this.yMax)/2;text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin));if(Math.cos(armAngle*2)<0){ctx.textAlign="center";ctx.textBaseline="top"}else if(Math.sin(armAngle*2)>0){ctx.textAlign="right";ctx.textBaseline="middle"}else{ctx.textAlign="left";ctx.textBaseline="middle"}ctx.fillStyle=this.colorAxis;ctx.fillText(yLabel,text.x,text.y)}var zLabel=this.zLabel;if(zLabel.length>0){offset=30;xText=Math.cos(armAngle)>0?this.xMin:this.xMax;yText=Math.sin(armAngle)<0?this.yMin:this.yMax;zText=(this.zMin+this.zMax)/2;text=this._convert3Dto2D(new Point3d(xText,yText,zText));ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillStyle=this.colorAxis;ctx.fillText(zLabel,text.x-offset,text.y)}};Graph3d.prototype._hsv2rgb=function(H,S,V){var R,G,B,C,Hi,X;C=V*S;Hi=Math.floor(H/60);X=C*(1-Math.abs(H/60%2-1));switch(Hi){case 0:R=C;G=X;B=0;break;case 1:R=X;G=C;B=0;break;case 2:R=0;G=C;B=X;break;case 3:R=0;G=X;B=C;break;case 4:R=X;G=0;B=C;break;case 5:R=C;G=0;B=X;break;default:R=0;G=0;B=0;break}return"RGB("+parseInt(R*255)+","+parseInt(G*255)+","+parseInt(B*255)+")"};Graph3d.prototype._redrawDataGrid=function(){var canvas=this.frame.canvas,ctx=canvas.getContext("2d"),point,right,top,cross,i,topSideVisible,fillStyle,strokeStyle,lineWidth,h,s,v,zAvg;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth);if(this.style===Graph3d.STYLE.SURFACE){for(i=0;i<this.dataPoints.length;i++){point=this.dataPoints[i];right=this.dataPoints[i].pointRight;top=this.dataPoints[i].pointTop;cross=this.dataPoints[i].pointCross;if(point!==undefined&&right!==undefined&&top!==undefined&&cross!==undefined){if(this.showGrayBottom||this.showShadow){var aDiff=Point3d.subtract(cross.trans,point.trans);var bDiff=Point3d.subtract(top.trans,right.trans);var crossproduct=Point3d.crossProduct(aDiff,bDiff);var len=crossproduct.length();topSideVisible=crossproduct.z>0}else{topSideVisible=true}if(topSideVisible){zAvg=(point.point.z+right.point.z+top.point.z+cross.point.z)/4;h=(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio)*240;s=1;if(this.showShadow){v=Math.min(1+crossproduct.x/len/2,1);fillStyle=this._hsv2rgb(h,s,v);strokeStyle=fillStyle}else{v=1;fillStyle=this._hsv2rgb(h,s,v);strokeStyle=this.colorAxis}}else{fillStyle="gray";strokeStyle=this.colorAxis}lineWidth=.5;ctx.lineWidth=lineWidth;ctx.fillStyle=fillStyle;ctx.strokeStyle=strokeStyle;ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);ctx.lineTo(right.screen.x,right.screen.y);ctx.lineTo(cross.screen.x,cross.screen.y);ctx.lineTo(top.screen.x,top.screen.y);ctx.closePath();ctx.fill();ctx.stroke()}}}else{for(i=0;i<this.dataPoints.length;i++){point=this.dataPoints[i];right=this.dataPoints[i].pointRight;top=this.dataPoints[i].pointTop;if(point!==undefined){if(this.showPerspective){lineWidth=2/-point.trans.z}else{lineWidth=2*-(this.eye.z/this.camera.getArmLength())}}if(point!==undefined&&right!==undefined){zAvg=(point.point.z+right.point.z)/2;h=(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio)*240;ctx.lineWidth=lineWidth;ctx.strokeStyle=this._hsv2rgb(h,1,1);ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);ctx.lineTo(right.screen.x,right.screen.y);ctx.stroke()}if(point!==undefined&&top!==undefined){zAvg=(point.point.z+top.point.z)/2;h=(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio)*240;ctx.lineWidth=lineWidth;ctx.strokeStyle=this._hsv2rgb(h,1,1);ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);ctx.lineTo(top.screen.x,top.screen.y);ctx.stroke()}}}};Graph3d.prototype._redrawDataDot=function(){var canvas=this.frame.canvas;var ctx=canvas.getContext("2d");var i;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth);var dotSize=this.frame.clientWidth*.02;for(i=0;i<this.dataPoints.length;i++){var point=this.dataPoints[i];if(this.style===Graph3d.STYLE.DOTLINE){var from=this._convert3Dto2D(point.bottom);ctx.lineWidth=1;ctx.strokeStyle=this.colorGrid;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(point.screen.x,point.screen.y);ctx.stroke()}var size;if(this.style===Graph3d.STYLE.DOTSIZE){size=dotSize/2+2*dotSize*(point.point.value-this.valueMin)/(this.valueMax-this.valueMin)}else{size=dotSize}var radius;if(this.showPerspective){radius=size/-point.trans.z}else{radius=size*-(this.eye.z/this.camera.getArmLength())}if(radius<0){radius=0}var hue,color,borderColor;if(this.style===Graph3d.STYLE.DOTCOLOR){hue=(1-(point.point.value-this.valueMin)*this.scale.value)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,.8)}else if(this.style===Graph3d.STYLE.DOTSIZE){color=this.colorDot;borderColor=this.colorDotBorder}else{hue=(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,.8)}ctx.lineWidth=1;ctx.strokeStyle=borderColor;ctx.fillStyle=color;ctx.beginPath();ctx.arc(point.screen.x,point.screen.y,radius,0,Math.PI*2,true);ctx.fill();ctx.stroke()}};Graph3d.prototype._redrawDataBar=function(){var canvas=this.frame.canvas;var ctx=canvas.getContext("2d");var i,j,surface,corners;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth);var xWidth=this.xBarWidth/2;var yWidth=this.yBarWidth/2;for(i=0;i<this.dataPoints.length;i++){var point=this.dataPoints[i];var hue,color,borderColor;if(this.style===Graph3d.STYLE.BARCOLOR){hue=(1-(point.point.value-this.valueMin)*this.scale.value)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,.8)}else if(this.style===Graph3d.STYLE.BARSIZE){color=this.colorDot;borderColor=this.colorDotBorder}else{hue=(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,.8)}if(this.style===Graph3d.STYLE.BARSIZE){xWidth=this.xBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2);yWidth=this.yBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2)}var me=this;var point3d=point.point;var top=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,point3d.z)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,point3d.z)}];var bottom=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,this.zMin)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,this.zMin)}];top.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point)});bottom.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point)});var surfaces=[{corners:top,center:Point3d.avg(bottom[0].point,bottom[2].point)},{corners:[top[0],top[1],bottom[1],bottom[0]],center:Point3d.avg(bottom[1].point,bottom[0].point)},{corners:[top[1],top[2],bottom[2],bottom[1]],center:Point3d.avg(bottom[2].point,bottom[1].point)},{corners:[top[2],top[3],bottom[3],bottom[2]],center:Point3d.avg(bottom[3].point,bottom[2].point)},{corners:[top[3],top[0],bottom[0],bottom[3]],center:Point3d.avg(bottom[0].point,bottom[3].point)}];point.surfaces=surfaces;for(j=0;j<surfaces.length;j++){surface=surfaces[j];var transCenter=this._convertPointToTranslation(surface.center);surface.dist=this.showPerspective?transCenter.length():-transCenter.z}surfaces.sort(function(a,b){var diff=b.dist-a.dist;if(diff)return diff;if(a.corners===top)return 1;if(b.corners===top)return-1;return 0});ctx.lineWidth=1;ctx.strokeStyle=borderColor;ctx.fillStyle=color;for(j=2;j<surfaces.length;j++){surface=surfaces[j];corners=surface.corners;ctx.beginPath();ctx.moveTo(corners[3].screen.x,corners[3].screen.y);ctx.lineTo(corners[0].screen.x,corners[0].screen.y);ctx.lineTo(corners[1].screen.x,corners[1].screen.y);ctx.lineTo(corners[2].screen.x,corners[2].screen.y);ctx.lineTo(corners[3].screen.x,corners[3].screen.y);ctx.fill();ctx.stroke()}}};Graph3d.prototype._redrawDataLine=function(){var canvas=this.frame.canvas,ctx=canvas.getContext("2d"),point,i;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen}if(this.dataPoints.length>0){point=this.dataPoints[0];ctx.lineWidth=1;ctx.strokeStyle="blue";ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y)}for(i=1;i<this.dataPoints.length;i++){point=this.dataPoints[i];ctx.lineTo(point.screen.x,point.screen.y)}if(this.dataPoints.length>0){ctx.stroke()}};Graph3d.prototype._onMouseDown=function(event){event=event||window.event;if(this.leftButtonDown){this._onMouseUp(event)}this.leftButtonDown=event.which?event.which===1:event.button===1;if(!this.leftButtonDown&&!this.touchDown)return;this.startMouseX=getMouseX(event);this.startMouseY=getMouseY(event);this.startStart=new Date(this.start);this.startEnd=new Date(this.end);this.startArmRotation=this.camera.getArmRotation();this.frame.style.cursor="move";var me=this;this.onmousemove=function(event){me._onMouseMove(event)};this.onmouseup=function(event){me._onMouseUp(event)};util.addEventListener(document,"mousemove",me.onmousemove);util.addEventListener(document,"mouseup",me.onmouseup);util.preventDefault(event)};Graph3d.prototype._onMouseMove=function(event){event=event||window.event;var diffX=parseFloat(getMouseX(event))-this.startMouseX;var diffY=parseFloat(getMouseY(event))-this.startMouseY;var horizontalNew=this.startArmRotation.horizontal+diffX/200;var verticalNew=this.startArmRotation.vertical+diffY/200;var snapAngle=4;var snapValue=Math.sin(snapAngle/360*2*Math.PI);if(Math.abs(Math.sin(horizontalNew))<snapValue){horizontalNew=Math.round(horizontalNew/Math.PI)*Math.PI-.001}if(Math.abs(Math.cos(horizontalNew))<snapValue){horizontalNew=(Math.round(horizontalNew/Math.PI-.5)+.5)*Math.PI-.001}if(Math.abs(Math.sin(verticalNew))<snapValue){verticalNew=Math.round(verticalNew/Math.PI)*Math.PI}if(Math.abs(Math.cos(verticalNew))<snapValue){verticalNew=(Math.round(verticalNew/Math.PI-.5)+.5)*Math.PI}this.camera.setArmRotation(horizontalNew,verticalNew);this.redraw();var parameters=this.getCameraPosition();this.emit("cameraPositionChange",parameters);util.preventDefault(event)};Graph3d.prototype._onMouseUp=function(event){this.frame.style.cursor="auto";this.leftButtonDown=false;util.removeEventListener(document,"mousemove",this.onmousemove);util.removeEventListener(document,"mouseup",this.onmouseup);util.preventDefault(event)};Graph3d.prototype._onTooltip=function(event){var delay=300;var boundingRect=this.frame.getBoundingClientRect();var mouseX=getMouseX(event)-boundingRect.left;var mouseY=getMouseY(event)-boundingRect.top;if(!this.showTooltip){return
}if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(this.leftButtonDown){this._hideTooltip();return}if(this.tooltip&&this.tooltip.dataPoint){var dataPoint=this._dataPointFromXY(mouseX,mouseY);if(dataPoint!==this.tooltip.dataPoint){if(dataPoint){this._showTooltip(dataPoint)}else{this._hideTooltip()}}}else{var me=this;this.tooltipTimeout=setTimeout(function(){me.tooltipTimeout=null;var dataPoint=me._dataPointFromXY(mouseX,mouseY);if(dataPoint){me._showTooltip(dataPoint)}},delay)}};Graph3d.prototype._onTouchStart=function(event){this.touchDown=true;var me=this;this.ontouchmove=function(event){me._onTouchMove(event)};this.ontouchend=function(event){me._onTouchEnd(event)};util.addEventListener(document,"touchmove",me.ontouchmove);util.addEventListener(document,"touchend",me.ontouchend);this._onMouseDown(event)};Graph3d.prototype._onTouchMove=function(event){this._onMouseMove(event)};Graph3d.prototype._onTouchEnd=function(event){this.touchDown=false;util.removeEventListener(document,"touchmove",this.ontouchmove);util.removeEventListener(document,"touchend",this.ontouchend);this._onMouseUp(event)};Graph3d.prototype._onWheel=function(event){if(!event)event=window.event;var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120}else if(event.detail){delta=-event.detail/3}if(delta){var oldLength=this.camera.getArmLength();var newLength=oldLength*(1-delta/10);this.camera.setArmLength(newLength);this.redraw();this._hideTooltip()}var parameters=this.getCameraPosition();this.emit("cameraPositionChange",parameters);util.preventDefault(event)};Graph3d.prototype._insideTriangle=function(point,triangle){var a=triangle[0],b=triangle[1],c=triangle[2];function sign(x){return x>0?1:x<0?-1:0}var as=sign((b.x-a.x)*(point.y-a.y)-(b.y-a.y)*(point.x-a.x));var bs=sign((c.x-b.x)*(point.y-b.y)-(c.y-b.y)*(point.x-b.x));var cs=sign((a.x-c.x)*(point.y-c.y)-(a.y-c.y)*(point.x-c.x));return(as==0||bs==0||as==bs)&&(bs==0||cs==0||bs==cs)&&(as==0||cs==0||as==cs)};Graph3d.prototype._dataPointFromXY=function(x,y){var i,distMax=100,dataPoint=null,closestDataPoint=null,closestDist=null,center=new Point2d(x,y);if(this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE){for(i=this.dataPoints.length-1;i>=0;i--){dataPoint=this.dataPoints[i];var surfaces=dataPoint.surfaces;if(surfaces){for(var s=surfaces.length-1;s>=0;s--){var surface=surfaces[s];var corners=surface.corners;var triangle1=[corners[0].screen,corners[1].screen,corners[2].screen];var triangle2=[corners[2].screen,corners[3].screen,corners[0].screen];if(this._insideTriangle(center,triangle1)||this._insideTriangle(center,triangle2)){return dataPoint}}}}}else{for(i=0;i<this.dataPoints.length;i++){dataPoint=this.dataPoints[i];var point=dataPoint.screen;if(point){var distX=Math.abs(x-point.x);var distY=Math.abs(y-point.y);var dist=Math.sqrt(distX*distX+distY*distY);if((closestDist===null||dist<closestDist)&&dist<distMax){closestDist=dist;closestDataPoint=dataPoint}}}}return closestDataPoint};Graph3d.prototype._showTooltip=function(dataPoint){var content,line,dot;if(!this.tooltip){content=document.createElement("div");content.style.position="absolute";content.style.padding="10px";content.style.border="1px solid #4d4d4d";content.style.color="#1a1a1a";content.style.background="rgba(255,255,255,0.7)";content.style.borderRadius="2px";content.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)";line=document.createElement("div");line.style.position="absolute";line.style.height="40px";line.style.width="0";line.style.borderLeft="1px solid #4d4d4d";dot=document.createElement("div");dot.style.position="absolute";dot.style.height="0";dot.style.width="0";dot.style.border="5px solid #4d4d4d";dot.style.borderRadius="5px";this.tooltip={dataPoint:null,dom:{content:content,line:line,dot:dot}}}else{content=this.tooltip.dom.content;line=this.tooltip.dom.line;dot=this.tooltip.dom.dot}this._hideTooltip();this.tooltip.dataPoint=dataPoint;if(typeof this.showTooltip==="function"){content.innerHTML=this.showTooltip(dataPoint.point)}else{content.innerHTML="<table>"+"<tr><td>x:</td><td>"+dataPoint.point.x+"</td></tr>"+"<tr><td>y:</td><td>"+dataPoint.point.y+"</td></tr>"+"<tr><td>z:</td><td>"+dataPoint.point.z+"</td></tr>"+"</table>"}content.style.left="0";content.style.top="0";this.frame.appendChild(content);this.frame.appendChild(line);this.frame.appendChild(dot);var contentWidth=content.offsetWidth;var contentHeight=content.offsetHeight;var lineHeight=line.offsetHeight;var dotWidth=dot.offsetWidth;var dotHeight=dot.offsetHeight;var left=dataPoint.screen.x-contentWidth/2;left=Math.min(Math.max(left,10),this.frame.clientWidth-10-contentWidth);line.style.left=dataPoint.screen.x+"px";line.style.top=dataPoint.screen.y-lineHeight+"px";content.style.left=left+"px";content.style.top=dataPoint.screen.y-lineHeight-contentHeight+"px";dot.style.left=dataPoint.screen.x-dotWidth/2+"px";dot.style.top=dataPoint.screen.y-dotHeight/2+"px"};Graph3d.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var prop in this.tooltip.dom){if(this.tooltip.dom.hasOwnProperty(prop)){var elem=this.tooltip.dom[prop];if(elem&&elem.parentNode){elem.parentNode.removeChild(elem)}}}}};function getMouseX(event){if("clientX"in event)return event.clientX;return event.targetTouches[0]&&event.targetTouches[0].clientX||0}function getMouseY(event){if("clientY"in event)return event.clientY;return event.targetTouches[0]&&event.targetTouches[0].clientY||0}module.exports=Graph3d},function(module,exports,__webpack_require__){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){function Point3d(x,y,z){this.x=x!==undefined?x:0;this.y=y!==undefined?y:0;this.z=z!==undefined?z:0}Point3d.subtract=function(a,b){var sub=new Point3d;sub.x=a.x-b.x;sub.y=a.y-b.y;sub.z=a.z-b.z;return sub};Point3d.add=function(a,b){var sum=new Point3d;sum.x=a.x+b.x;sum.y=a.y+b.y;sum.z=a.z+b.z;return sum};Point3d.avg=function(a,b){return new Point3d((a.x+b.x)/2,(a.y+b.y)/2,(a.z+b.z)/2)};Point3d.crossProduct=function(a,b){var crossproduct=new Point3d;crossproduct.x=a.y*b.z-a.z*b.y;crossproduct.y=a.z*b.x-a.x*b.z;crossproduct.z=a.x*b.y-a.y*b.x;return crossproduct};Point3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};module.exports=Point3d},function(module,exports,__webpack_require__){function Point2d(x,y){this.x=x!==undefined?x:0;this.y=y!==undefined?y:0}module.exports=Point2d},function(module,exports,__webpack_require__){var Point3d=__webpack_require__(12);function Camera(){this.armLocation=new Point3d;this.armRotation={};this.armRotation.horizontal=0;this.armRotation.vertical=0;this.armLength=1.7;this.cameraLocation=new Point3d;this.cameraRotation=new Point3d(.5*Math.PI,0,0);this.calculateCameraOrientation()}Camera.prototype.setArmLocation=function(x,y,z){this.armLocation.x=x;this.armLocation.y=y;this.armLocation.z=z;this.calculateCameraOrientation()};Camera.prototype.setArmRotation=function(horizontal,vertical){if(horizontal!==undefined){this.armRotation.horizontal=horizontal}if(vertical!==undefined){this.armRotation.vertical=vertical;if(this.armRotation.vertical<0)this.armRotation.vertical=0;if(this.armRotation.vertical>.5*Math.PI)this.armRotation.vertical=.5*Math.PI}if(horizontal!==undefined||vertical!==undefined){this.calculateCameraOrientation()}};Camera.prototype.getArmRotation=function(){var rot={};rot.horizontal=this.armRotation.horizontal;rot.vertical=this.armRotation.vertical;return rot};Camera.prototype.setArmLength=function(length){if(length===undefined)return;this.armLength=length;if(this.armLength<.71)this.armLength=.71;if(this.armLength>5)this.armLength=5;this.calculateCameraOrientation()};Camera.prototype.getArmLength=function(){return this.armLength};Camera.prototype.getCameraLocation=function(){return this.cameraLocation};Camera.prototype.getCameraRotation=function(){return this.cameraRotation};Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical);this.cameraRotation.x=Math.PI/2-this.armRotation.vertical;this.cameraRotation.y=0;this.cameraRotation.z=-this.armRotation.horizontal};module.exports=Camera},function(module,exports,__webpack_require__){var DataView=__webpack_require__(9);function Filter(data,column,graph){this.data=data;this.column=column;this.graph=graph;this.index=undefined;this.value=undefined;this.values=graph.getDistinctValues(data.get(),this.column);this.values.sort(function(a,b){return a>b?1:a<b?-1:0});if(this.values.length>0){this.selectValue(0)}this.dataPoints=[];this.loaded=false;this.onLoadCallback=undefined;if(graph.animationPreload){this.loaded=false;this.loadInBackground()}else{this.loaded=true}}Filter.prototype.isLoaded=function(){return this.loaded};Filter.prototype.getLoadedProgress=function(){var len=this.values.length;var i=0;while(this.dataPoints[i]){i++}return Math.round(i/len*100)};Filter.prototype.getLabel=function(){return this.graph.filterLabel};Filter.prototype.getColumn=function(){return this.column};Filter.prototype.getSelectedValue=function(){if(this.index===undefined)return undefined;return this.values[this.index]};Filter.prototype.getValues=function(){return this.values};Filter.prototype.getValue=function(index){if(index>=this.values.length)throw"Error: index out of range";return this.values[index]};Filter.prototype._getDataPoints=function(index){if(index===undefined)index=this.index;if(index===undefined)return[];var dataPoints;if(this.dataPoints[index]){dataPoints=this.dataPoints[index]}else{var f={};f.column=this.column;f.value=this.values[index];var dataView=new DataView(this.data,{filter:function(item){return item[f.column]==f.value}}).get();dataPoints=this.graph._getDataPoints(dataView);this.dataPoints[index]=dataPoints}return dataPoints};Filter.prototype.setOnLoadCallback=function(callback){this.onLoadCallback=callback};Filter.prototype.selectValue=function(index){if(index>=this.values.length)throw"Error: index out of range";this.index=index;this.value=this.values[index]};Filter.prototype.loadInBackground=function(index){if(index===undefined)index=0;var frame=this.graph.frame;if(index<this.values.length){var dataPointsTemp=this._getDataPoints(index);if(frame.progress===undefined){frame.progress=document.createElement("DIV");frame.progress.style.position="absolute";frame.progress.style.color="gray";frame.appendChild(frame.progress)}var progress=this.getLoadedProgress();frame.progress.innerHTML="Loading animation... "+progress+"%";frame.progress.style.bottom=60+"px";frame.progress.style.left=10+"px";var me=this;setTimeout(function(){me.loadInBackground(index+1)},10);this.loaded=false}else{this.loaded=true;if(frame.progress!==undefined){frame.removeChild(frame.progress);frame.progress=undefined}if(this.onLoadCallback)this.onLoadCallback()}};module.exports=Filter},function(module,exports,__webpack_require__){var util=__webpack_require__(1);function Slider(container,options){if(container===undefined){throw"Error: No container element defined"}this.container=container;this.visible=options&&options.visible!=undefined?options.visible:true;if(this.visible){this.frame=document.createElement("DIV");this.frame.style.width="100%";this.frame.style.position="relative";this.container.appendChild(this.frame);this.frame.prev=document.createElement("INPUT");this.frame.prev.type="BUTTON";this.frame.prev.value="Prev";this.frame.appendChild(this.frame.prev);this.frame.play=document.createElement("INPUT");this.frame.play.type="BUTTON";this.frame.play.value="Play";this.frame.appendChild(this.frame.play);this.frame.next=document.createElement("INPUT");this.frame.next.type="BUTTON";this.frame.next.value="Next";this.frame.appendChild(this.frame.next);this.frame.bar=document.createElement("INPUT");this.frame.bar.type="BUTTON";this.frame.bar.style.position="absolute";this.frame.bar.style.border="1px solid red";this.frame.bar.style.width="100px";this.frame.bar.style.height="6px";this.frame.bar.style.borderRadius="2px";this.frame.bar.style.MozBorderRadius="2px";this.frame.bar.style.border="1px solid #7F7F7F";this.frame.bar.style.backgroundColor="#E5E5E5";this.frame.appendChild(this.frame.bar);this.frame.slide=document.createElement("INPUT");this.frame.slide.type="BUTTON";this.frame.slide.style.margin="0px";this.frame.slide.value=" ";this.frame.slide.style.position="relative";this.frame.slide.style.left="-100px";this.frame.appendChild(this.frame.slide);var me=this;this.frame.slide.onmousedown=function(event){me._onMouseDown(event)};this.frame.prev.onclick=function(event){me.prev(event)};this.frame.play.onclick=function(event){me.togglePlay(event)};this.frame.next.onclick=function(event){me.next(event)}}this.onChangeCallback=undefined;this.values=[];this.index=undefined;this.playTimeout=undefined;this.playInterval=1e3;this.playLoop=true}Slider.prototype.prev=function(){var index=this.getIndex();if(index>0){index--;this.setIndex(index)}};Slider.prototype.next=function(){var index=this.getIndex();if(index<this.values.length-1){index++;this.setIndex(index)}};Slider.prototype.playNext=function(){var start=new Date;var index=this.getIndex();if(index<this.values.length-1){index++;this.setIndex(index)}else if(this.playLoop){index=0;this.setIndex(index)}var end=new Date;var diff=end-start;var interval=Math.max(this.playInterval-diff,0);var me=this;this.playTimeout=setTimeout(function(){me.playNext()},interval)};Slider.prototype.togglePlay=function(){if(this.playTimeout===undefined){this.play()}else{this.stop()}};Slider.prototype.play=function(){if(this.playTimeout)return;this.playNext();if(this.frame){this.frame.play.value="Stop"}};Slider.prototype.stop=function(){clearInterval(this.playTimeout);this.playTimeout=undefined;if(this.frame){this.frame.play.value="Play"}};Slider.prototype.setOnChangeCallback=function(callback){this.onChangeCallback=callback};Slider.prototype.setPlayInterval=function(interval){this.playInterval=interval};Slider.prototype.getPlayInterval=function(interval){return this.playInterval};Slider.prototype.setPlayLoop=function(doLoop){this.playLoop=doLoop};Slider.prototype.onChange=function(){if(this.onChangeCallback!==undefined){this.onChangeCallback()}};Slider.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px";this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var left=this.indexToLeft(this.index);this.frame.slide.style.left=left+"px"}};Slider.prototype.setValues=function(values){this.values=values;if(this.values.length>0)this.setIndex(0);else this.index=undefined};Slider.prototype.setIndex=function(index){if(index<this.values.length){this.index=index;this.redraw();this.onChange()}else{throw"Error: index out of range"}};Slider.prototype.getIndex=function(){return this.index};Slider.prototype.get=function(){return this.values[this.index]};Slider.prototype._onMouseDown=function(event){var leftButtonDown=event.which?event.which===1:event.button===1;if(!leftButtonDown)return;this.startClientX=event.clientX;this.startSlideX=parseFloat(this.frame.slide.style.left);this.frame.style.cursor="move";var me=this;this.onmousemove=function(event){me._onMouseMove(event)};this.onmouseup=function(event){me._onMouseUp(event)};util.addEventListener(document,"mousemove",this.onmousemove);util.addEventListener(document,"mouseup",this.onmouseup);util.preventDefault(event)};Slider.prototype.leftToIndex=function(left){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;var x=left-3;var index=Math.round(x/width*(this.values.length-1));if(index<0)index=0;if(index>this.values.length-1)index=this.values.length-1;return index};Slider.prototype.indexToLeft=function(index){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;var x=index/(this.values.length-1)*width;var left=x+3;return left};Slider.prototype._onMouseMove=function(event){var diff=event.clientX-this.startClientX;var x=this.startSlideX+diff;var index=this.leftToIndex(x);this.setIndex(index);util.preventDefault()};Slider.prototype._onMouseUp=function(event){this.frame.style.cursor="auto";util.removeEventListener(document,"mousemove",this.onmousemove);util.removeEventListener(document,"mouseup",this.onmouseup);util.preventDefault()};module.exports=Slider},function(module,exports,__webpack_require__){function StepNumber(start,end,step,prettyStep){this._start=0;this._end=0;this._step=1;this.prettyStep=true;this.precision=5;this._current=0;this.setRange(start,end,step,prettyStep)}StepNumber.prototype.setRange=function(start,end,step,prettyStep){this._start=start?start:0;this._end=end?end:0;this.setStep(step,prettyStep)};StepNumber.prototype.setStep=function(step,prettyStep){if(step===undefined||step<=0)return;if(prettyStep!==undefined)this.prettyStep=prettyStep;if(this.prettyStep===true)this._step=StepNumber.calculatePrettyStep(step);else this._step=step};StepNumber.calculatePrettyStep=function(step){var log10=function(x){return Math.log(x)/Math.LN10};var step1=Math.pow(10,Math.round(log10(step))),step2=2*Math.pow(10,Math.round(log10(step/2))),step5=5*Math.pow(10,Math.round(log10(step/5)));var prettyStep=step1;if(Math.abs(step2-step)<=Math.abs(prettyStep-step))prettyStep=step2;if(Math.abs(step5-step)<=Math.abs(prettyStep-step))prettyStep=step5;if(prettyStep<=0){prettyStep=1}return prettyStep};StepNumber.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))};StepNumber.prototype.getStep=function(){return this._step};StepNumber.prototype.start=function(){this._current=this._start-this._start%this._step};StepNumber.prototype.next=function(){this._current+=this._step};StepNumber.prototype.end=function(){return this._current>this._end};module.exports=StepNumber},function(module,exports,__webpack_require__){var Emitter=__webpack_require__(11);var Hammer=__webpack_require__(19);var util=__webpack_require__(1);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var Range=__webpack_require__(21);var Core=__webpack_require__(25);var TimeAxis=__webpack_require__(37);var CurrentTime=__webpack_require__(39);var CustomTime=__webpack_require__(41);var ItemSet=__webpack_require__(26);function Timeline(container,items,groups,options){if(!(this instanceof Timeline)){throw new SyntaxError("Constructor must be called with the new operator")}if(!(Array.isArray(groups)||groups instanceof DataSet)&&groups instanceof Object){var forthArgument=options;options=groups;groups=forthArgument}var me=this;this.defaultOptions={start:null,end:null,autoResize:true,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null};this.options=util.deepExtend({},this.defaultOptions);this._create(container);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{snap:null,toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}};this.range=new Range(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new TimeAxis(this.body);this.components.push(this.timeAxis);this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis);this.currentTime=new CurrentTime(this.body);this.components.push(this.currentTime);this.customTime=new CustomTime(this.body);this.components.push(this.customTime);this.itemSet=new ItemSet(this.body);this.components.push(this.itemSet);this.itemsData=null;this.groupsData=null;if(options){this.setOptions(options)}if(groups){this.setGroups(groups)}if(items){this.setItems(items)}else{this.redraw()}}Timeline.prototype=new Core;Timeline.prototype.setItems=function(items){var initialLoad=this.itemsData==null;var newDataSet;if(!items){newDataSet=null}else if(items instanceof DataSet||items instanceof DataView){newDataSet=items}else{newDataSet=new DataSet(items,{type:{start:"Date",end:"Date"}})}this.itemsData=newDataSet;this.itemSet&&this.itemSet.setItems(newDataSet);if(initialLoad){if(this.options.start!=undefined||this.options.end!=undefined){if(this.options.start==undefined||this.options.end==undefined){var dataRange=this._getDataRange()}var start=this.options.start!=undefined?this.options.start:dataRange.start;var end=this.options.end!=undefined?this.options.end:dataRange.end;this.setWindow(start,end,{animate:false})}else{this.fit({animate:false})}}};Timeline.prototype.setGroups=function(groups){var newDataSet;if(!groups){newDataSet=null}else if(groups instanceof DataSet||groups instanceof DataView){newDataSet=groups}else{newDataSet=new DataSet(groups)}this.groupsData=newDataSet;this.itemSet.setGroups(newDataSet)};Timeline.prototype.setSelection=function(ids,options){this.itemSet&&this.itemSet.setSelection(ids);if(options&&options.focus){this.focus(ids,options)}};Timeline.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]};Timeline.prototype.focus=function(id,options){if(!this.itemsData||id==undefined)return;var ids=Array.isArray(id)?id:[id];var itemsData=this.itemsData.getDataSet().get(ids,{type:{start:"Date",end:"Date"}});var start=null;var end=null;itemsData.forEach(function(itemData){var s=itemData.start.valueOf();var e="end"in itemData?itemData.end.valueOf():itemData.start.valueOf();if(start===null||s<start){start=s}if(end===null||e>end){end=e}});if(start!==null&&end!==null){var middle=(start+end)/2;var interval=Math.max(this.range.end-this.range.start,(end-start)*1.1);var animate=options&&options.animate!==undefined?options.animate:true;this.range.setRange(middle-interval/2,middle+interval/2,animate)}};Timeline.prototype.getItemRange=function(){var dataset=this.itemsData.getDataSet(),min=null,max=null;if(dataset){var minItem=dataset.min("start");min=minItem?util.convert(minItem.start,"Date").valueOf():null;var maxStartItem=dataset.max("start");if(maxStartItem){max=util.convert(maxStartItem.start,"Date").valueOf()}var maxEndItem=dataset.max("end");if(maxEndItem){if(max==null){max=util.convert(maxEndItem.end,"Date").valueOf()}else{max=Math.max(max,util.convert(maxEndItem.end,"Date").valueOf())}}}return{min:min!=null?new Date(min):null,max:max!=null?new Date(max):null}};module.exports=Timeline},function(module,exports,__webpack_require__){if(typeof window!=="undefined"){module.exports=window["Hammer"]||__webpack_require__(20)}else{module.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(window,undefined){"use strict";var Hammer=function Hammer(element,options){return new Hammer.Instance(element,options||{})};Hammer.VERSION="1.1.3";Hammer.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};Hammer.DOCUMENT=document;Hammer.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;Hammer.HAS_TOUCHEVENTS="ontouchstart"in window;Hammer.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);Hammer.NO_MOUSEEVENTS=Hammer.HAS_TOUCHEVENTS&&Hammer.IS_MOBILE||Hammer.HAS_POINTEREVENTS;Hammer.CALCULATE_INTERVAL=25;var EVENT_TYPES={};var DIRECTION_DOWN=Hammer.DIRECTION_DOWN="down";var DIRECTION_LEFT=Hammer.DIRECTION_LEFT="left";var DIRECTION_UP=Hammer.DIRECTION_UP="up";var DIRECTION_RIGHT=Hammer.DIRECTION_RIGHT="right";var POINTER_MOUSE=Hammer.POINTER_MOUSE="mouse";var POINTER_TOUCH=Hammer.POINTER_TOUCH="touch";var POINTER_PEN=Hammer.POINTER_PEN="pen";var EVENT_START=Hammer.EVENT_START="start";var EVENT_MOVE=Hammer.EVENT_MOVE="move";var EVENT_END=Hammer.EVENT_END="end";var EVENT_RELEASE=Hammer.EVENT_RELEASE="release";var EVENT_TOUCH=Hammer.EVENT_TOUCH="touch";Hammer.READY=false;Hammer.plugins=Hammer.plugins||{};Hammer.gestures=Hammer.gestures||{};function setup(){if(Hammer.READY){return}Event.determineEventTypes();Utils.each(Hammer.gestures,function(gesture){Detection.register(gesture)});Event.onTouch(Hammer.DOCUMENT,EVENT_MOVE,Detection.detect);Event.onTouch(Hammer.DOCUMENT,EVENT_END,Detection.detect);Hammer.READY=true}var Utils=Hammer.utils={extend:function extend(dest,src,merge){for(var key in src){if(!src.hasOwnProperty(key)||dest[key]!==undefined&&merge){continue}dest[key]=src[key]}return dest},on:function on(element,type,handler){element.addEventListener(type,handler,false)},off:function off(element,type,handler){element.removeEventListener(type,handler,false)},each:function each(obj,iterator,context){var i,len;if("forEach"in obj){obj.forEach(iterator,context)}else if(obj.length!==undefined){for(i=0,len=obj.length;i<len;i++){if(iterator.call(context,obj[i],i,obj)===false){return}}}else{for(i in obj){if(obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)===false){return}}}},inStr:function inStr(src,find){return src.indexOf(find)>-1},inArray:function inArray(src,find){if(src.indexOf){var index=src.indexOf(find);return index===-1?false:index}else{for(var i=0,len=src.length;i<len;i++){if(src[i]===find){return i}}return false}},toArray:function toArray(obj){return Array.prototype.slice.call(obj,0)},hasParent:function hasParent(node,parent){while(node){if(node==parent){return true}node=node.parentNode}return false},getCenter:function getCenter(touches){var pageX=[],pageY=[],clientX=[],clientY=[],min=Math.min,max=Math.max;if(touches.length===1){return{pageX:touches[0].pageX,pageY:touches[0].pageY,clientX:touches[0].clientX,clientY:touches[0].clientY}}Utils.each(touches,function(touch){pageX.push(touch.pageX);pageY.push(touch.pageY);clientX.push(touch.clientX);clientY.push(touch.clientY)});return{pageX:(min.apply(Math,pageX)+max.apply(Math,pageX))/2,pageY:(min.apply(Math,pageY)+max.apply(Math,pageY))/2,clientX:(min.apply(Math,clientX)+max.apply(Math,clientX))/2,clientY:(min.apply(Math,clientY)+max.apply(Math,clientY))/2}},getVelocity:function getVelocity(deltaTime,deltaX,deltaY){return{x:Math.abs(deltaX/deltaTime)||0,y:Math.abs(deltaY/deltaTime)||0}},getAngle:function getAngle(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.atan2(y,x)*180/Math.PI},getDirection:function getDirection(touch1,touch2){var x=Math.abs(touch1.clientX-touch2.clientX),y=Math.abs(touch1.clientY-touch2.clientY);if(x>=y){return touch1.clientX-touch2.clientX>0?DIRECTION_LEFT:DIRECTION_RIGHT}return touch1.clientY-touch2.clientY>0?DIRECTION_UP:DIRECTION_DOWN},getDistance:function getDistance(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.sqrt(x*x+y*y)},getScale:function getScale(start,end){if(start.length>=2&&end.length>=2){return this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1])}return 1},getRotation:function getRotation(start,end){if(start.length>=2&&end.length>=2){return this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0])}return 0},isVertical:function isVertical(direction){return direction==DIRECTION_UP||direction==DIRECTION_DOWN},setPrefixedCss:function setPrefixedCss(element,prop,value,toggle){var prefixes=["","Webkit","Moz","O","ms"];prop=Utils.toCamelCase(prop);for(var i=0;i<prefixes.length;i++){var p=prop;if(prefixes[i]){p=prefixes[i]+p.slice(0,1).toUpperCase()+p.slice(1)}if(p in element.style){element.style[p]=(toggle==null||toggle)&&value||"";break}}},toggleBehavior:function toggleBehavior(element,props,toggle){if(!props||!element||!element.style){return}Utils.each(props,function(value,prop){Utils.setPrefixedCss(element,prop,value,toggle)});var falseFn=toggle&&function(){return false};if(props.userSelect=="none"){element.onselectstart=falseFn}if(props.userDrag=="none"){element.ondragstart=falseFn}},toCamelCase:function toCamelCase(str){return str.replace(/[_-]([a-z])/g,function(s){return s[1].toUpperCase()})}};var Event=Hammer.event={preventMouseEvents:false,started:false,shouldDetect:false,on:function on(element,type,handler,hook){var types=type.split(" ");Utils.each(types,function(type){Utils.on(element,type,handler);hook&&hook(type)})},off:function off(element,type,handler,hook){var types=type.split(" ");Utils.each(types,function(type){Utils.off(element,type,handler);hook&&hook(type)})},onTouch:function onTouch(element,eventType,handler){var self=this;var onTouchHandler=function onTouchHandler(ev){var srcType=ev.type.toLowerCase(),isPointer=Hammer.HAS_POINTEREVENTS,isMouse=Utils.inStr(srcType,"mouse"),triggerType;if(isMouse&&self.preventMouseEvents){return}else if(isMouse&&eventType==EVENT_START&&ev.button===0){self.preventMouseEvents=false;self.shouldDetect=true}else if(isPointer&&eventType==EVENT_START){self.shouldDetect=ev.buttons===1||PointerEvent.matchType(POINTER_TOUCH,ev)}else if(!isMouse&&eventType==EVENT_START){self.preventMouseEvents=true;self.shouldDetect=true}if(isPointer&&eventType!=EVENT_END){PointerEvent.updatePointer(eventType,ev)}if(self.shouldDetect){triggerType=self.doDetect.call(self,ev,eventType,element,handler)}if(triggerType==EVENT_END){self.preventMouseEvents=false;self.shouldDetect=false;PointerEvent.reset()}if(isPointer&&eventType==EVENT_END){PointerEvent.updatePointer(eventType,ev)}};this.on(element,EVENT_TYPES[eventType],onTouchHandler);return onTouchHandler},doDetect:function doDetect(ev,eventType,element,handler){var touchList=this.getTouchList(ev,eventType);var touchListLength=touchList.length;var triggerType=eventType;var triggerChange=touchList.trigger;var changedLength=touchListLength;if(eventType==EVENT_START){triggerChange=EVENT_TOUCH}else if(eventType==EVENT_END){triggerChange=EVENT_RELEASE;changedLength=touchList.length-(ev.changedTouches?ev.changedTouches.length:1)}if(changedLength>0&&this.started){triggerType=EVENT_MOVE}this.started=true;var evData=this.collectEventData(element,triggerType,touchList,ev);if(eventType!=EVENT_END){handler.call(Detection,evData)}if(triggerChange){evData.changedLength=changedLength;evData.eventType=triggerChange;handler.call(Detection,evData);evData.eventType=triggerType;delete evData.changedLength}if(triggerType==EVENT_END){handler.call(Detection,evData);this.started=false}return triggerType},determineEventTypes:function determineEventTypes(){var types;
if(Hammer.HAS_POINTEREVENTS){if(window.PointerEvent){types=["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]}else{types=["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]}}else if(Hammer.NO_MOUSEEVENTS){types=["touchstart","touchmove","touchend touchcancel"]}else{types=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"]}EVENT_TYPES[EVENT_START]=types[0];EVENT_TYPES[EVENT_MOVE]=types[1];EVENT_TYPES[EVENT_END]=types[2];return EVENT_TYPES},getTouchList:function getTouchList(ev,eventType){if(Hammer.HAS_POINTEREVENTS){return PointerEvent.getTouchList()}if(ev.touches){if(eventType==EVENT_MOVE){return ev.touches}var identifiers=[];var concat=[].concat(Utils.toArray(ev.touches),Utils.toArray(ev.changedTouches));var touchList=[];Utils.each(concat,function(touch){if(Utils.inArray(identifiers,touch.identifier)===false){touchList.push(touch)}identifiers.push(touch.identifier)});return touchList}ev.identifier=1;return[ev]},collectEventData:function collectEventData(element,eventType,touches,ev){var pointerType=POINTER_TOUCH;if(Utils.inStr(ev.type,"mouse")||PointerEvent.matchType(POINTER_MOUSE,ev)){pointerType=POINTER_MOUSE}else if(PointerEvent.matchType(POINTER_PEN,ev)){pointerType=POINTER_PEN}return{center:Utils.getCenter(touches),timeStamp:Date.now(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){var srcEvent=this.srcEvent;srcEvent.preventManipulation&&srcEvent.preventManipulation();srcEvent.preventDefault&&srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return Detection.stopDetect()}}}};var PointerEvent=Hammer.PointerEvent={pointers:{},getTouchList:function getTouchList(){var touchlist=[];Utils.each(this.pointers,function(pointer){touchlist.push(pointer)});return touchlist},updatePointer:function updatePointer(eventType,pointerEvent){if(eventType==EVENT_END||eventType!=EVENT_END&&pointerEvent.buttons!==1){delete this.pointers[pointerEvent.pointerId]}else{pointerEvent.identifier=pointerEvent.pointerId;this.pointers[pointerEvent.pointerId]=pointerEvent}},matchType:function matchType(pointerType,ev){if(!ev.pointerType){return false}var pt=ev.pointerType,types={};types[POINTER_MOUSE]=pt===(ev.MSPOINTER_TYPE_MOUSE||POINTER_MOUSE);types[POINTER_TOUCH]=pt===(ev.MSPOINTER_TYPE_TOUCH||POINTER_TOUCH);types[POINTER_PEN]=pt===(ev.MSPOINTER_TYPE_PEN||POINTER_PEN);return types[pointerType]},reset:function resetList(){this.pointers={}}};var Detection=Hammer.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function startDetect(inst,eventData){if(this.current){return}this.stopped=false;this.current={inst:inst,startEvent:Utils.extend({},eventData),lastEvent:false,lastCalcEvent:false,futureCalcEvent:false,lastCalcData:{},name:""};this.detect(eventData)},detect:function detect(eventData){if(!this.current||this.stopped){return}eventData=this.extendEventData(eventData);var inst=this.current.inst,instOptions=inst.options;Utils.each(this.gestures,function triggerGesture(gesture){if(!this.stopped&&inst.enabled&&instOptions[gesture.name]){gesture.handler.call(gesture,eventData,inst)}},this);if(this.current){this.current.lastEvent=eventData}if(eventData.eventType==EVENT_END){this.stopDetect()}return eventData},stopDetect:function stopDetect(){this.previous=Utils.extend({},this.current);this.current=null;this.stopped=true},getCalculatedData:function getCalculatedData(ev,center,deltaTime,deltaX,deltaY){var cur=this.current,recalc=false,calcEv=cur.lastCalcEvent,calcData=cur.lastCalcData;if(calcEv&&ev.timeStamp-calcEv.timeStamp>Hammer.CALCULATE_INTERVAL){center=calcEv.center;deltaTime=ev.timeStamp-calcEv.timeStamp;deltaX=ev.center.clientX-calcEv.center.clientX;deltaY=ev.center.clientY-calcEv.center.clientY;recalc=true}if(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE){cur.futureCalcEvent=ev}if(!cur.lastCalcEvent||recalc){calcData.velocity=Utils.getVelocity(deltaTime,deltaX,deltaY);calcData.angle=Utils.getAngle(center,ev.center);calcData.direction=Utils.getDirection(center,ev.center);cur.lastCalcEvent=cur.futureCalcEvent||ev;cur.futureCalcEvent=ev}ev.velocityX=calcData.velocity.x;ev.velocityY=calcData.velocity.y;ev.interimAngle=calcData.angle;ev.interimDirection=calcData.direction},extendEventData:function extendEventData(ev){var cur=this.current,startEv=cur.startEvent,lastEv=cur.lastEvent||startEv;if(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE){startEv.touches=[];Utils.each(ev.touches,function(touch){startEv.touches.push({clientX:touch.clientX,clientY:touch.clientY})})}var deltaTime=ev.timeStamp-startEv.timeStamp,deltaX=ev.center.clientX-startEv.center.clientX,deltaY=ev.center.clientY-startEv.center.clientY;this.getCalculatedData(ev,lastEv.center,deltaTime,deltaX,deltaY);Utils.extend(ev,{startEvent:startEv,deltaTime:deltaTime,deltaX:deltaX,deltaY:deltaY,distance:Utils.getDistance(startEv.center,ev.center),angle:Utils.getAngle(startEv.center,ev.center),direction:Utils.getDirection(startEv.center,ev.center),scale:Utils.getScale(startEv.touches,ev.touches),rotation:Utils.getRotation(startEv.touches,ev.touches)});return ev},register:function register(gesture){var options=gesture.defaults||{};if(options[gesture.name]===undefined){options[gesture.name]=true}Utils.extend(Hammer.defaults,options,true);gesture.index=gesture.index||1e3;this.gestures.push(gesture);this.gestures.sort(function(a,b){if(a.index<b.index){return-1}if(a.index>b.index){return 1}return 0});return this.gestures}};Hammer.Instance=function(element,options){var self=this;setup();this.element=element;this.enabled=true;Utils.each(options,function(value,name){delete options[name];options[Utils.toCamelCase(name)]=value});this.options=Utils.extend(Utils.extend({},Hammer.defaults),options||{});if(this.options.behavior){Utils.toggleBehavior(this.element,this.options.behavior,true)}this.eventStartHandler=Event.onTouch(element,EVENT_START,function(ev){if(self.enabled&&ev.eventType==EVENT_START){Detection.startDetect(self,ev)}else if(ev.eventType==EVENT_TOUCH){Detection.detect(ev)}});this.eventHandlers=[]};Hammer.Instance.prototype={on:function onEvent(gestures,handler){var self=this;Event.on(self.element,gestures,handler,function(type){self.eventHandlers.push({gesture:type,handler:handler})});return self},off:function offEvent(gestures,handler){var self=this;Event.off(self.element,gestures,handler,function(type){var index=Utils.inArray({gesture:type,handler:handler});if(index!==false){self.eventHandlers.splice(index,1)}});return self},trigger:function triggerEvent(gesture,eventData){if(!eventData){eventData={}}var event=Hammer.DOCUMENT.createEvent("Event");event.initEvent(gesture,true,true);event.gesture=eventData;var element=this.element;if(Utils.hasParent(eventData.target,element)){element=eventData.target}element.dispatchEvent(event);return this},enable:function enable(state){this.enabled=state;return this},dispose:function dispose(){var i,eh;Utils.toggleBehavior(this.element,this.options.behavior,false);for(i=-1;eh=this.eventHandlers[++i];){Utils.off(this.element,eh.gesture,eh.handler)}this.eventHandlers=[];Event.off(this.element,EVENT_TYPES[EVENT_START],this.eventStartHandler);return null}};(function(name){var triggered=false;function dragGesture(ev,inst){var cur=Detection.current;if(inst.options.dragMaxTouches>0&&ev.touches.length>inst.options.dragMaxTouches){return}switch(ev.eventType){case EVENT_START:triggered=false;break;case EVENT_MOVE:if(ev.distance<inst.options.dragMinDistance&&cur.name!=name){return}var startCenter=cur.startEvent.center;if(cur.name!=name){cur.name=name;if(inst.options.dragDistanceCorrection&&ev.distance>0){var factor=Math.abs(inst.options.dragMinDistance/ev.distance);startCenter.pageX+=ev.deltaX*factor;startCenter.pageY+=ev.deltaY*factor;startCenter.clientX+=ev.deltaX*factor;startCenter.clientY+=ev.deltaY*factor;ev=Detection.extendEventData(ev)}}if(cur.lastEvent.dragLockToAxis||inst.options.dragLockToAxis&&inst.options.dragLockMinDistance<=ev.distance){ev.dragLockToAxis=true}var lastDirection=cur.lastEvent.direction;if(ev.dragLockToAxis&&lastDirection!==ev.direction){if(Utils.isVertical(lastDirection)){ev.direction=ev.deltaY<0?DIRECTION_UP:DIRECTION_DOWN}else{ev.direction=ev.deltaX<0?DIRECTION_LEFT:DIRECTION_RIGHT}}if(!triggered){inst.trigger(name+"start",ev);triggered=true}inst.trigger(name,ev);inst.trigger(name+ev.direction,ev);var isVertical=Utils.isVertical(ev.direction);if(inst.options.dragBlockVertical&&isVertical||inst.options.dragBlockHorizontal&&!isVertical){ev.preventDefault()}break;case EVENT_RELEASE:if(triggered&&ev.changedLength<=inst.options.dragMaxTouches){inst.trigger(name+"end",ev);triggered=false}break;case EVENT_END:triggered=false;break}}Hammer.gestures.Drag={name:name,index:50,handler:dragGesture,defaults:{dragMinDistance:10,dragDistanceCorrection:true,dragMaxTouches:1,dragBlockHorizontal:false,dragBlockVertical:false,dragLockToAxis:false,dragLockMinDistance:25}}})("drag");Hammer.gestures.Gesture={name:"gesture",index:1337,handler:function releaseGesture(ev,inst){inst.trigger(this.name,ev)}};(function(name){var timer;function holdGesture(ev,inst){var options=inst.options,current=Detection.current;switch(ev.eventType){case EVENT_START:clearTimeout(timer);current.name=name;timer=setTimeout(function(){if(current&&current.name==name){inst.trigger(name,ev)}},options.holdTimeout);break;case EVENT_MOVE:if(ev.distance>options.holdThreshold){clearTimeout(timer)}break;case EVENT_RELEASE:clearTimeout(timer);break}}Hammer.gestures.Hold={name:name,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:holdGesture}})("hold");Hammer.gestures.Release={name:"release",index:Infinity,handler:function releaseGesture(ev,inst){if(ev.eventType==EVENT_RELEASE){inst.trigger(this.name,ev)}}};Hammer.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function swipeGesture(ev,inst){if(ev.eventType==EVENT_RELEASE){var touches=ev.touches.length,options=inst.options;if(touches<options.swipeMinTouches||touches>options.swipeMaxTouches){return}if(ev.velocityX>options.swipeVelocityX||ev.velocityY>options.swipeVelocityY){inst.trigger(this.name,ev);inst.trigger(this.name+ev.direction,ev)}}}};(function(name){var hasMoved=false;function tapGesture(ev,inst){var options=inst.options,current=Detection.current,prev=Detection.previous,sincePrev,didDoubleTap;switch(ev.eventType){case EVENT_START:hasMoved=false;break;case EVENT_MOVE:hasMoved=hasMoved||ev.distance>options.tapMaxDistance;break;case EVENT_END:if(!Utils.inStr(ev.srcEvent.type,"cancel")&&ev.deltaTime<options.tapMaxTime&&!hasMoved){sincePrev=prev&&prev.lastEvent&&ev.timeStamp-prev.lastEvent.timeStamp;didDoubleTap=false;if(prev&&prev.name==name&&(sincePrev&&sincePrev<options.doubleTapInterval)&&ev.distance<options.doubleTapDistance){inst.trigger("doubletap",ev);didDoubleTap=true}if(!didDoubleTap||options.tapAlways){current.name=name;inst.trigger(current.name,ev)}}break}}Hammer.gestures.Tap={name:name,index:100,handler:tapGesture,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:true,doubleTapDistance:20,doubleTapInterval:300}}})("tap");Hammer.gestures.Touch={name:"touch",index:-Infinity,defaults:{preventDefault:false,preventMouse:false},handler:function touchGesture(ev,inst){if(inst.options.preventMouse&&ev.pointerType==POINTER_MOUSE){ev.stopDetect();return}if(inst.options.preventDefault){ev.preventDefault()}if(ev.eventType==EVENT_TOUCH){inst.trigger("touch",ev)}}};(function(name){var triggered=false;function transformGesture(ev,inst){switch(ev.eventType){case EVENT_START:triggered=false;break;case EVENT_MOVE:if(ev.touches.length<2){return}var scaleThreshold=Math.abs(1-ev.scale);var rotationThreshold=Math.abs(ev.rotation);if(scaleThreshold<inst.options.transformMinScale&&rotationThreshold<inst.options.transformMinRotation){return}Detection.current.name=name;if(!triggered){inst.trigger(name+"start",ev);triggered=true}inst.trigger(name,ev);if(rotationThreshold>inst.options.transformMinRotation){inst.trigger("rotate",ev)}if(scaleThreshold>inst.options.transformMinScale){inst.trigger("pinch",ev);inst.trigger("pinch"+(ev.scale<1?"in":"out"),ev)}break;case EVENT_RELEASE:if(triggered&&ev.changedLength<2){inst.trigger(name+"end",ev);triggered=false}break}}Hammer.gestures.Transform={name:name,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:transformGesture}})("transform");if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof module!=="undefined"&&module.exports){module.exports=Hammer}else{window.Hammer=Hammer}})(window)},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var hammerUtil=__webpack_require__(22);var moment=__webpack_require__(2);var Component=__webpack_require__(23);var DateUtil=__webpack_require__(24);function Range(body,options){var now=moment().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=now.clone().add(-3,"days").valueOf();this.end=now.clone().add(4,"days").valueOf();this.body=body;this.deltaDifference=0;this.scaleOffset=0;this.startToFront=false;this.endToFront=true;this.defaultOptions={start:null,end:null,direction:"horizontal",moveable:true,zoomable:true,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4};this.options=util.extend({},this.defaultOptions);this.props={touch:{}};this.animateTimer=null;this.body.emitter.on("dragstart",this._onDragStart.bind(this));this.body.emitter.on("drag",this._onDrag.bind(this));this.body.emitter.on("dragend",this._onDragEnd.bind(this));this.body.emitter.on("hold",this._onHold.bind(this));this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this));this.body.emitter.on("DOMMouseScroll",this._onMouseWheel.bind(this));this.body.emitter.on("touch",this._onTouch.bind(this));this.body.emitter.on("pinch",this._onPinch.bind(this));this.setOptions(options)}Range.prototype=new Component;Range.prototype.setOptions=function(options){if(options){var fields=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","activate","hiddenDates"];util.selectiveExtend(fields,this.options,options);if("start"in options||"end"in options){this.setRange(options.start,options.end)}}};function validateDirection(direction){if(direction!="horizontal"&&direction!="vertical"){throw new TypeError('Unknown direction "'+direction+'". '+'Choose "horizontal" or "vertical".')}}Range.prototype.setRange=function(start,end,animate){var _start=start!=undefined?util.convert(start,"Date").valueOf():null;var _end=end!=undefined?util.convert(end,"Date").valueOf():null;this._cancelAnimation();if(animate){var me=this;var initStart=this.start;var initEnd=this.end;var duration=typeof animate==="number"?animate:500;var initTime=(new Date).valueOf();var anyChanged=false;var next=function(){if(!me.props.touch.dragging){var now=(new Date).valueOf();var time=now-initTime;var done=time>duration;var s=done||_start===null?_start:util.easeInOutQuad(time,initStart,_start,duration);var e=done||_end===null?_end:util.easeInOutQuad(time,initEnd,_end,duration);changed=me._applyRange(s,e);DateUtil.updateHiddenDates(me.body,me.options.hiddenDates);anyChanged=anyChanged||changed;if(changed){me.body.emitter.emit("rangechange",{start:new Date(me.start),end:new Date(me.end)})}if(done){if(anyChanged){me.body.emitter.emit("rangechanged",{start:new Date(me.start),end:new Date(me.end)})}}else{me.animateTimer=setTimeout(next,20)}}};return next()}else{var changed=this._applyRange(_start,_end);DateUtil.updateHiddenDates(this.body,this.options.hiddenDates);if(changed){var params={start:new Date(this.start),end:new Date(this.end)};this.body.emitter.emit("rangechange",params);this.body.emitter.emit("rangechanged",params)}}};Range.prototype._cancelAnimation=function(){if(this.animateTimer){clearTimeout(this.animateTimer);this.animateTimer=null}};Range.prototype._applyRange=function(start,end){var newStart=start!=null?util.convert(start,"Date").valueOf():this.start,newEnd=end!=null?util.convert(end,"Date").valueOf():this.end,max=this.options.max!=null?util.convert(this.options.max,"Date").valueOf():null,min=this.options.min!=null?util.convert(this.options.min,"Date").valueOf():null,diff;if(isNaN(newStart)||newStart===null){throw new Error('Invalid start "'+start+'"')}if(isNaN(newEnd)||newEnd===null){throw new Error('Invalid end "'+end+'"')}if(newEnd<newStart){newEnd=newStart}if(min!==null){if(newStart<min){diff=min-newStart;newStart+=diff;newEnd+=diff;if(max!=null){if(newEnd>max){newEnd=max}}}}if(max!==null){if(newEnd>max){diff=newEnd-max;newStart-=diff;newEnd-=diff;if(min!=null){if(newStart<min){newStart=min}}}}if(this.options.zoomMin!==null){var zoomMin=parseFloat(this.options.zoomMin);if(zoomMin<0){zoomMin=0}if(newEnd-newStart<zoomMin){if(this.end-this.start===zoomMin){newStart=this.start;newEnd=this.end}else{diff=zoomMin-(newEnd-newStart);newStart-=diff/2;newEnd+=diff/2}}}if(this.options.zoomMax!==null){var zoomMax=parseFloat(this.options.zoomMax);if(zoomMax<0){zoomMax=0}if(newEnd-newStart>zoomMax){if(this.end-this.start===zoomMax){newStart=this.start;newEnd=this.end}else{diff=newEnd-newStart-zoomMax;newStart+=diff/2;newEnd-=diff/2}}}var changed=this.start!=newStart||this.end!=newEnd;if(!(newStart>=this.start&&newStart<=this.end||newEnd>=this.start&&newEnd<=this.end)&&!(this.start>=newStart&&this.start<=newEnd||this.end>=newStart&&this.end<=newEnd)){this.body.emitter.emit("checkRangedItems")}this.start=newStart;this.end=newEnd;return changed};Range.prototype.getRange=function(){return{start:this.start,end:this.end}};Range.prototype.conversion=function(width,totalHidden){return Range.conversion(this.start,this.end,width,totalHidden)};Range.conversion=function(start,end,width,totalHidden){if(totalHidden===undefined){totalHidden=0}if(width!=0&&end-start!=0){return{offset:start,scale:width/(end-start-totalHidden)}}else{return{offset:0,scale:1}}};Range.prototype._onDragStart=function(event){this.deltaDifference=0;this.previousDelta=0;if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.dragging=true;if(this.body.dom.root){this.body.dom.root.style.cursor="move"}};Range.prototype._onDrag=function(event){if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;var direction=this.options.direction;validateDirection(direction);var delta=direction=="horizontal"?event.gesture.deltaX:event.gesture.deltaY;delta-=this.deltaDifference;var interval=this.props.touch.end-this.props.touch.start;var duration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);interval-=duration;var width=direction=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;var diffRange=-delta/width*interval;var newStart=this.props.touch.start+diffRange;var newEnd=this.props.touch.end+diffRange;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,this.previousDelta-delta,true);var safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,this.previousDelta-delta,true);if(safeStart!=newStart||safeEnd!=newEnd){this.deltaDifference+=delta;this.props.touch.start=safeStart;this.props.touch.end=safeEnd;this._onDrag(event);return}this.previousDelta=delta;this._applyRange(newStart,newEnd);this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end)})};Range.prototype._onDragEnd=function(event){if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.dragging=false;if(this.body.dom.root){this.body.dom.root.style.cursor="auto"}this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end)})};Range.prototype._onMouseWheel=function(event){if(!(this.options.zoomable&&this.options.moveable))return;var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120}else if(event.detail){delta=-event.detail/3}if(delta){var scale;if(delta<0){scale=1-delta/5}else{scale=1/(1+delta/5)}var gesture=hammerUtil.fakeGesture(this,event),pointer=getPointer(gesture.center,this.body.dom.center),pointerDate=this._pointerToDate(pointer);this.zoom(scale,pointerDate,delta)}event.preventDefault()};Range.prototype._onTouch=function(event){this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.allowDragging=true;this.props.touch.center=null;this.scaleOffset=0;this.deltaDifference=0};Range.prototype._onHold=function(){this.props.touch.allowDragging=false};Range.prototype._onPinch=function(event){if(!(this.options.zoomable&&this.options.moveable))return;this.props.touch.allowDragging=false;if(event.gesture.touches.length>1){if(!this.props.touch.center){this.props.touch.center=getPointer(event.gesture.center,this.body.dom.center)}var scale=1/(event.gesture.scale+this.scaleOffset);var centerDate=this._pointerToDate(this.props.touch.center);var hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this,centerDate);var hiddenDurationAfter=hiddenDuration-hiddenDurationBefore;var newStart=centerDate-hiddenDurationBefore+(this.props.touch.start-(centerDate-hiddenDurationBefore))*scale;var newEnd=centerDate+hiddenDurationAfter+(this.props.touch.end-(centerDate+hiddenDurationAfter))*scale;this.startToFront=1-scale>0?false:true;this.endToFront=scale-1>0?false:true;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,1-scale,true);var safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,scale-1,true);if(safeStart!=newStart||safeEnd!=newEnd){this.props.touch.start=safeStart;this.props.touch.end=safeEnd;this.scaleOffset=1-event.gesture.scale;newStart=safeStart;newEnd=safeEnd}this.setRange(newStart,newEnd);this.startToFront=false;this.endToFront=true}};Range.prototype._pointerToDate=function(pointer){var conversion;var direction=this.options.direction;validateDirection(direction);if(direction=="horizontal"){return this.body.util.toTime(pointer.x).valueOf()}else{var height=this.body.domProps.center.height;conversion=this.conversion(height);return pointer.y/conversion.scale+conversion.offset}};function getPointer(touch,element){return{x:touch.pageX-util.getAbsoluteLeft(element),y:touch.pageY-util.getAbsoluteTop(element)}}Range.prototype.zoom=function(scale,center,delta){if(center==null){center=(this.start+this.end)/2}var hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this,center);var hiddenDurationAfter=hiddenDuration-hiddenDurationBefore;var newStart=center-hiddenDurationBefore+(this.start-(center-hiddenDurationBefore))*scale;var newEnd=center+hiddenDurationAfter+(this.end-(center+hiddenDurationAfter))*scale;this.startToFront=delta>0?false:true;this.endToFront=-delta>0?false:true;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,delta,true);var safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,-delta,true);if(safeStart!=newStart||safeEnd!=newEnd){newStart=safeStart;newEnd=safeEnd}this.setRange(newStart,newEnd);this.startToFront=false;this.endToFront=true};Range.prototype.move=function(delta){var diff=this.end-this.start;var newStart=this.start+diff*delta;var newEnd=this.end+diff*delta;this.start=newStart;this.end=newEnd};Range.prototype.moveTo=function(moveTo){var center=(this.start+this.end)/2;var diff=center-moveTo;var newStart=this.start-diff;var newEnd=this.end-diff;this.setRange(newStart,newEnd)};module.exports=Range},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(19);exports.fakeGesture=function(element,event){var eventType=null;var touches=Hammer.event.getTouchList(event,eventType);var gesture=Hammer.event.collectEventData(this,eventType,touches,event);if(isNaN(gesture.center.pageX)){gesture.center.pageX=event.pageX}if(isNaN(gesture.center.pageY)){gesture.center.pageY=event.pageY}return gesture}},function(module,exports,__webpack_require__){function Component(body,options){this.options=null;this.props=null}Component.prototype.setOptions=function(options){if(options){util.extend(this.options,options)}};Component.prototype.redraw=function(){return false};Component.prototype.destroy=function(){};Component.prototype._isResized=function(){var resized=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;this.props._previousWidth=this.props.width;this.props._previousHeight=this.props.height;return resized};module.exports=Component},function(module,exports,__webpack_require__){var moment=__webpack_require__(2);exports.convertHiddenOptions=function(body,hiddenDates){body.hiddenDates=[];if(hiddenDates){if(Array.isArray(hiddenDates)==true){for(var i=0;i<hiddenDates.length;i++){if(hiddenDates[i].repeat===undefined){var dateItem={};dateItem.start=moment(hiddenDates[i].start).toDate().valueOf();dateItem.end=moment(hiddenDates[i].end).toDate().valueOf();body.hiddenDates.push(dateItem)}}body.hiddenDates.sort(function(a,b){return a.start-b.start})}}};exports.updateHiddenDates=function(body,hiddenDates){if(hiddenDates&&body.domProps.centerContainer.width!==undefined){exports.convertHiddenOptions(body,hiddenDates);var start=moment(body.range.start);var end=moment(body.range.end);var totalRange=body.range.end-body.range.start;var pixelTime=totalRange/body.domProps.centerContainer.width;for(var i=0;i<hiddenDates.length;i++){if(hiddenDates[i].repeat!==undefined){var startDate=moment(hiddenDates[i].start);var endDate=moment(hiddenDates[i].end);if(startDate._d=="Invalid Date"){throw new Error("Supplied start date is not valid: "+hiddenDates[i].start)}if(endDate._d=="Invalid Date"){throw new Error("Supplied end date is not valid: "+hiddenDates[i].end)}var duration=endDate-startDate;if(duration>=4*pixelTime){var offset=0;var runUntil=end.clone();switch(hiddenDates[i].repeat){case"daily":if(startDate.day()!=endDate.day()){offset=1}startDate.dayOfYear(start.dayOfYear());startDate.year(start.year());startDate.subtract(7,"days");endDate.dayOfYear(start.dayOfYear());endDate.year(start.year());endDate.subtract(7-offset,"days");runUntil.add(1,"weeks");break;case"weekly":var dayOffset=endDate.diff(startDate,"days");var day=startDate.day();startDate.date(start.date());startDate.month(start.month());startDate.year(start.year());endDate=startDate.clone();startDate.day(day);endDate.day(day);endDate.add(dayOffset,"days");startDate.subtract(1,"weeks");endDate.subtract(1,"weeks");runUntil.add(1,"weeks");break;case"monthly":if(startDate.month()!=endDate.month()){offset=1}startDate.month(start.month());startDate.year(start.year());startDate.subtract(1,"months");endDate.month(start.month());endDate.year(start.year());endDate.subtract(1,"months");endDate.add(offset,"months");runUntil.add(1,"months");break;case"yearly":if(startDate.year()!=endDate.year()){offset=1}startDate.year(start.year());startDate.subtract(1,"years");endDate.year(start.year());endDate.subtract(1,"years");endDate.add(offset,"years");runUntil.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat);return}while(startDate<runUntil){body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()});switch(hiddenDates[i].repeat){case"daily":startDate.add(1,"days");endDate.add(1,"days");break;case"weekly":startDate.add(1,"weeks");endDate.add(1,"weeks");break;case"monthly":startDate.add(1,"months");endDate.add(1,"months");break;case"yearly":startDate.add(1,"y");endDate.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat);return}}body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()})}}}exports.removeDuplicates(body);var startHidden=exports.isHidden(body.range.start,body.hiddenDates);var endHidden=exports.isHidden(body.range.end,body.hiddenDates);var rangeStart=body.range.start;var rangeEnd=body.range.end;if(startHidden.hidden==true){rangeStart=body.range.startToFront==true?startHidden.startDate-1:startHidden.endDate+1}if(endHidden.hidden==true){rangeEnd=body.range.endToFront==true?endHidden.startDate-1:endHidden.endDate+1}if(startHidden.hidden==true||endHidden.hidden==true){body.range._applyRange(rangeStart,rangeEnd)}}};exports.removeDuplicates=function(body){var hiddenDates=body.hiddenDates;var safeDates=[];for(var i=0;i<hiddenDates.length;i++){for(var j=0;j<hiddenDates.length;j++){if(i!=j&&hiddenDates[j].remove!=true&&hiddenDates[i].remove!=true){if(hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end){hiddenDates[j].remove=true}else if(hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].start<=hiddenDates[i].end){hiddenDates[i].end=hiddenDates[j].end;hiddenDates[j].remove=true}else if(hiddenDates[j].end>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end){hiddenDates[i].start=hiddenDates[j].start;hiddenDates[j].remove=true}}}}for(var i=0;i<hiddenDates.length;i++){if(hiddenDates[i].remove!==true){safeDates.push(hiddenDates[i])}}body.hiddenDates=safeDates;body.hiddenDates.sort(function(a,b){return a.start-b.start})};exports.printDates=function(dates){for(var i=0;i<dates.length;i++){console.log(i,new Date(dates[i].start),new Date(dates[i].end),dates[i].start,dates[i].end,dates[i].remove)}};exports.stepOverHiddenDates=function(timeStep,previousTime){var stepInHidden=false;var currentValue=timeStep.current.valueOf();for(var i=0;i<timeStep.hiddenDates.length;i++){var startDate=timeStep.hiddenDates[i].start;var endDate=timeStep.hiddenDates[i].end;if(currentValue>=startDate&&currentValue<endDate){stepInHidden=true;break}}if(stepInHidden==true&&currentValue<timeStep._end.valueOf()&&currentValue!=previousTime){var prevValue=moment(previousTime);var newValue=moment(endDate);if(prevValue.year()!=newValue.year()){timeStep.switchedYear=true}else if(prevValue.month()!=newValue.month()){timeStep.switchedMonth=true}else if(prevValue.dayOfYear()!=newValue.dayOfYear()){timeStep.switchedDay=true}timeStep.current=newValue.toDate()}};exports.toScreen=function(Core,time,width){if(Core.body.hiddenDates.length==0){var conversion=Core.range.conversion(width);return(time.valueOf()-conversion.offset)*conversion.scale}else{var hidden=exports.isHidden(time,Core.body.hiddenDates);if(hidden.hidden==true){time=hidden.startDate}var duration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end);time=exports.correctTimeForHidden(Core.body.hiddenDates,Core.range,time);var conversion=Core.range.conversion(width,duration);return(time.valueOf()-conversion.offset)*conversion.scale}};exports.toTime=function(Core,x,width){if(Core.body.hiddenDates.length==0){var conversion=Core.range.conversion(width);return new Date(x/conversion.scale+conversion.offset)}else{var hiddenDuration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end);var totalDuration=Core.range.end-Core.range.start-hiddenDuration;var partialDuration=totalDuration*x/width;var accumulatedHiddenDuration=exports.getAccumulatedHiddenDuration(Core.body.hiddenDates,Core.range,partialDuration);var newTime=new Date(accumulatedHiddenDuration+partialDuration+Core.range.start);return newTime}};exports.getHiddenDurationBetween=function(hiddenDates,start,end){var duration=0;for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(startDate>=start&&endDate<end){duration+=endDate-startDate}}return duration};exports.correctTimeForHidden=function(hiddenDates,range,time){time=moment(time).toDate().valueOf();time-=exports.getHiddenDurationBefore(hiddenDates,range,time);return time};exports.getHiddenDurationBefore=function(hiddenDates,range,time){var timeOffset=0;
time=moment(time).toDate().valueOf();for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(startDate>=range.start&&endDate<range.end){if(time>=endDate){timeOffset+=endDate-startDate}}}return timeOffset};exports.getAccumulatedHiddenDuration=function(hiddenDates,range,requiredDuration){var hiddenDuration=0;var duration=0;var previousPoint=range.start;for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(startDate>=range.start&&endDate<range.end){duration+=startDate-previousPoint;previousPoint=endDate;if(duration>=requiredDuration){break}else{hiddenDuration+=endDate-startDate}}}return hiddenDuration};exports.snapAwayFromHidden=function(hiddenDates,time,direction,correctionEnabled){var isHidden=exports.isHidden(time,hiddenDates);if(isHidden.hidden==true){if(direction<0){if(correctionEnabled==true){return isHidden.startDate-(isHidden.endDate-time)-1}else{return isHidden.startDate-1}}else{if(correctionEnabled==true){return isHidden.endDate+(time-isHidden.startDate)+1}else{return isHidden.endDate+1}}}else{return time}};exports.isHidden=function(time,hiddenDates){for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(time>=startDate&&time<endDate){return{hidden:true,startDate:startDate,endDate:endDate};break}}return{hidden:false,startDate:startDate,endDate:endDate}}},function(module,exports,__webpack_require__){var Emitter=__webpack_require__(11);var Hammer=__webpack_require__(19);var util=__webpack_require__(1);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var Range=__webpack_require__(21);var ItemSet=__webpack_require__(26);var Activator=__webpack_require__(35);var DateUtil=__webpack_require__(24);function Core(){}Emitter(Core.prototype);Core.prototype._create=function(container){this.dom={};this.dom.root=document.createElement("div");this.dom.background=document.createElement("div");this.dom.backgroundVertical=document.createElement("div");this.dom.backgroundHorizontal=document.createElement("div");this.dom.centerContainer=document.createElement("div");this.dom.leftContainer=document.createElement("div");this.dom.rightContainer=document.createElement("div");this.dom.center=document.createElement("div");this.dom.left=document.createElement("div");this.dom.right=document.createElement("div");this.dom.top=document.createElement("div");this.dom.bottom=document.createElement("div");this.dom.shadowTop=document.createElement("div");this.dom.shadowBottom=document.createElement("div");this.dom.shadowTopLeft=document.createElement("div");this.dom.shadowBottomLeft=document.createElement("div");this.dom.shadowTopRight=document.createElement("div");this.dom.shadowBottomRight=document.createElement("div");this.dom.root.className="vis timeline root";this.dom.background.className="vispanel background";this.dom.backgroundVertical.className="vispanel background vertical";this.dom.backgroundHorizontal.className="vispanel background horizontal";this.dom.centerContainer.className="vispanel center";this.dom.leftContainer.className="vispanel left";this.dom.rightContainer.className="vispanel right";this.dom.top.className="vispanel top";this.dom.bottom.className="vispanel bottom";this.dom.left.className="content";this.dom.center.className="content";this.dom.right.className="content";this.dom.shadowTop.className="shadow top";this.dom.shadowBottom.className="shadow bottom";this.dom.shadowTopLeft.className="shadow top";this.dom.shadowBottomLeft.className="shadow bottom";this.dom.shadowTopRight.className="shadow top";this.dom.shadowBottomRight.className="shadow bottom";this.dom.root.appendChild(this.dom.background);this.dom.root.appendChild(this.dom.backgroundVertical);this.dom.root.appendChild(this.dom.backgroundHorizontal);this.dom.root.appendChild(this.dom.centerContainer);this.dom.root.appendChild(this.dom.leftContainer);this.dom.root.appendChild(this.dom.rightContainer);this.dom.root.appendChild(this.dom.top);this.dom.root.appendChild(this.dom.bottom);this.dom.centerContainer.appendChild(this.dom.center);this.dom.leftContainer.appendChild(this.dom.left);this.dom.rightContainer.appendChild(this.dom.right);this.dom.centerContainer.appendChild(this.dom.shadowTop);this.dom.centerContainer.appendChild(this.dom.shadowBottom);this.dom.leftContainer.appendChild(this.dom.shadowTopLeft);this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft);this.dom.rightContainer.appendChild(this.dom.shadowTopRight);this.dom.rightContainer.appendChild(this.dom.shadowBottomRight);this.on("rangechange",this.redraw.bind(this));this.on("touch",this._onTouch.bind(this));this.on("pinch",this._onPinch.bind(this));this.on("dragstart",this._onDragStart.bind(this));this.on("drag",this._onDrag.bind(this));var me=this;this.on("change",function(properties){if(properties&&properties.queue==true){if(!me._redrawTimer){me._redrawTimer=setTimeout(function(){me._redrawTimer=null;me.redraw()},0)}}else{me.redraw()}});this.hammer=Hammer(this.dom.root,{preventDefault:true});this.listeners={};var events=["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];events.forEach(function(event){var listener=function(){var args=[event].concat(Array.prototype.slice.call(arguments,0));if(me.isActive()){me.emit.apply(me,args)}};me.hammer.on(event,listener);me.listeners[event]=listener});this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0};this.touch={};this.redrawCount=0;if(!container)throw new Error("No container provided");container.appendChild(this.dom.root)};Core.prototype.setOptions=function(options){if(options){var fields=["width","height","minHeight","maxHeight","autoResize","start","end","orientation","clickToUse","dataAttributes","hiddenDates"];util.selectiveExtend(fields,this.options,options);if("hiddenDates"in this.options){DateUtil.convertHiddenOptions(this.body,this.options.hiddenDates)}if("clickToUse"in options){if(options.clickToUse){this.activator=new Activator(this.dom.root)}else{if(this.activator){this.activator.destroy();delete this.activator}}}this._initAutoResize()}this.components.forEach(function(component){component.setOptions(options)});if(options&&options.order){throw new Error("Option order is deprecated. There is no replacement for this feature.")}this.redraw()};Core.prototype.isActive=function(){return!this.activator||this.activator.active};Core.prototype.destroy=function(){this.clear();this.off();this._stopAutoResize();if(this.dom.root.parentNode){this.dom.root.parentNode.removeChild(this.dom.root)}this.dom=null;if(this.activator){this.activator.destroy();delete this.activator}for(var event in this.listeners){if(this.listeners.hasOwnProperty(event)){delete this.listeners[event]}}this.listeners=null;this.hammer=null;this.components.forEach(function(component){component.destroy()});this.body=null};Core.prototype.setCustomTime=function(time){if(!this.customTime){throw new Error("Cannot get custom time: Custom time bar is not enabled")}this.customTime.setCustomTime(time)};Core.prototype.getCustomTime=function(){if(!this.customTime){throw new Error("Cannot get custom time: Custom time bar is not enabled")}return this.customTime.getCustomTime()};Core.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]};Core.prototype.clear=function(what){if(!what||what.items){this.setItems(null)}if(!what||what.groups){this.setGroups(null)}if(!what||what.options){this.components.forEach(function(component){component.setOptions(component.defaultOptions)});this.setOptions(this.defaultOptions)}};Core.prototype.fit=function(options){var range=this._getDataRange();if(range.start===null&&range.end===null){return}var animate=options&&options.animate!==undefined?options.animate:true;this.range.setRange(range.start,range.end,animate)};Core.prototype._getDataRange=function(){var dataRange=this.getItemRange();var start=dataRange.min;var end=dataRange.max;if(start!=null&&end!=null){var interval=end.valueOf()-start.valueOf();if(interval<=0){interval=24*60*60*1e3}start=new Date(start.valueOf()-interval*.05);end=new Date(end.valueOf()+interval*.05)}return{start:start,end:end}};Core.prototype.setWindow=function(start,end,options){var animate=options&&options.animate!==undefined?options.animate:true;if(arguments.length==1){var range=arguments[0];this.range.setRange(range.start,range.end,animate)}else{this.range.setRange(start,end,animate)}};Core.prototype.moveTo=function(time,options){var interval=this.range.end-this.range.start;var t=util.convert(time,"Date").valueOf();var start=t-interval/2;var end=t+interval/2;var animate=options&&options.animate!==undefined?options.animate:true;this.range.setRange(start,end,animate)};Core.prototype.getWindow=function(){var range=this.range.getRange();return{start:new Date(range.start),end:new Date(range.end)}};Core.prototype.redraw=function(){var resized=false;var options=this.options;var props=this.props;var dom=this.dom;if(!dom)return;DateUtil.updateHiddenDates(this.body,this.options.hiddenDates);if(options.orientation=="top"){util.addClassName(dom.root,"top");util.removeClassName(dom.root,"bottom")}else{util.removeClassName(dom.root,"top");util.addClassName(dom.root,"bottom")}dom.root.style.maxHeight=util.option.asSize(options.maxHeight,"");dom.root.style.minHeight=util.option.asSize(options.minHeight,"");dom.root.style.width=util.option.asSize(options.width,"");props.border.left=(dom.centerContainer.offsetWidth-dom.centerContainer.clientWidth)/2;props.border.right=props.border.left;props.border.top=(dom.centerContainer.offsetHeight-dom.centerContainer.clientHeight)/2;props.border.bottom=props.border.top;var borderRootHeight=dom.root.offsetHeight-dom.root.clientHeight;var borderRootWidth=dom.root.offsetWidth-dom.root.clientWidth;if(dom.centerContainer.clientHeight===0){props.border.left=props.border.top;props.border.right=props.border.left}if(dom.root.clientHeight===0){borderRootWidth=borderRootHeight}props.center.height=dom.center.offsetHeight;props.left.height=dom.left.offsetHeight;props.right.height=dom.right.offsetHeight;props.top.height=dom.top.clientHeight||-props.border.top;props.bottom.height=dom.bottom.clientHeight||-props.border.bottom;var contentHeight=Math.max(props.left.height,props.center.height,props.right.height);var autoHeight=props.top.height+contentHeight+props.bottom.height+borderRootHeight+props.border.top+props.border.bottom;dom.root.style.height=util.option.asSize(options.height,autoHeight+"px");props.root.height=dom.root.offsetHeight;props.background.height=props.root.height-borderRootHeight;var containerHeight=props.root.height-props.top.height-props.bottom.height-borderRootHeight;props.centerContainer.height=containerHeight;props.leftContainer.height=containerHeight;props.rightContainer.height=props.leftContainer.height;props.root.width=dom.root.offsetWidth;props.background.width=props.root.width-borderRootWidth;props.left.width=dom.leftContainer.clientWidth||-props.border.left;props.leftContainer.width=props.left.width;props.right.width=dom.rightContainer.clientWidth||-props.border.right;props.rightContainer.width=props.right.width;var centerWidth=props.root.width-props.left.width-props.right.width-borderRootWidth;props.center.width=centerWidth;props.centerContainer.width=centerWidth;props.top.width=centerWidth;props.bottom.width=centerWidth;dom.background.style.height=props.background.height+"px";dom.backgroundVertical.style.height=props.background.height+"px";dom.backgroundHorizontal.style.height=props.centerContainer.height+"px";dom.centerContainer.style.height=props.centerContainer.height+"px";dom.leftContainer.style.height=props.leftContainer.height+"px";dom.rightContainer.style.height=props.rightContainer.height+"px";dom.background.style.width=props.background.width+"px";dom.backgroundVertical.style.width=props.centerContainer.width+"px";dom.backgroundHorizontal.style.width=props.background.width+"px";dom.centerContainer.style.width=props.center.width+"px";dom.top.style.width=props.top.width+"px";dom.bottom.style.width=props.bottom.width+"px";dom.background.style.left="0";dom.background.style.top="0";dom.backgroundVertical.style.left=props.left.width+props.border.left+"px";dom.backgroundVertical.style.top="0";dom.backgroundHorizontal.style.left="0";dom.backgroundHorizontal.style.top=props.top.height+"px";dom.centerContainer.style.left=props.left.width+"px";dom.centerContainer.style.top=props.top.height+"px";dom.leftContainer.style.left="0";dom.leftContainer.style.top=props.top.height+"px";dom.rightContainer.style.left=props.left.width+props.center.width+"px";dom.rightContainer.style.top=props.top.height+"px";dom.top.style.left=props.left.width+"px";dom.top.style.top="0";dom.bottom.style.left=props.left.width+"px";dom.bottom.style.top=props.top.height+props.centerContainer.height+"px";this._updateScrollTop();var offset=this.props.scrollTop;if(options.orientation=="bottom"){offset+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)}dom.center.style.left="0";dom.center.style.top=offset+"px";dom.left.style.left="0";dom.left.style.top=offset+"px";dom.right.style.left="0";dom.right.style.top=offset+"px";var visibilityTop=this.props.scrollTop==0?"hidden":"";var visibilityBottom=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";dom.shadowTop.style.visibility=visibilityTop;dom.shadowBottom.style.visibility=visibilityBottom;dom.shadowTopLeft.style.visibility=visibilityTop;dom.shadowBottomLeft.style.visibility=visibilityBottom;dom.shadowTopRight.style.visibility=visibilityTop;dom.shadowBottomRight.style.visibility=visibilityBottom;this.components.forEach(function(component){resized=component.redraw()||resized});if(resized){var MAX_REDRAWS=3;if(this.redrawCount<MAX_REDRAWS){this.redrawCount++;this.redraw()}else{console.log("WARNING: infinite loop in redraw?")}this.redrawCount=0}this.emit("finishedRedraw")};Core.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")};Core.prototype.setCurrentTime=function(time){if(!this.currentTime){throw new Error("Option showCurrentTime must be true")}this.currentTime.setCurrentTime(time)};Core.prototype.getCurrentTime=function(){if(!this.currentTime){throw new Error("Option showCurrentTime must be true")}return this.currentTime.getCurrentTime()};Core.prototype._toTime=function(x){return DateUtil.toTime(this,x,this.props.center.width)};Core.prototype._toGlobalTime=function(x){return DateUtil.toTime(this,x,this.props.root.width)};Core.prototype._toScreen=function(time){return DateUtil.toScreen(this,time,this.props.center.width)};Core.prototype._toGlobalScreen=function(time){return DateUtil.toScreen(this,time,this.props.root.width)};Core.prototype._initAutoResize=function(){if(this.options.autoResize==true){this._startAutoResize()}else{this._stopAutoResize()}};Core.prototype._startAutoResize=function(){var me=this;this._stopAutoResize();this._onResize=function(){if(me.options.autoResize!=true){me._stopAutoResize();return}if(me.dom.root){if(me.dom.root.offsetWidth!=me.props.lastWidth||me.dom.root.offsetHeight!=me.props.lastHeight){me.props.lastWidth=me.dom.root.offsetWidth;me.props.lastHeight=me.dom.root.offsetHeight;me.emit("change")}}};util.addEventListener(window,"resize",this._onResize);this.watchTimer=setInterval(this._onResize,1e3)};Core.prototype._stopAutoResize=function(){if(this.watchTimer){clearInterval(this.watchTimer);this.watchTimer=undefined}util.removeEventListener(window,"resize",this._onResize);this._onResize=null};Core.prototype._onTouch=function(event){this.touch.allowDragging=true};Core.prototype._onPinch=function(event){this.touch.allowDragging=false};Core.prototype._onDragStart=function(event){this.touch.initialScrollTop=this.props.scrollTop};Core.prototype._onDrag=function(event){if(!this.touch.allowDragging)return;var delta=event.gesture.deltaY;var oldScrollTop=this._getScrollTop();var newScrollTop=this._setScrollTop(this.touch.initialScrollTop+delta);if(newScrollTop!=oldScrollTop){this.redraw();this.emit("verticalDrag")}};Core.prototype._setScrollTop=function(scrollTop){this.props.scrollTop=scrollTop;this._updateScrollTop();return this.props.scrollTop};Core.prototype._updateScrollTop=function(){var scrollTopMin=Math.min(this.props.centerContainer.height-this.props.center.height,0);if(scrollTopMin!=this.props.scrollTopMin){if(this.options.orientation=="bottom"){this.props.scrollTop+=scrollTopMin-this.props.scrollTopMin}this.props.scrollTopMin=scrollTopMin}if(this.props.scrollTop>0)this.props.scrollTop=0;if(this.props.scrollTop<scrollTopMin)this.props.scrollTop=scrollTopMin;return this.props.scrollTop};Core.prototype._getScrollTop=function(){return this.props.scrollTop};module.exports=Core},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(19);var util=__webpack_require__(1);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var Component=__webpack_require__(23);var Group=__webpack_require__(27);var BackgroundGroup=__webpack_require__(31);var BoxItem=__webpack_require__(32);var PointItem=__webpack_require__(33);var RangeItem=__webpack_require__(29);var BackgroundItem=__webpack_require__(34);var UNGROUPED="__ungrouped__";var BACKGROUND="__background__";function ItemSet(body,options){this.body=body;this.defaultOptions={type:null,orientation:"bottom",align:"auto",stack:true,groupOrder:null,selectable:true,editable:{updateTime:false,updateGroup:false,add:false,remove:false},onAdd:function(item,callback){callback(item)},onUpdate:function(item,callback){callback(item)},onMove:function(item,callback){callback(item)},onRemove:function(item,callback){callback(item)},onMoving:function(item,callback){callback(item)},margin:{item:{horizontal:10,vertical:10},axis:20},padding:5};this.options=util.extend({},this.defaultOptions);this.itemOptions={type:{start:"Date",end:"Date"}};this.conversion={toScreen:body.util.toScreen,toTime:body.util.toTime};this.dom={};this.props={};this.hammer=null;var me=this;this.itemsData=null;this.groupsData=null;this.itemListeners={add:function(event,params,senderId){me._onAdd(params.items)},update:function(event,params,senderId){me._onUpdate(params.items)},remove:function(event,params,senderId){me._onRemove(params.items)}};this.groupListeners={add:function(event,params,senderId){me._onAddGroups(params.items)},update:function(event,params,senderId){me._onUpdateGroups(params.items)},remove:function(event,params,senderId){me._onRemoveGroups(params.items)}};this.items={};this.groups={};this.groupIds=[];this.selection=[];this.stackDirty=true;this.touchParams={};this._create();this.setOptions(options)}ItemSet.prototype=new Component;ItemSet.types={background:BackgroundItem,box:BoxItem,range:RangeItem,point:PointItem};ItemSet.prototype._create=function(){var frame=document.createElement("div");frame.className="itemset";frame["timeline-itemset"]=this;this.dom.frame=frame;var background=document.createElement("div");background.className="background";frame.appendChild(background);this.dom.background=background;var foreground=document.createElement("div");foreground.className="foreground";frame.appendChild(foreground);this.dom.foreground=foreground;var axis=document.createElement("div");axis.className="axis";this.dom.axis=axis;var labelSet=document.createElement("div");labelSet.className="labelset";this.dom.labelSet=labelSet;this._updateUngrouped();var backgroundGroup=new BackgroundGroup(BACKGROUND,null,this);backgroundGroup.show();this.groups[BACKGROUND]=backgroundGroup;this.hammer=Hammer(this.body.dom.centerContainer,{preventDefault:true});this.hammer.on("touch",this._onTouch.bind(this));this.hammer.on("dragstart",this._onDragStart.bind(this));this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this));this.hammer.on("tap",this._onSelectItem.bind(this));this.hammer.on("hold",this._onMultiSelectItem.bind(this));this.hammer.on("doubletap",this._onAddItem.bind(this));this.show()};ItemSet.prototype.setOptions=function(options){if(options){var fields=["type","align","orientation","padding","stack","selectable","groupOrder","dataAttributes","template","hide"];util.selectiveExtend(fields,this.options,options);if("margin"in options){if(typeof options.margin==="number"){this.options.margin.axis=options.margin;this.options.margin.item.horizontal=options.margin;this.options.margin.item.vertical=options.margin}else if(typeof options.margin==="object"){util.selectiveExtend(["axis"],this.options.margin,options.margin);if("item"in options.margin){if(typeof options.margin.item==="number"){this.options.margin.item.horizontal=options.margin.item;this.options.margin.item.vertical=options.margin.item}else if(typeof options.margin.item==="object"){util.selectiveExtend(["horizontal","vertical"],this.options.margin.item,options.margin.item)}}}}if("editable"in options){if(typeof options.editable==="boolean"){this.options.editable.updateTime=options.editable;this.options.editable.updateGroup=options.editable;this.options.editable.add=options.editable;this.options.editable.remove=options.editable}else if(typeof options.editable==="object"){util.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,options.editable)}}var addCallback=function(name){var fn=options[name];if(fn){if(!(fn instanceof Function)){throw new Error("option "+name+" must be a function "+name+"(item, callback)")}this.options[name]=fn}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving"].forEach(addCallback);this.markDirty()}};ItemSet.prototype.markDirty=function(){this.groupIds=[];this.stackDirty=true};ItemSet.prototype.destroy=function(){this.hide();this.setItems(null);this.setGroups(null);this.hammer=null;this.body=null;this.conversion=null};ItemSet.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}if(this.dom.axis.parentNode){this.dom.axis.parentNode.removeChild(this.dom.axis)}if(this.dom.labelSet.parentNode){this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}};ItemSet.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame)}if(!this.dom.axis.parentNode){this.body.dom.backgroundVertical.appendChild(this.dom.axis)}if(!this.dom.labelSet.parentNode){this.body.dom.left.appendChild(this.dom.labelSet)}};ItemSet.prototype.setSelection=function(ids){var i,ii,id,item;if(ids==undefined)ids=[];if(!Array.isArray(ids))ids=[ids];for(i=0,ii=this.selection.length;i<ii;i++){id=this.selection[i];item=this.items[id];if(item)item.unselect()}this.selection=[];for(i=0,ii=ids.length;i<ii;i++){id=ids[i];item=this.items[id];if(item){this.selection.push(id);item.select()}}};ItemSet.prototype.getSelection=function(){return this.selection.concat([])};ItemSet.prototype.getVisibleItems=function(){var range=this.body.range.getRange();var left=this.body.util.toScreen(range.start);var right=this.body.util.toScreen(range.end);var ids=[];for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){var group=this.groups[groupId];var rawVisibleItems=group.visibleItems;for(var i=0;i<rawVisibleItems.length;i++){var item=rawVisibleItems[i];if(item.left<right&&item.left+item.width>left){ids.push(item.id)}}}}return ids};ItemSet.prototype._deselect=function(id){var selection=this.selection;for(var i=0,ii=selection.length;i<ii;i++){if(selection[i]==id){selection.splice(i,1);break}}};ItemSet.prototype.redraw=function(){var margin=this.options.margin,range=this.body.range,asSize=util.option.asSize,options=this.options,orientation=options.orientation,resized=false,frame=this.dom.frame,editable=options.editable.updateTime||options.editable.updateGroup;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top;this.props.left=this.body.domProps.left.width+this.body.domProps.border.left;frame.className="itemset"+(editable?" editable":"");resized=this._orderGroups()||resized;var visibleInterval=range.end-range.start;var zoomed=visibleInterval!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;if(zoomed)this.stackDirty=true;this.lastVisibleInterval=visibleInterval;this.props.lastWidth=this.props.width;var restack=this.stackDirty;var firstGroup=this._firstGroup();var firstMargin={item:margin.item,axis:margin.axis};var nonFirstMargin={item:margin.item,axis:margin.item.vertical/2};var height=0;var minHeight=margin.axis+margin.item.vertical;this.groups[BACKGROUND].redraw(range,nonFirstMargin,restack);util.forEach(this.groups,function(group){var groupMargin=group==firstGroup?firstMargin:nonFirstMargin;var groupResized=group.redraw(range,groupMargin,restack);resized=groupResized||resized;height+=group.height});height=Math.max(height,minHeight);this.stackDirty=false;frame.style.height=asSize(height);this.props.width=frame.offsetWidth;this.props.height=height;this.dom.axis.style.top=asSize(orientation=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height);this.dom.axis.style.left="0";resized=this._isResized()||resized;return resized};ItemSet.prototype._firstGroup=function(){var firstGroupIndex=this.options.orientation=="top"?0:this.groupIds.length-1;var firstGroupId=this.groupIds[firstGroupIndex];var firstGroup=this.groups[firstGroupId]||this.groups[UNGROUPED];return firstGroup||null};ItemSet.prototype._updateUngrouped=function(){var ungrouped=this.groups[UNGROUPED];var background=this.groups[BACKGROUND];var item,itemId;if(this.groupsData){if(ungrouped){ungrouped.hide();delete this.groups[UNGROUPED];for(itemId in this.items){if(this.items.hasOwnProperty(itemId)){item=this.items[itemId];item.parent&&item.parent.remove(item);var groupId=this._getGroupId(item.data);var group=this.groups[groupId];group&&group.add(item)||item.hide()}}}}else{if(!ungrouped){var id=null;var data=null;ungrouped=new Group(id,data,this);this.groups[UNGROUPED]=ungrouped;for(itemId in this.items){if(this.items.hasOwnProperty(itemId)){item=this.items[itemId];ungrouped.add(item)}}ungrouped.show()}}};ItemSet.prototype.getLabelSet=function(){return this.dom.labelSet};ItemSet.prototype.setItems=function(items){var me=this,ids,oldItemsData=this.itemsData;if(!items){this.itemsData=null}else if(items instanceof DataSet||items instanceof DataView){this.itemsData=items}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(oldItemsData){util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback)});ids=oldItemsData.getIds();this._onRemove(ids)}if(this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id)});ids=this.itemsData.getIds();this._onAdd(ids);this._updateUngrouped()}};ItemSet.prototype.getItems=function(){return this.itemsData};ItemSet.prototype.setGroups=function(groups){var me=this,ids;if(this.groupsData){util.forEach(this.groupListeners,function(callback,event){me.groupsData.unsubscribe(event,callback)});ids=this.groupsData.getIds();this.groupsData=null;this._onRemoveGroups(ids)}if(!groups){this.groupsData=null}else if(groups instanceof DataSet||groups instanceof DataView){this.groupsData=groups}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id)});ids=this.groupsData.getIds();this._onAddGroups(ids)}this._updateUngrouped();this._order();this.body.emitter.emit("change",{queue:true})};ItemSet.prototype.getGroups=function(){return this.groupsData};ItemSet.prototype.removeItem=function(id){var item=this.itemsData.get(id),dataset=this.itemsData.getDataSet();if(item){this.options.onRemove(item,function(item){if(item){dataset.remove(id)}})}};ItemSet.prototype._getType=function(itemData){return itemData.type||this.options.type||(itemData.end?"range":"box")};ItemSet.prototype._getGroupId=function(itemData){var type=this._getType(itemData);if(type=="background"&&itemData.group==undefined){return BACKGROUND}else{return this.groupsData?itemData.group:UNGROUPED}};ItemSet.prototype._onUpdate=function(ids){var me=this;ids.forEach(function(id){var itemData=me.itemsData.get(id,me.itemOptions);var item=me.items[id];var type=me._getType(itemData);var constructor=ItemSet.types[type];if(item){if(!constructor||!(item instanceof constructor)){me._removeItem(item);item=null}else{me._updateItem(item,itemData)}}if(!item){if(constructor){item=new constructor(itemData,me.conversion,me.options);item.id=id;me._addItem(item)}else if(type=="rangeoverflow"){throw new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: '+".vis.timeline .item.range .content {overflow: visible;}")}else{throw new TypeError('Unknown item type "'+type+'"')}}});this._order();this.stackDirty=true;this.body.emitter.emit("change",{queue:true})};ItemSet.prototype._onAdd=ItemSet.prototype._onUpdate;ItemSet.prototype._onRemove=function(ids){var count=0;var me=this;ids.forEach(function(id){var item=me.items[id];if(item){count++;me._removeItem(item)}});if(count){this._order();this.stackDirty=true;this.body.emitter.emit("change",{queue:true})}};ItemSet.prototype._order=function(){util.forEach(this.groups,function(group){group.order()})};ItemSet.prototype._onUpdateGroups=function(ids){this._onAddGroups(ids)};ItemSet.prototype._onAddGroups=function(ids){var me=this;ids.forEach(function(id){var groupData=me.groupsData.get(id);var group=me.groups[id];if(!group){if(id==UNGROUPED||id==BACKGROUND){throw new Error("Illegal group id. "+id+" is a reserved id.")}var groupOptions=Object.create(me.options);util.extend(groupOptions,{height:null});group=new Group(id,groupData,me);me.groups[id]=group;for(var itemId in me.items){if(me.items.hasOwnProperty(itemId)){var item=me.items[itemId];if(item.data.group==id){group.add(item)}}}group.order();group.show()}else{group.setData(groupData)}});this.body.emitter.emit("change",{queue:true})};ItemSet.prototype._onRemoveGroups=function(ids){var groups=this.groups;ids.forEach(function(id){var group=groups[id];if(group){group.hide();delete groups[id]}});this.markDirty();this.body.emitter.emit("change",{queue:true})};ItemSet.prototype._orderGroups=function(){if(this.groupsData){var groupIds=this.groupsData.getIds({order:this.options.groupOrder});var changed=!util.equalArray(groupIds,this.groupIds);if(changed){var groups=this.groups;groupIds.forEach(function(groupId){groups[groupId].hide()});groupIds.forEach(function(groupId){groups[groupId].show()});this.groupIds=groupIds}return changed}else{return false}};ItemSet.prototype._addItem=function(item){this.items[item.id]=item;var groupId=this._getGroupId(item.data);var group=this.groups[groupId];if(group)group.add(item)};ItemSet.prototype._updateItem=function(item,itemData){var oldGroupId=item.data.group;item.setData(itemData);if(oldGroupId!=item.data.group){var oldGroup=this.groups[oldGroupId];if(oldGroup)oldGroup.remove(item);var groupId=this._getGroupId(item.data);var group=this.groups[groupId];if(group)group.add(item)}};ItemSet.prototype._removeItem=function(item){item.hide();delete this.items[item.id];var index=this.selection.indexOf(item.id);if(index!=-1)this.selection.splice(index,1);item.parent&&item.parent.remove(item)};ItemSet.prototype._constructByEndArray=function(array){var endArray=[];for(var i=0;i<array.length;i++){if(array[i]instanceof RangeItem){endArray.push(array[i])}}return endArray};ItemSet.prototype._onTouch=function(event){this.touchParams.item=ItemSet.itemFromTarget(event)};ItemSet.prototype._onDragStart=function(event){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup){return}var item=this.touchParams.item||null;var me=this;var props;if(item&&item.selected){var dragLeftItem=event.target.dragLeftItem;
var dragRightItem=event.target.dragRightItem;if(dragLeftItem){props={item:dragLeftItem,initialX:event.gesture.center.clientX};if(me.options.editable.updateTime){props.start=item.data.start.valueOf()}if(me.options.editable.updateGroup){if("group"in item.data)props.group=item.data.group}this.touchParams.itemProps=[props]}else if(dragRightItem){props={item:dragRightItem,initialX:event.gesture.center.clientX};if(me.options.editable.updateTime){props.end=item.data.end.valueOf()}if(me.options.editable.updateGroup){if("group"in item.data)props.group=item.data.group}this.touchParams.itemProps=[props]}else{this.touchParams.itemProps=this.getSelection().map(function(id){var item=me.items[id];var props={item:item,initialX:event.gesture.center.clientX};if(me.options.editable.updateTime){if("start"in item.data)props.start=item.data.start.valueOf();if("end"in item.data)props.end=item.data.end.valueOf()}if(me.options.editable.updateGroup){if("group"in item.data)props.group=item.data.group}return props})}event.stopPropagation()}};ItemSet.prototype._onDrag=function(event){event.preventDefault();if(this.touchParams.itemProps){var me=this;var snap=this.body.util.snap||null;var xOffset=this.body.dom.root.offsetLeft+this.body.domProps.left.width;this.touchParams.itemProps.forEach(function(props){var newProps={};var current=me.body.util.toTime(event.gesture.center.clientX-xOffset);var initial=me.body.util.toTime(props.initialX-xOffset);var offset=current-initial;if("start"in props){var start=new Date(props.start+offset);newProps.start=snap?snap(start):start}if("end"in props){var end=new Date(props.end+offset);newProps.end=snap?snap(end):end}if("group"in props){var group=ItemSet.groupFromTarget(event);newProps.group=group&&group.groupId}var itemData=util.extend({},props.item.data,newProps);me.options.onMoving(itemData,function(itemData){if(itemData){me._updateItemProps(props.item,itemData)}})});this.stackDirty=true;this.body.emitter.emit("change");event.stopPropagation()}};ItemSet.prototype._updateItemProps=function(item,props){if("start"in props)item.data.start=props.start;if("end"in props)item.data.end=props.end;if("group"in props&&item.data.group!=props.group){this._moveToGroup(item,props.group)}};ItemSet.prototype._moveToGroup=function(item,groupId){var group=this.groups[groupId];if(group&&group.groupId!=item.data.group){var oldGroup=item.parent;oldGroup.remove(item);oldGroup.order();group.add(item);group.order();item.data.group=group.groupId}};ItemSet.prototype._onDragEnd=function(event){event.preventDefault();if(this.touchParams.itemProps){var changes=[],me=this,dataset=this.itemsData.getDataSet();var itemProps=this.touchParams.itemProps;this.touchParams.itemProps=null;itemProps.forEach(function(props){var id=props.item.id,itemData=me.itemsData.get(id,me.itemOptions);var changed=false;if("start"in props.item.data){changed=props.start!=props.item.data.start.valueOf();itemData.start=util.convert(props.item.data.start,dataset._options.type&&dataset._options.type.start||"Date")}if("end"in props.item.data){changed=changed||props.end!=props.item.data.end.valueOf();itemData.end=util.convert(props.item.data.end,dataset._options.type&&dataset._options.type.end||"Date")}if("group"in props.item.data){changed=changed||props.group!=props.item.data.group;itemData.group=props.item.data.group}if(changed){me.options.onMove(itemData,function(itemData){if(itemData){itemData[dataset._fieldId]=id;changes.push(itemData)}else{me._updateItemProps(props.item,props);me.stackDirty=true;me.body.emitter.emit("change")}})}});if(changes.length){dataset.update(changes)}event.stopPropagation()}};ItemSet.prototype._onSelectItem=function(event){if(!this.options.selectable)return;var ctrlKey=event.gesture.srcEvent&&event.gesture.srcEvent.ctrlKey;var shiftKey=event.gesture.srcEvent&&event.gesture.srcEvent.shiftKey;if(ctrlKey||shiftKey){this._onMultiSelectItem(event);return}var oldSelection=this.getSelection();var item=ItemSet.itemFromTarget(event);var selection=item?[item.id]:[];this.setSelection(selection);var newSelection=this.getSelection();if(newSelection.length>0||oldSelection.length>0){this.body.emitter.emit("select",{items:newSelection})}};ItemSet.prototype._onAddItem=function(event){if(!this.options.selectable)return;if(!this.options.editable.add)return;var me=this,snap=this.body.util.snap||null,item=ItemSet.itemFromTarget(event);if(item){var itemData=me.itemsData.get(item.id);this.options.onUpdate(itemData,function(itemData){if(itemData){me.itemsData.getDataSet().update(itemData)}})}else{var xAbs=util.getAbsoluteLeft(this.dom.frame);var x=event.gesture.center.pageX-xAbs;var start=this.body.util.toTime(x);var newItem={start:snap?snap(start):start,content:"new item"};if(this.options.type==="range"){var end=this.body.util.toTime(x+this.props.width/5);newItem.end=snap?snap(end):end}newItem[this.itemsData._fieldId]=util.randomUUID();var group=ItemSet.groupFromTarget(event);if(group){newItem.group=group.groupId}this.options.onAdd(newItem,function(item){if(item){me.itemsData.getDataSet().add(item)}})}};ItemSet.prototype._onMultiSelectItem=function(event){if(!this.options.selectable)return;var selection,item=ItemSet.itemFromTarget(event);if(item){selection=this.getSelection();var shiftKey=event.gesture.touches[0]&&event.gesture.touches[0].shiftKey||false;if(shiftKey){selection.push(item.id);var range=ItemSet._getItemRange(this.itemsData.get(selection,this.itemOptions));selection=[];for(var id in this.items){if(this.items.hasOwnProperty(id)){var _item=this.items[id];var start=_item.data.start;var end=_item.data.end!==undefined?_item.data.end:start;if(start>=range.min&&end<=range.max){selection.push(_item.id)}}}}else{var index=selection.indexOf(item.id);if(index==-1){selection.push(item.id)}else{selection.splice(index,1)}}this.setSelection(selection);this.body.emitter.emit("select",{items:this.getSelection()})}};ItemSet._getItemRange=function(itemsData){var max=null;var min=null;itemsData.forEach(function(data){if(min==null||data.start<min){min=data.start}if(data.end!=undefined){if(max==null||data.end>max){max=data.end}}else{if(max==null||data.start>max){max=data.start}}});return{min:min,max:max}};ItemSet.itemFromTarget=function(event){var target=event.target;while(target){if(target.hasOwnProperty("timeline-item")){return target["timeline-item"]}target=target.parentNode}return null};ItemSet.groupFromTarget=function(event){var target=event.target;while(target){if(target.hasOwnProperty("timeline-group")){return target["timeline-group"]}target=target.parentNode}return null};ItemSet.itemSetFromTarget=function(event){var target=event.target;while(target){if(target.hasOwnProperty("timeline-itemset")){return target["timeline-itemset"]}target=target.parentNode}return null};module.exports=ItemSet},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var stack=__webpack_require__(28);var RangeItem=__webpack_require__(29);function Group(groupId,data,itemSet){this.groupId=groupId;this.subgroups={};this.subgroupIndex=0;this.subgroupOrderer=data&&data.subgroupOrder;this.itemSet=itemSet;this.dom={};this.props={label:{width:0,height:0}};this.className=null;this.items={};this.visibleItems=[];this.orderedItems={byStart:[],byEnd:[]};this.checkRangedItems=false;var me=this;this.itemSet.body.emitter.on("checkRangedItems",function(){me.checkRangedItems=true});this._create();this.setData(data)}Group.prototype._create=function(){var label=document.createElement("div");label.className="vlabel";this.dom.label=label;var inner=document.createElement("div");inner.className="inner";label.appendChild(inner);this.dom.inner=inner;var foreground=document.createElement("div");foreground.className="group";foreground["timeline-group"]=this;this.dom.foreground=foreground;this.dom.background=document.createElement("div");this.dom.background.className="group";this.dom.axis=document.createElement("div");this.dom.axis.className="group";this.dom.marker=document.createElement("div");this.dom.marker.style.visibility="hidden";this.dom.marker.innerHTML="?";this.dom.background.appendChild(this.dom.marker)};Group.prototype.setData=function(data){var content=data&&data.content;if(content instanceof Element){this.dom.inner.appendChild(content)}else if(content!==undefined&&content!==null){this.dom.inner.innerHTML=content}else{this.dom.inner.innerHTML=this.groupId||""}this.dom.label.title=data&&data.title||"";if(!this.dom.inner.firstChild){util.addClassName(this.dom.inner,"hidden")}else{util.removeClassName(this.dom.inner,"hidden")}var className=data&&data.className||null;if(className!=this.className){if(this.className){util.removeClassName(this.dom.label,this.className);util.removeClassName(this.dom.foreground,this.className);util.removeClassName(this.dom.background,this.className);util.removeClassName(this.dom.axis,this.className)}util.addClassName(this.dom.label,className);util.addClassName(this.dom.foreground,className);util.addClassName(this.dom.background,className);util.addClassName(this.dom.axis,className);this.className=className}if(this.style){util.removeCssText(this.dom.label,this.style);this.style=null}if(data&&data.style){util.addCssText(this.dom.label,data.style);this.style=data.style}};Group.prototype.getLabelWidth=function(){return this.props.label.width};Group.prototype.redraw=function(range,margin,restack){var resized=false;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range);var markerHeight=this.dom.marker.clientHeight;if(markerHeight!=this.lastMarkerHeight){this.lastMarkerHeight=markerHeight;util.forEach(this.items,function(item){item.dirty=true;if(item.displayed)item.redraw()});restack=true}if(this.itemSet.options.stack){stack.stack(this.visibleItems,margin,restack)}else{stack.nostack(this.visibleItems,margin,this.subgroups)}var height=this._calculateHeight(margin);var foreground=this.dom.foreground;this.top=foreground.offsetTop;this.left=foreground.offsetLeft;this.width=foreground.offsetWidth;resized=util.updateProperty(this,"height",height)||resized;resized=util.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||resized;resized=util.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||resized;this.dom.background.style.height=height+"px";this.dom.foreground.style.height=height+"px";this.dom.label.style.height=height+"px";for(var i=0,ii=this.visibleItems.length;i<ii;i++){var item=this.visibleItems[i];item.repositionY(margin)}return resized};Group.prototype._calculateHeight=function(margin){var height;var visibleItems=this.visibleItems;this.resetSubgroups();var me=this;if(visibleItems.length){var min=visibleItems[0].top;var max=visibleItems[0].top+visibleItems[0].height;util.forEach(visibleItems,function(item){min=Math.min(min,item.top);max=Math.max(max,item.top+item.height);if(item.data.subgroup!==undefined){me.subgroups[item.data.subgroup].height=Math.max(me.subgroups[item.data.subgroup].height,item.height);me.subgroups[item.data.subgroup].visible=true}});if(min>margin.axis){var offset=min-margin.axis;max-=offset;util.forEach(visibleItems,function(item){item.top-=offset})}height=max+margin.item.vertical/2}else{height=margin.axis+margin.item.vertical}height=Math.max(height,this.props.label.height);return height};Group.prototype.show=function(){if(!this.dom.label.parentNode){this.itemSet.dom.labelSet.appendChild(this.dom.label)}if(!this.dom.foreground.parentNode){this.itemSet.dom.foreground.appendChild(this.dom.foreground)}if(!this.dom.background.parentNode){this.itemSet.dom.background.appendChild(this.dom.background)}if(!this.dom.axis.parentNode){this.itemSet.dom.axis.appendChild(this.dom.axis)}};Group.prototype.hide=function(){var label=this.dom.label;if(label.parentNode){label.parentNode.removeChild(label)}var foreground=this.dom.foreground;if(foreground.parentNode){foreground.parentNode.removeChild(foreground)}var background=this.dom.background;if(background.parentNode){background.parentNode.removeChild(background)}var axis=this.dom.axis;if(axis.parentNode){axis.parentNode.removeChild(axis)}};Group.prototype.add=function(item){this.items[item.id]=item;item.setParent(this);if(item.data.subgroup!==undefined){if(this.subgroups[item.data.subgroup]===undefined){this.subgroups[item.data.subgroup]={height:0,visible:false,index:this.subgroupIndex,items:[]};this.subgroupIndex++}this.subgroups[item.data.subgroup].items.push(item)}this.orderSubgroups();if(this.visibleItems.indexOf(item)==-1){var range=this.itemSet.body.range;this._checkIfVisible(item,this.visibleItems,range)}};Group.prototype.orderSubgroups=function(){if(this.subgroupOrderer!==undefined){var sortArray=[];if(typeof this.subgroupOrderer=="string"){for(var subgroup in this.subgroups){sortArray.push({subgroup:subgroup,sortField:this.subgroups[subgroup].items[0].data[this.subgroupOrderer]})}sortArray.sort(function(a,b){return a.sortField-b.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var subgroup in this.subgroups){sortArray.push(this.subgroups[subgroup].items[0].data)}sortArray.sort(this.subgroupOrderer)}if(sortArray.length>0){for(var i=0;i<sortArray.length;i++){this.subgroups[sortArray[i].subgroup].index=i}}}};Group.prototype.resetSubgroups=function(){for(var subgroup in this.subgroups){if(this.subgroups.hasOwnProperty(subgroup)){this.subgroups[subgroup].visible=false}}};Group.prototype.remove=function(item){delete this.items[item.id];item.setParent(null);var index=this.visibleItems.indexOf(item);if(index!=-1)this.visibleItems.splice(index,1)};Group.prototype.removeFromDataSet=function(item){this.itemSet.removeItem(item.id)};Group.prototype.order=function(){var array=util.toArray(this.items);var startArray=[];var endArray=[];for(var i=0;i<array.length;i++){if(array[i].data.end!==undefined){endArray.push(array[i])}startArray.push(array[i])}this.orderedItems={byStart:startArray,byEnd:endArray};stack.orderByStart(this.orderedItems.byStart);stack.orderByEnd(this.orderedItems.byEnd)};Group.prototype._updateVisibleItems=function(orderedItems,oldVisibleItems,range){var visibleItems=[];var visibleItemsLookup={};var interval=(range.end-range.start)/4;var lowerBound=range.start-interval;var upperBound=range.end+interval;var item,i;var searchFunction=function(value){if(value<lowerBound){return-1}else if(value<=upperBound){return 0}else{return 1}};if(oldVisibleItems.length>0){for(i=0;i<oldVisibleItems.length;i++){this._checkIfVisibleWithReference(oldVisibleItems[i],visibleItems,visibleItemsLookup,range)}}var initialPosByStart=util.binarySearchCustom(orderedItems.byStart,searchFunction,"data","start");this._traceVisible(initialPosByStart,orderedItems.byStart,visibleItems,visibleItemsLookup,function(item){return item.data.start<lowerBound||item.data.start>upperBound});if(this.checkRangedItems==true){this.checkRangedItems=false;for(i=0;i<orderedItems.byEnd.length;i++){this._checkIfVisibleWithReference(orderedItems.byEnd[i],visibleItems,visibleItemsLookup,range)}}else{var initialPosByEnd=util.binarySearchCustom(orderedItems.byEnd,searchFunction,"data","end");this._traceVisible(initialPosByEnd,orderedItems.byEnd,visibleItems,visibleItemsLookup,function(item){return item.data.end<lowerBound||item.data.end>upperBound})}for(i=0;i<visibleItems.length;i++){item=visibleItems[i];if(!item.displayed)item.show();item.repositionX()}return visibleItems};Group.prototype._traceVisible=function(initialPos,items,visibleItems,visibleItemsLookup,breakCondition){var item;var i;if(initialPos!=-1){for(i=initialPos;i>=0;i--){item=items[i];if(breakCondition(item)){break}else{if(visibleItemsLookup[item.id]===undefined){visibleItemsLookup[item.id]=true;visibleItems.push(item)}}}for(i=initialPos+1;i<items.length;i++){item=items[i];if(breakCondition(item)){break}else{if(visibleItemsLookup[item.id]===undefined){visibleItemsLookup[item.id]=true;visibleItems.push(item)}}}}};Group.prototype._checkIfVisible=function(item,visibleItems,range){if(item.isVisible(range)){if(!item.displayed)item.show();item.repositionX();visibleItems.push(item)}else{if(item.displayed)item.hide()}};Group.prototype._checkIfVisibleWithReference=function(item,visibleItems,visibleItemsLookup,range){if(item.isVisible(range)){if(visibleItemsLookup[item.id]===undefined){visibleItemsLookup[item.id]=true;visibleItems.push(item)}}else{if(item.displayed)item.hide()}};module.exports=Group},function(module,exports,__webpack_require__){var EPSILON=.001;exports.orderByStart=function(items){items.sort(function(a,b){return a.data.start-b.data.start})};exports.orderByEnd=function(items){items.sort(function(a,b){var aTime="end"in a.data?a.data.end:a.data.start,bTime="end"in b.data?b.data.end:b.data.start;return aTime-bTime})};exports.stack=function(items,margin,force){var i,iMax;if(force){for(i=0,iMax=items.length;i<iMax;i++){items[i].top=null}}for(i=0,iMax=items.length;i<iMax;i++){var item=items[i];if(item.stack&&item.top===null){item.top=margin.axis;do{var collidingItem=null;for(var j=0,jj=items.length;j<jj;j++){var other=items[j];if(other.top!==null&&other!==item&&other.stack&&exports.collision(item,other,margin.item)){collidingItem=other;break}}if(collidingItem!=null){item.top=collidingItem.top+collidingItem.height+margin.item.vertical}}while(collidingItem)}}};exports.nostack=function(items,margin,subgroups){var i,iMax,newTop;for(i=0,iMax=items.length;i<iMax;i++){if(items[i].data.subgroup!==undefined){newTop=margin.axis;for(var subgroup in subgroups){if(subgroups.hasOwnProperty(subgroup)){if(subgroups[subgroup].visible==true&&subgroups[subgroup].index<subgroups[items[i].data.subgroup].index){newTop+=subgroups[subgroup].height+margin.item.vertical}}}items[i].top=newTop}else{items[i].top=margin.axis}}};exports.collision=function(a,b,margin){return a.left-margin.horizontal+EPSILON<b.left+b.width&&a.left+a.width+margin.horizontal-EPSILON>b.left&&a.top-margin.vertical+EPSILON<b.top+b.height&&a.top+a.height+margin.vertical-EPSILON>b.top}},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(19);var Item=__webpack_require__(30);function RangeItem(data,conversion,options){this.props={content:{width:0}};this.overflow=false;if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data.id)}if(data.end==undefined){throw new Error('Property "end" missing in item '+data.id)}}Item.call(this,data,conversion,options)}RangeItem.prototype=new Item(null,null,null);RangeItem.prototype.baseClassName="item range";RangeItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start};RangeItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.box=document.createElement("div");dom.content=document.createElement("div");dom.content.className="content";dom.box.appendChild(dom.content);dom.box["timeline-item"]=this;this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground){throw new Error("Cannot redraw item: parent has no foreground container element")}foreground.appendChild(dom.box)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.box);this._updateDataAttributes(this.dom.box);this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.box.className=this.baseClassName+className;this.overflow=window.getComputedStyle(dom.content).overflow!=="hidden";this.dom.content.style.maxWidth="none";this.props.content.width=this.dom.content.offsetWidth;this.height=this.dom.box.offsetHeight;this.dom.content.style.maxWidth="";this.dirty=false}this._repaintDeleteButton(dom.box);this._repaintDragLeft();this._repaintDragRight()};RangeItem.prototype.show=function(){if(!this.displayed){this.redraw()}};RangeItem.prototype.hide=function(){if(this.displayed){var box=this.dom.box;if(box.parentNode){box.parentNode.removeChild(box)}this.top=null;this.left=null;this.displayed=false}};RangeItem.prototype.repositionX=function(){var parentWidth=this.parent.width;var start=this.conversion.toScreen(this.data.start);var end=this.conversion.toScreen(this.data.end);var contentLeft;var contentWidth;if(start<-parentWidth){start=-parentWidth}if(end>2*parentWidth){end=2*parentWidth}var boxWidth=Math.max(end-start,1);if(this.overflow){this.left=start;this.width=boxWidth+this.props.content.width;contentWidth=this.props.content.width}else{this.left=start;this.width=boxWidth;contentWidth=Math.min(end-start-2*this.options.padding,this.props.content.width)}this.dom.box.style.left=this.left+"px";this.dom.box.style.width=boxWidth+"px";switch(this.options.align){case"left":this.dom.content.style.left="0";break;case"right":this.dom.content.style.left=Math.max(boxWidth-contentWidth-2*this.options.padding,0)+"px";break;case"center":this.dom.content.style.left=Math.max((boxWidth-contentWidth-2*this.options.padding)/2,0)+"px";break;default:if(this.overflow){if(end>0){contentLeft=Math.max(-start,0)}else{contentLeft=-contentWidth}}else{if(start<0){contentLeft=Math.min(-start,end-start-contentWidth-2*this.options.padding)}else{contentLeft=0}}this.dom.content.style.left=contentLeft+"px"}};RangeItem.prototype.repositionY=function(){var orientation=this.options.orientation,box=this.dom.box;if(orientation=="top"){box.style.top=this.top+"px"}else{box.style.top=this.parent.height-this.top-this.height+"px"}};RangeItem.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var dragLeft=document.createElement("div");dragLeft.className="drag-left";dragLeft.dragLeftItem=this;Hammer(dragLeft,{preventDefault:true}).on("drag",function(){});this.dom.box.appendChild(dragLeft);this.dom.dragLeft=dragLeft}else if(!this.selected&&this.dom.dragLeft){if(this.dom.dragLeft.parentNode){this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft)}this.dom.dragLeft=null}};RangeItem.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var dragRight=document.createElement("div");dragRight.className="drag-right";dragRight.dragRightItem=this;Hammer(dragRight,{preventDefault:true}).on("drag",function(){});this.dom.box.appendChild(dragRight);this.dom.dragRight=dragRight}else if(!this.selected&&this.dom.dragRight){if(this.dom.dragRight.parentNode){this.dom.dragRight.parentNode.removeChild(this.dom.dragRight)}this.dom.dragRight=null}};module.exports=RangeItem},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(19);var util=__webpack_require__(1);function Item(data,conversion,options){this.id=null;this.parent=null;this.data=data;this.dom=null;this.conversion=conversion||{};this.options=options||{};this.selected=false;this.displayed=false;this.dirty=true;this.top=null;this.left=null;this.width=null;this.height=null}Item.prototype.stack=true;Item.prototype.select=function(){this.selected=true;this.dirty=true;if(this.displayed)this.redraw()};Item.prototype.unselect=function(){this.selected=false;this.dirty=true;if(this.displayed)this.redraw()};Item.prototype.setData=function(data){this.data=data;this.dirty=true;if(this.displayed)this.redraw()};Item.prototype.setParent=function(parent){if(this.displayed){this.hide();this.parent=parent;if(this.parent){this.show()}}else{this.parent=parent}};Item.prototype.isVisible=function(range){return false};Item.prototype.show=function(){return false};Item.prototype.hide=function(){return false};Item.prototype.redraw=function(){};Item.prototype.repositionX=function(){};Item.prototype.repositionY=function(){};Item.prototype._repaintDeleteButton=function(anchor){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var me=this;var deleteButton=document.createElement("div");deleteButton.className="delete";deleteButton.title="Delete this item";Hammer(deleteButton,{preventDefault:true}).on("tap",function(event){me.parent.removeFromDataSet(me);event.stopPropagation()});anchor.appendChild(deleteButton);this.dom.deleteButton=deleteButton}else if(!this.selected&&this.dom.deleteButton){if(this.dom.deleteButton.parentNode){this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton)}this.dom.deleteButton=null}};Item.prototype._updateContents=function(element){var content;if(this.options.template){var itemData=this.parent.itemSet.itemsData.get(this.id);content=this.options.template(itemData)}else{content=this.data.content}if(content!==this.content){if(content instanceof Element){element.innerHTML="";element.appendChild(content)}else if(content!=undefined){element.innerHTML=content}else{if(!(this.data.type=="background"&&this.data.content===undefined)){throw new Error('Property "content" missing in item '+this.id)}}this.content=content}};Item.prototype._updateTitle=function(element){if(this.data.title!=null){element.title=this.data.title||""}else{element.removeAttribute("title")}};Item.prototype._updateDataAttributes=function(element){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var attributes=[];if(Array.isArray(this.options.dataAttributes)){attributes=this.options.dataAttributes}else if(this.options.dataAttributes=="all"){attributes=Object.keys(this.data)}else{return}for(var i=0;i<attributes.length;i++){var name=attributes[i];var value=this.data[name];if(value!=null){element.setAttribute("data-"+name,value)}else{element.removeAttribute("data-"+name)}}}};Item.prototype._updateStyle=function(element){if(this.style){util.removeCssText(element,this.style);this.style=null}if(this.data.style){util.addCssText(element,this.data.style);this.style=this.data.style}};module.exports=Item},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Group=__webpack_require__(27);function BackgroundGroup(groupId,data,itemSet){Group.call(this,groupId,data,itemSet);this.width=0;this.height=0;this.top=0;this.left=0}BackgroundGroup.prototype=Object.create(Group.prototype);BackgroundGroup.prototype.redraw=function(range,margin,restack){var resized=false;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range);this.width=this.dom.background.offsetWidth;this.dom.background.style.height="0";for(var i=0,ii=this.visibleItems.length;i<ii;i++){var item=this.visibleItems[i];item.repositionY(margin)}return resized};BackgroundGroup.prototype.show=function(){if(!this.dom.background.parentNode){this.itemSet.dom.background.appendChild(this.dom.background)}};module.exports=BackgroundGroup},function(module,exports,__webpack_require__){var Item=__webpack_require__(30);var util=__webpack_require__(1);function BoxItem(data,conversion,options){this.props={dot:{width:0,height:0},line:{width:0,height:0}};if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data)}}Item.call(this,data,conversion,options)}BoxItem.prototype=new Item(null,null,null);BoxItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval};BoxItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.box=document.createElement("DIV");dom.content=document.createElement("DIV");dom.content.className="content";dom.box.appendChild(dom.content);dom.line=document.createElement("DIV");dom.line.className="line";dom.dot=document.createElement("DIV");dom.dot.className="dot";dom.box["timeline-item"]=this;this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.box)}if(!dom.line.parentNode){var background=this.parent.dom.background;if(!background)throw new Error("Cannot redraw item: parent has no background container element");background.appendChild(dom.line)}if(!dom.dot.parentNode){var axis=this.parent.dom.axis;if(!background)throw new Error("Cannot redraw item: parent has no axis container element");axis.appendChild(dom.dot)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.box);this._updateDataAttributes(this.dom.box);this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.box.className="item box"+className;dom.line.className="item line"+className;dom.dot.className="item dot"+className;this.props.dot.height=dom.dot.offsetHeight;this.props.dot.width=dom.dot.offsetWidth;this.props.line.width=dom.line.offsetWidth;this.width=dom.box.offsetWidth;this.height=dom.box.offsetHeight;this.dirty=false}this._repaintDeleteButton(dom.box)};BoxItem.prototype.show=function(){if(!this.displayed){this.redraw()}};BoxItem.prototype.hide=function(){if(this.displayed){var dom=this.dom;if(dom.box.parentNode)dom.box.parentNode.removeChild(dom.box);if(dom.line.parentNode)dom.line.parentNode.removeChild(dom.line);if(dom.dot.parentNode)dom.dot.parentNode.removeChild(dom.dot);this.top=null;this.left=null;this.displayed=false}};BoxItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start);var align=this.options.align;var left;var box=this.dom.box;var line=this.dom.line;var dot=this.dom.dot;if(align=="right"){this.left=start-this.width}else if(align=="left"){this.left=start}else{this.left=start-this.width/2}box.style.left=this.left+"px";line.style.left=start-this.props.line.width/2+"px";dot.style.left=start-this.props.dot.width/2+"px"};BoxItem.prototype.repositionY=function(){var orientation=this.options.orientation;var box=this.dom.box;var line=this.dom.line;var dot=this.dom.dot;if(orientation=="top"){box.style.top=(this.top||0)+"px";line.style.top="0";line.style.height=this.parent.top+this.top+1+"px";line.style.bottom=""}else{var itemSetHeight=this.parent.itemSet.props.height;var lineHeight=itemSetHeight-this.parent.top-this.parent.height+this.top;box.style.top=(this.parent.height-this.top-this.height||0)+"px";line.style.top=itemSetHeight-lineHeight+"px";line.style.bottom="0"}dot.style.top=-this.props.dot.height/2+"px"};module.exports=BoxItem},function(module,exports,__webpack_require__){var Item=__webpack_require__(30);function PointItem(data,conversion,options){this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}};if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data)}}Item.call(this,data,conversion,options)}PointItem.prototype=new Item(null,null,null);PointItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval};PointItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.point=document.createElement("div");dom.content=document.createElement("div");dom.content.className="content";dom.point.appendChild(dom.content);dom.dot=document.createElement("div");dom.point.appendChild(dom.dot);dom.point["timeline-item"]=this;this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!dom.point.parentNode){var foreground=this.parent.dom.foreground;if(!foreground){throw new Error("Cannot redraw item: parent has no foreground container element")}foreground.appendChild(dom.point)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.point);this._updateDataAttributes(this.dom.point);this._updateStyle(this.dom.point);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.point.className="item point"+className;dom.dot.className="item dot"+className;this.width=dom.point.offsetWidth;this.height=dom.point.offsetHeight;this.props.dot.width=dom.dot.offsetWidth;this.props.dot.height=dom.dot.offsetHeight;this.props.content.height=dom.content.offsetHeight;dom.content.style.marginLeft=2*this.props.dot.width+"px";dom.dot.style.top=(this.height-this.props.dot.height)/2+"px";dom.dot.style.left=this.props.dot.width/2+"px";
this.dirty=false}this._repaintDeleteButton(dom.point)};PointItem.prototype.show=function(){if(!this.displayed){this.redraw()}};PointItem.prototype.hide=function(){if(this.displayed){if(this.dom.point.parentNode){this.dom.point.parentNode.removeChild(this.dom.point)}this.top=null;this.left=null;this.displayed=false}};PointItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start);this.left=start-this.props.dot.width;this.dom.point.style.left=this.left+"px"};PointItem.prototype.repositionY=function(){var orientation=this.options.orientation,point=this.dom.point;if(orientation=="top"){point.style.top=this.top+"px"}else{point.style.top=this.parent.height-this.top-this.height+"px"}};module.exports=PointItem},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(19);var Item=__webpack_require__(30);var BackgroundGroup=__webpack_require__(31);var RangeItem=__webpack_require__(29);function BackgroundItem(data,conversion,options){this.props={content:{width:0}};this.overflow=false;if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data.id)}if(data.end==undefined){throw new Error('Property "end" missing in item '+data.id)}}Item.call(this,data,conversion,options);this.emptyContent=false}BackgroundItem.prototype=new Item(null,null,null);BackgroundItem.prototype.baseClassName="item background";BackgroundItem.prototype.stack=false;BackgroundItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start};BackgroundItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.box=document.createElement("div");dom.content=document.createElement("div");dom.content.className="content";dom.box.appendChild(dom.content);this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!dom.box.parentNode){var background=this.parent.dom.background;if(!background){throw new Error("Cannot redraw item: parent has no background container element")}background.appendChild(dom.box)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.content);this._updateDataAttributes(this.dom.content);this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.box.className=this.baseClassName+className;this.overflow=window.getComputedStyle(dom.content).overflow!=="hidden";this.props.content.width=this.dom.content.offsetWidth;this.height=0;this.dirty=false}};BackgroundItem.prototype.show=RangeItem.prototype.show;BackgroundItem.prototype.hide=RangeItem.prototype.hide;BackgroundItem.prototype.repositionX=RangeItem.prototype.repositionX;BackgroundItem.prototype.repositionY=function(margin){var onTop=this.options.orientation==="top";this.dom.content.style.top=onTop?"":"0";this.dom.content.style.bottom=onTop?"0":"";var height;if(this.data.subgroup!==undefined){var itemSubgroup=this.data.subgroup;var subgroups=this.parent.subgroups;var subgroupIndex=subgroups[itemSubgroup].index;if(onTop==true){height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical;height+=subgroupIndex==0?margin.axis-.5*margin.item.vertical:0;var newTop=this.parent.top;for(var subgroup in subgroups){if(subgroups.hasOwnProperty(subgroup)){if(subgroups[subgroup].visible==true&&subgroups[subgroup].index<subgroupIndex){newTop+=subgroups[subgroup].height+margin.item.vertical}}}newTop+=subgroupIndex!=0?margin.axis-.5*margin.item.vertical:0;this.dom.box.style.top=newTop+"px";this.dom.box.style.bottom=""}else{var newTop=this.parent.top;for(var subgroup in subgroups){if(subgroups.hasOwnProperty(subgroup)){if(subgroups[subgroup].visible==true&&subgroups[subgroup].index>subgroupIndex){newTop+=subgroups[subgroup].height+margin.item.vertical}}}height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical;this.dom.box.style.top=newTop+"px";this.dom.box.style.bottom=""}}else{if(this.parent instanceof BackgroundGroup){height=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height);this.dom.box.style.top=onTop?"0":"";this.dom.box.style.bottom=onTop?"":"0"}else{height=this.parent.height;this.dom.box.style.top=this.parent.top+"px";this.dom.box.style.bottom=""}}this.dom.box.style.height=height+"px"};module.exports=BackgroundItem},function(module,exports,__webpack_require__){var keycharm=__webpack_require__(36);var Emitter=__webpack_require__(11);var Hammer=__webpack_require__(19);var util=__webpack_require__(1);function Activator(container){this.active=false;this.dom={container:container};this.dom.overlay=document.createElement("div");this.dom.overlay.className="overlay";this.dom.container.appendChild(this.dom.overlay);this.hammer=Hammer(this.dom.overlay,{prevent_default:false});this.hammer.on("tap",this._onTapOverlay.bind(this));var me=this;var events=["touch","pinch","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];events.forEach(function(event){me.hammer.on(event,function(event){event.stopPropagation()})});this.windowHammer=Hammer(window,{prevent_default:false});this.windowHammer.on("tap",function(event){if(!_hasParent(event.target,container)){me.deactivate()}});if(this.keycharm!==undefined){this.keycharm.destroy()}this.keycharm=keycharm();this.escListener=this.deactivate.bind(this)}Emitter(Activator.prototype);Activator.current=null;Activator.prototype.destroy=function(){this.deactivate();this.dom.overlay.parentNode.removeChild(this.dom.overlay);this.hammer=null;this.windowHammer=null};Activator.prototype.activate=function(){if(Activator.current){Activator.current.deactivate()}Activator.current=this;this.active=true;this.dom.overlay.style.display="none";util.addClassName(this.dom.container,"vis-active");this.emit("change");this.emit("activate");this.keycharm.bind("esc",this.escListener)};Activator.prototype.deactivate=function(){this.active=false;this.dom.overlay.style.display="";util.removeClassName(this.dom.container,"vis-active");this.keycharm.unbind("esc",this.escListener);this.emit("change");this.emit("deactivate")};Activator.prototype._onTapOverlay=function(event){this.activate();event.stopPropagation()};function _hasParent(element,parent){while(element){if(element===parent){return true}element=element.parentNode}return false}module.exports=Activator},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;"use strict";(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports==="object"){module.exports=factory()}else{root.keycharm=factory()}})(this,function(){function keycharm(options){var preventDefault=options&&options.preventDefault||false;var container=options&&options.container||window;var _exportFunctions={};var _bound={keydown:{},keyup:{}};var _keys={};var i;for(i=97;i<=122;i++){_keys[String.fromCharCode(i)]={code:65+(i-97),shift:false}}for(i=65;i<=90;i++){_keys[String.fromCharCode(i)]={code:i,shift:true}}for(i=0;i<=9;i++){_keys[""+i]={code:48+i,shift:false}}for(i=1;i<=12;i++){_keys["F"+i]={code:111+i,shift:false}}for(i=0;i<=9;i++){_keys["num"+i]={code:96+i,shift:false}}_keys["num*"]={code:106,shift:false};_keys["num+"]={code:107,shift:false};_keys["num-"]={code:109,shift:false};_keys["num/"]={code:111,shift:false};_keys["num."]={code:110,shift:false};_keys["left"]={code:37,shift:false};_keys["up"]={code:38,shift:false};_keys["right"]={code:39,shift:false};_keys["down"]={code:40,shift:false};_keys["space"]={code:32,shift:false};_keys["enter"]={code:13,shift:false};_keys["shift"]={code:16,shift:undefined};_keys["esc"]={code:27,shift:false};_keys["backspace"]={code:8,shift:false};_keys["tab"]={code:9,shift:false};_keys["ctrl"]={code:17,shift:false};_keys["alt"]={code:18,shift:false};_keys["delete"]={code:46,shift:false};_keys["pageup"]={code:33,shift:false};_keys["pagedown"]={code:34,shift:false};_keys["="]={code:187,shift:false};_keys["-"]={code:189,shift:false};_keys["]"]={code:221,shift:false};_keys["["]={code:219,shift:false};var down=function(event){handleEvent(event,"keydown")};var up=function(event){handleEvent(event,"keyup")};var handleEvent=function(event,type){if(_bound[type][event.keyCode]!==undefined){var bound=_bound[type][event.keyCode];for(var i=0;i<bound.length;i++){if(bound[i].shift===undefined){bound[i].fn(event)}else if(bound[i].shift==true&&event.shiftKey==true){bound[i].fn(event)}else if(bound[i].shift==false&&event.shiftKey==false){bound[i].fn(event)}}if(preventDefault==true){event.preventDefault()}}};_exportFunctions.bind=function(key,callback,type){if(type===undefined){type="keydown"}if(_keys[key]===undefined){throw new Error("unsupported key: "+key)}if(_bound[type][_keys[key].code]===undefined){_bound[type][_keys[key].code]=[]}_bound[type][_keys[key].code].push({fn:callback,shift:_keys[key].shift})};_exportFunctions.bindAll=function(callback,type){if(type===undefined){type="keydown"}for(var key in _keys){if(_keys.hasOwnProperty(key)){_exportFunctions.bind(key,callback,type)}}};_exportFunctions.getKey=function(event){for(var key in _keys){if(_keys.hasOwnProperty(key)){if(event.shiftKey==true&&_keys[key].shift==true&&event.keyCode==_keys[key].code){return key}else if(event.shiftKey==false&&_keys[key].shift==false&&event.keyCode==_keys[key].code){return key}else if(event.keyCode==_keys[key].code&&key=="shift"){return key}}}return"unknown key, currently not supported"};_exportFunctions.unbind=function(key,callback,type){if(type===undefined){type="keydown"}if(_keys[key]===undefined){throw new Error("unsupported key: "+key)}if(callback!==undefined){var newBindings=[];var bound=_bound[type][_keys[key].code];if(bound!==undefined){for(var i=0;i<bound.length;i++){if(!(bound[i].fn==callback&&bound[i].shift==_keys[key].shift)){newBindings.push(_bound[type][_keys[key].code][i])}}}_bound[type][_keys[key].code]=newBindings}else{_bound[type][_keys[key].code]=[]}};_exportFunctions.reset=function(){_bound={keydown:{},keyup:{}}};_exportFunctions.destroy=function(){_bound={keydown:{},keyup:{}};container.removeEventListener("keydown",down,true);container.removeEventListener("keyup",up,true)};container.addEventListener("keydown",down,true);container.addEventListener("keyup",up,true);return _exportFunctions}return keycharm})},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Component=__webpack_require__(23);var TimeStep=__webpack_require__(38);var DateUtil=__webpack_require__(24);var moment=__webpack_require__(2);function TimeAxis(body,options){this.dom={foreground:null,majorLines:[],majorTexts:[],minorLines:[],minorTexts:[],redundant:{majorLines:[],majorTexts:[],minorLines:[],minorTexts:[]}};this.props={range:{start:0,end:0,minimumStep:0},lineTop:0};this.defaultOptions={orientation:"bottom",showMinorLabels:true,showMajorLabels:true,showMajorLines:true,showMinorLines:true,format:null};this.options=util.extend({},this.defaultOptions);this.body=body;this._create();this.setOptions(options)}TimeAxis.prototype=new Component;TimeAxis.prototype.setOptions=function(options){if(options){util.selectiveExtend(["orientation","showMinorLabels","showMajorLabels","showMinorLines","showMajorLines","hiddenDates","format"],this.options,options);if("locale"in options){if(typeof moment.locale==="function"){moment.locale(options.locale)}else{moment.lang(options.locale)}}}};TimeAxis.prototype._create=function(){this.dom.foreground=document.createElement("div");this.dom.background=document.createElement("div");this.dom.foreground.className="timeaxis foreground";this.dom.background.className="timeaxis background"};TimeAxis.prototype.destroy=function(){if(this.dom.foreground.parentNode){this.dom.foreground.parentNode.removeChild(this.dom.foreground)}if(this.dom.background.parentNode){this.dom.background.parentNode.removeChild(this.dom.background)}this.body=null};TimeAxis.prototype.redraw=function(){var options=this.options;var props=this.props;var foreground=this.dom.foreground;var background=this.dom.background;var parent=options.orientation=="top"?this.body.dom.top:this.body.dom.bottom;var parentChanged=foreground.parentNode!==parent;this._calculateCharSize();var orientation=this.options.orientation,showMinorLabels=this.options.showMinorLabels,showMajorLabels=this.options.showMajorLabels;props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0;props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0;props.height=props.minorLabelHeight+props.majorLabelHeight;props.width=foreground.offsetWidth;props.minorLineHeight=this.body.domProps.root.height-props.majorLabelHeight-(options.orientation=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height);props.minorLineWidth=1;props.majorLineHeight=props.minorLineHeight+props.majorLabelHeight;props.majorLineWidth=1;var foregroundNextSibling=foreground.nextSibling;var backgroundNextSibling=background.nextSibling;foreground.parentNode&&foreground.parentNode.removeChild(foreground);background.parentNode&&background.parentNode.removeChild(background);foreground.style.height=this.props.height+"px";this._repaintLabels();if(foregroundNextSibling){parent.insertBefore(foreground,foregroundNextSibling)}else{parent.appendChild(foreground)}if(backgroundNextSibling){this.body.dom.backgroundVertical.insertBefore(background,backgroundNextSibling)}else{this.body.dom.backgroundVertical.appendChild(background)}return this._isResized()||parentChanged};TimeAxis.prototype._repaintLabels=function(){var orientation=this.options.orientation;var start=util.convert(this.body.range.start,"Number");var end=util.convert(this.body.range.end,"Number");var timeLabelsize=this.body.util.toTime((this.props.minorCharWidth||10)*7).valueOf();var minimumStep=timeLabelsize-DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this.body.range,timeLabelsize);minimumStep-=this.body.util.toTime(0).valueOf();var step=new TimeStep(new Date(start),new Date(end),minimumStep,this.body.hiddenDates);if(this.options.format){step.setFormat(this.options.format)}this.step=step;var dom=this.dom;dom.redundant.majorLines=dom.majorLines;dom.redundant.majorTexts=dom.majorTexts;dom.redundant.minorLines=dom.minorLines;dom.redundant.minorTexts=dom.minorTexts;dom.majorLines=[];dom.majorTexts=[];dom.minorLines=[];dom.minorTexts=[];step.first();var xFirstMajorLabel=undefined;var max=0;while(step.hasNext()&&max<1e3){max++;var cur=step.getCurrent();var x=this.body.util.toScreen(cur);var isMajor=step.isMajor();if(this.options.showMinorLabels){this._repaintMinorText(x,step.getLabelMinor(),orientation)}if(isMajor&&this.options.showMajorLabels){if(x>0){if(xFirstMajorLabel==undefined){xFirstMajorLabel=x}this._repaintMajorText(x,step.getLabelMajor(),orientation)}if(this.options.showMajorLines==true){this._repaintMajorLine(x,orientation)}}else if(this.options.showMinorLines==true){this._repaintMinorLine(x,orientation)}step.next()}if(this.options.showMajorLabels){var leftTime=this.body.util.toTime(0),leftText=step.getLabelMajor(leftTime),widthText=leftText.length*(this.props.majorCharWidth||10)+10;if(xFirstMajorLabel==undefined||widthText<xFirstMajorLabel){this._repaintMajorText(0,leftText,orientation)}}util.forEach(this.dom.redundant,function(arr){while(arr.length){var elem=arr.pop();if(elem&&elem.parentNode){elem.parentNode.removeChild(elem)}}})};TimeAxis.prototype._repaintMinorText=function(x,text,orientation){var label=this.dom.redundant.minorTexts.shift();if(!label){var content=document.createTextNode("");label=document.createElement("div");label.appendChild(content);label.className="text minor";this.dom.foreground.appendChild(label)}this.dom.minorTexts.push(label);label.childNodes[0].nodeValue=text;label.style.top=orientation=="top"?this.props.majorLabelHeight+"px":"0";label.style.left=x+"px"};TimeAxis.prototype._repaintMajorText=function(x,text,orientation){var label=this.dom.redundant.majorTexts.shift();if(!label){var content=document.createTextNode(text);label=document.createElement("div");label.className="text major";label.appendChild(content);this.dom.foreground.appendChild(label)}this.dom.majorTexts.push(label);label.childNodes[0].nodeValue=text;label.style.top=orientation=="top"?"0":this.props.minorLabelHeight+"px";label.style.left=x+"px"};TimeAxis.prototype._repaintMinorLine=function(x,orientation){var line=this.dom.redundant.minorLines.shift();if(!line){line=document.createElement("div");line.className="grid vertical minor";this.dom.background.appendChild(line)}this.dom.minorLines.push(line);var props=this.props;if(orientation=="top"){line.style.top=props.majorLabelHeight+"px"}else{line.style.top=this.body.domProps.top.height+"px"}line.style.height=props.minorLineHeight+"px";line.style.left=x-props.minorLineWidth/2+"px"};TimeAxis.prototype._repaintMajorLine=function(x,orientation){var line=this.dom.redundant.majorLines.shift();if(!line){line=document.createElement("DIV");line.className="grid vertical major";this.dom.background.appendChild(line)}this.dom.majorLines.push(line);var props=this.props;if(orientation=="top"){line.style.top="0"}else{line.style.top=this.body.domProps.top.height+"px"}line.style.left=x-props.majorLineWidth/2+"px";line.style.height=props.majorLineHeight+"px"};TimeAxis.prototype._calculateCharSize=function(){if(!this.dom.measureCharMinor){this.dom.measureCharMinor=document.createElement("DIV");this.dom.measureCharMinor.className="text minor measure";this.dom.measureCharMinor.style.position="absolute";this.dom.measureCharMinor.appendChild(document.createTextNode("0"));this.dom.foreground.appendChild(this.dom.measureCharMinor)}this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight;this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth;if(!this.dom.measureCharMajor){this.dom.measureCharMajor=document.createElement("DIV");this.dom.measureCharMajor.className="text major measure";this.dom.measureCharMajor.style.position="absolute";this.dom.measureCharMajor.appendChild(document.createTextNode("0"));this.dom.foreground.appendChild(this.dom.measureCharMajor)}this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight;this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};TimeAxis.prototype.snap=function(date){return this.step.snap(date)};module.exports=TimeAxis},function(module,exports,__webpack_require__){var moment=__webpack_require__(2);var DateUtil=__webpack_require__(24);var util=__webpack_require__(1);function TimeStep(start,end,minimumStep,hiddenDates){this.current=new Date;this._start=new Date;this._end=new Date;this.autoScale=true;this.scale="day";this.step=1;this.setRange(start,end,minimumStep);this.switchedDay=false;this.switchedMonth=false;this.switchedYear=false;this.hiddenDates=hiddenDates;if(hiddenDates===undefined){this.hiddenDates=[]}this.format=TimeStep.FORMAT}TimeStep.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}};TimeStep.prototype.setFormat=function(format){var defaultFormat=util.deepExtend({},TimeStep.FORMAT);this.format=util.deepExtend(defaultFormat,format)};TimeStep.prototype.setRange=function(start,end,minimumStep){if(!(start instanceof Date)||!(end instanceof Date)){throw"No legal start or end date in method setRange"}this._start=start!=undefined?new Date(start.valueOf()):new Date;this._end=end!=undefined?new Date(end.valueOf()):new Date;if(this.autoScale){this.setMinimumStep(minimumStep)}};TimeStep.prototype.first=function(){this.current=new Date(this._start.valueOf());this.roundToMinor()};TimeStep.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step));this.current.setMonth(0);case"month":this.current.setDate(1);case"day":case"weekday":this.current.setHours(0);case"hour":this.current.setMinutes(0);case"minute":this.current.setSeconds(0);case"second":this.current.setMilliseconds(0)}if(this.step!=1){switch(this.scale){case"millisecond":this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case"second":this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case"minute":this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case"hour":this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case"weekday":case"day":this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case"month":this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case"year":this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step);break;default:break}}};TimeStep.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()};TimeStep.prototype.next=function(){var prev=this.current.valueOf();if(this.current.getMonth()<6){switch(this.scale){case"millisecond":this.current=new Date(this.current.valueOf()+this.step);break;case"second":this.current=new Date(this.current.valueOf()+this.step*1e3);break;case"minute":this.current=new Date(this.current.valueOf()+this.step*1e3*60);break;case"hour":this.current=new Date(this.current.valueOf()+this.step*1e3*60*60);var h=this.current.getHours();this.current.setHours(h-h%this.step);break;case"weekday":case"day":this.current.setDate(this.current.getDate()+this.step);break;case"month":this.current.setMonth(this.current.getMonth()+this.step);break;case"year":this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break}}else{switch(this.scale){case"millisecond":this.current=new Date(this.current.valueOf()+this.step);break;case"second":this.current.setSeconds(this.current.getSeconds()+this.step);break;case"minute":this.current.setMinutes(this.current.getMinutes()+this.step);break;case"hour":this.current.setHours(this.current.getHours()+this.step);break;case"weekday":case"day":this.current.setDate(this.current.getDate()+this.step);break;case"month":this.current.setMonth(this.current.getMonth()+this.step);break;case"year":this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break}}if(this.step!=1){switch(this.scale){case"millisecond":if(this.current.getMilliseconds()<this.step)this.current.setMilliseconds(0);break;case"second":if(this.current.getSeconds()<this.step)this.current.setSeconds(0);break;case"minute":if(this.current.getMinutes()<this.step)this.current.setMinutes(0);break;case"hour":if(this.current.getHours()<this.step)this.current.setHours(0);break;case"weekday":case"day":if(this.current.getDate()<this.step+1)this.current.setDate(1);break;case"month":if(this.current.getMonth()<this.step)this.current.setMonth(0);break;case"year":break;default:break}}if(this.current.valueOf()==prev){this.current=new Date(this._end.valueOf())}DateUtil.stepOverHiddenDates(this,prev)};TimeStep.prototype.getCurrent=function(){return this.current};TimeStep.prototype.setScale=function(newScale,newStep){this.scale=newScale;if(newStep>0){this.step=newStep}this.autoScale=false};TimeStep.prototype.setAutoScale=function(enable){this.autoScale=enable};TimeStep.prototype.setMinimumStep=function(minimumStep){if(minimumStep==undefined){return}var stepYear=1e3*60*60*24*30*12;var stepMonth=1e3*60*60*24*30;var stepDay=1e3*60*60*24;var stepHour=1e3*60*60;var stepMinute=1e3*60;var stepSecond=1e3;var stepMillisecond=1;if(stepYear*1e3>minimumStep){this.scale="year";this.step=1e3}if(stepYear*500>minimumStep){this.scale="year";this.step=500}if(stepYear*100>minimumStep){this.scale="year";this.step=100}if(stepYear*50>minimumStep){this.scale="year";this.step=50}if(stepYear*10>minimumStep){this.scale="year";this.step=10}if(stepYear*5>minimumStep){this.scale="year";this.step=5}if(stepYear>minimumStep){this.scale="year";this.step=1}if(stepMonth*3>minimumStep){this.scale="month";this.step=3}if(stepMonth>minimumStep){this.scale="month";this.step=1}if(stepDay*5>minimumStep){this.scale="day";this.step=5}if(stepDay*2>minimumStep){this.scale="day";this.step=2}if(stepDay>minimumStep){this.scale="day";this.step=1}if(stepDay/2>minimumStep){this.scale="weekday";this.step=1}if(stepHour*4>minimumStep){this.scale="hour";this.step=4}if(stepHour>minimumStep){this.scale="hour";this.step=1}if(stepMinute*15>minimumStep){this.scale="minute";this.step=15}if(stepMinute*10>minimumStep){this.scale="minute";this.step=10}if(stepMinute*5>minimumStep){this.scale="minute";this.step=5}if(stepMinute>minimumStep){this.scale="minute";this.step=1}if(stepSecond*15>minimumStep){this.scale="second";this.step=15}if(stepSecond*10>minimumStep){this.scale="second";this.step=10}if(stepSecond*5>minimumStep){this.scale="second";this.step=5}if(stepSecond>minimumStep){this.scale="second";this.step=1}if(stepMillisecond*200>minimumStep){this.scale="millisecond";this.step=200}if(stepMillisecond*100>minimumStep){this.scale="millisecond";this.step=100}if(stepMillisecond*50>minimumStep){this.scale="millisecond";this.step=50}if(stepMillisecond*10>minimumStep){this.scale="millisecond";this.step=10}if(stepMillisecond*5>minimumStep){this.scale="millisecond";this.step=5}if(stepMillisecond>minimumStep){this.scale="millisecond";this.step=1}};TimeStep.prototype.snap=function(date){var clone=new Date(date.valueOf());if(this.scale=="year"){var year=clone.getFullYear()+Math.round(clone.getMonth()/12);clone.setFullYear(Math.round(year/this.step)*this.step);clone.setMonth(0);clone.setDate(0);clone.setHours(0);clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0)}else if(this.scale=="month"){if(clone.getDate()>15){clone.setDate(1);clone.setMonth(clone.getMonth()+1)}else{clone.setDate(1)}clone.setHours(0);clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0)}else if(this.scale=="day"){switch(this.step){case 5:case 2:clone.setHours(Math.round(clone.getHours()/24)*24);break;default:clone.setHours(Math.round(clone.getHours()/12)*12);break}clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0)}else if(this.scale=="weekday"){switch(this.step){case 5:case 2:clone.setHours(Math.round(clone.getHours()/12)*12);break;default:clone.setHours(Math.round(clone.getHours()/6)*6);break}clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0)}else if(this.scale=="hour"){switch(this.step){case 4:clone.setMinutes(Math.round(clone.getMinutes()/60)*60);break;default:clone.setMinutes(Math.round(clone.getMinutes()/30)*30);break}clone.setSeconds(0);clone.setMilliseconds(0)}else if(this.scale=="minute"){switch(this.step){case 15:case 10:clone.setMinutes(Math.round(clone.getMinutes()/5)*5);clone.setSeconds(0);break;case 5:clone.setSeconds(Math.round(clone.getSeconds()/60)*60);break;default:clone.setSeconds(Math.round(clone.getSeconds()/30)*30);break}clone.setMilliseconds(0)}else if(this.scale=="second"){switch(this.step){case 15:case 10:clone.setSeconds(Math.round(clone.getSeconds()/5)*5);clone.setMilliseconds(0);break;case 5:clone.setMilliseconds(Math.round(clone.getMilliseconds()/1e3)*1e3);break;default:clone.setMilliseconds(Math.round(clone.getMilliseconds()/500)*500);break}}else if(this.scale=="millisecond"){var step=this.step>5?this.step/2:1;clone.setMilliseconds(Math.round(clone.getMilliseconds()/step)*step)}return clone};TimeStep.prototype.isMajor=function(){if(this.switchedYear==true){this.switchedYear=false;switch(this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return true;default:return false}}else if(this.switchedMonth==true){this.switchedMonth=false;switch(this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return true;default:return false}}else if(this.switchedDay==true){this.switchedDay=false;switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return true;default:return false}}switch(this.scale){case"millisecond":return this.current.getMilliseconds()==0;case"second":return this.current.getSeconds()==0;case"minute":return this.current.getHours()==0&&this.current.getMinutes()==0;case"hour":return this.current.getHours()==0;case"weekday":case"day":return this.current.getDate()==1;case"month":return this.current.getMonth()==0;case"year":return false;default:return false}};TimeStep.prototype.getLabelMinor=function(date){if(date==undefined){date=this.current}var format=this.format.minorLabels[this.scale];return format&&format.length>0?moment(date).format(format):""};TimeStep.prototype.getLabelMajor=function(date){if(date==undefined){date=this.current}var format=this.format.majorLabels[this.scale];return format&&format.length>0?moment(date).format(format):""};module.exports=TimeStep},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Component=__webpack_require__(23);var moment=__webpack_require__(2);var locales=__webpack_require__(40);function CurrentTime(body,options){this.body=body;this.defaultOptions={showCurrentTime:true,locales:locales,locale:"en"};this.options=util.extend({},this.defaultOptions);this.offset=0;this._create();this.setOptions(options)}CurrentTime.prototype=new Component;CurrentTime.prototype._create=function(){var bar=document.createElement("div");bar.className="currenttime";bar.style.position="absolute";bar.style.top="0px";bar.style.height="100%";this.bar=bar};CurrentTime.prototype.destroy=function(){this.options.showCurrentTime=false;this.redraw();this.body=null};CurrentTime.prototype.setOptions=function(options){if(options){util.selectiveExtend(["showCurrentTime","locale","locales"],this.options,options)}};CurrentTime.prototype.redraw=function(){if(this.options.showCurrentTime){var parent=this.body.dom.backgroundVertical;if(this.bar.parentNode!=parent){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}parent.appendChild(this.bar);this.start()}var now=new Date((new Date).valueOf()+this.offset);var x=this.body.util.toScreen(now);var locale=this.options.locales[this.options.locale];var title=locale.current+" "+locale.time+": "+moment(now).format("dddd, MMMM Do YYYY, H:mm:ss");title=title.charAt(0).toUpperCase()+title.substring(1);this.bar.style.left=x+"px";this.bar.title=title}else{if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}this.stop()}return false};CurrentTime.prototype.start=function(){var me=this;function update(){me.stop();var scale=me.body.range.conversion(me.body.domProps.center.width).scale;var interval=1/scale/10;if(interval<30)interval=30;if(interval>1e3)interval=1e3;me.redraw();me.currentTimeTimer=setTimeout(update,interval)}update()};CurrentTime.prototype.stop=function(){if(this.currentTimeTimer!==undefined){clearTimeout(this.currentTimeTimer);delete this.currentTimeTimer}};CurrentTime.prototype.setCurrentTime=function(time){var t=util.convert(time,"Date").valueOf();var now=(new Date).valueOf();this.offset=t-now;this.redraw()};CurrentTime.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)};module.exports=CurrentTime},function(module,exports,__webpack_require__){exports["en"]={current:"current",time:"time"};exports["en_EN"]=exports["en"];exports["en_US"]=exports["en"];exports["nl"]={custom:"aangepaste",time:"tijd"};exports["nl_NL"]=exports["nl"];exports["nl_BE"]=exports["nl"]},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(19);var util=__webpack_require__(1);var Component=__webpack_require__(23);var moment=__webpack_require__(2);var locales=__webpack_require__(40);function CustomTime(body,options){this.body=body;
this.defaultOptions={showCustomTime:false,locales:locales,locale:"en"};this.options=util.extend({},this.defaultOptions);this.customTime=new Date;this.eventParams={};this._create();this.setOptions(options)}CustomTime.prototype=new Component;CustomTime.prototype.setOptions=function(options){if(options){util.selectiveExtend(["showCustomTime","locale","locales"],this.options,options)}};CustomTime.prototype._create=function(){var bar=document.createElement("div");bar.className="customtime";bar.style.position="absolute";bar.style.top="0px";bar.style.height="100%";this.bar=bar;var drag=document.createElement("div");drag.style.position="relative";drag.style.top="0px";drag.style.left="-10px";drag.style.height="100%";drag.style.width="20px";bar.appendChild(drag);this.hammer=Hammer(bar,{prevent_default:true});this.hammer.on("dragstart",this._onDragStart.bind(this));this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this))};CustomTime.prototype.destroy=function(){this.options.showCustomTime=false;this.redraw();this.hammer.enable(false);this.hammer=null;this.body=null};CustomTime.prototype.redraw=function(){if(this.options.showCustomTime){var parent=this.body.dom.backgroundVertical;if(this.bar.parentNode!=parent){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}parent.appendChild(this.bar)}var x=this.body.util.toScreen(this.customTime);var locale=this.options.locales[this.options.locale];var title=locale.time+": "+moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss");title=title.charAt(0).toUpperCase()+title.substring(1);this.bar.style.left=x+"px";this.bar.title=title}else{if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}}return false};CustomTime.prototype.setCustomTime=function(time){this.customTime=util.convert(time,"Date");this.redraw()};CustomTime.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())};CustomTime.prototype._onDragStart=function(event){this.eventParams.dragging=true;this.eventParams.customTime=this.customTime;event.stopPropagation();event.preventDefault()};CustomTime.prototype._onDrag=function(event){if(!this.eventParams.dragging)return;var deltaX=event.gesture.deltaX,x=this.body.util.toScreen(this.eventParams.customTime)+deltaX,time=this.body.util.toTime(x);this.setCustomTime(time);this.body.emitter.emit("timechange",{time:new Date(this.customTime.valueOf())});event.stopPropagation();event.preventDefault()};CustomTime.prototype._onDragEnd=function(event){if(!this.eventParams.dragging)return;this.body.emitter.emit("timechanged",{time:new Date(this.customTime.valueOf())});event.stopPropagation();event.preventDefault()};module.exports=CustomTime},function(module,exports,__webpack_require__){var Emitter=__webpack_require__(11);var Hammer=__webpack_require__(19);var util=__webpack_require__(1);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var Range=__webpack_require__(21);var Core=__webpack_require__(25);var TimeAxis=__webpack_require__(37);var CurrentTime=__webpack_require__(39);var CustomTime=__webpack_require__(41);var LineGraph=__webpack_require__(43);function Graph2d(container,items,groups,options){if(!(Array.isArray(groups)||groups instanceof DataSet)&&groups instanceof Object){var forthArgument=options;options=groups;groups=forthArgument}var me=this;this.defaultOptions={start:null,end:null,autoResize:true,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null};this.options=util.deepExtend({},this.defaultOptions);this._create(container);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{snap:null,toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}};this.range=new Range(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new TimeAxis(this.body);this.components.push(this.timeAxis);this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis);this.currentTime=new CurrentTime(this.body);this.components.push(this.currentTime);this.customTime=new CustomTime(this.body);this.components.push(this.customTime);this.linegraph=new LineGraph(this.body);this.components.push(this.linegraph);this.itemsData=null;this.groupsData=null;if(options){this.setOptions(options)}if(groups){this.setGroups(groups)}if(items){this.setItems(items)}else{this.redraw()}}Graph2d.prototype=new Core;Graph2d.prototype.setItems=function(items){var initialLoad=this.itemsData==null;var newDataSet;if(!items){newDataSet=null}else if(items instanceof DataSet||items instanceof DataView){newDataSet=items}else{newDataSet=new DataSet(items,{type:{start:"Date",end:"Date"}})}this.itemsData=newDataSet;this.linegraph&&this.linegraph.setItems(newDataSet);if(initialLoad){if(this.options.start!=undefined||this.options.end!=undefined){var start=this.options.start!=undefined?this.options.start:null;var end=this.options.end!=undefined?this.options.end:null;this.setWindow(start,end,{animate:false})}else{this.fit({animate:false})}}};Graph2d.prototype.setGroups=function(groups){var newDataSet;if(!groups){newDataSet=null}else if(groups instanceof DataSet||groups instanceof DataView){newDataSet=groups}else{newDataSet=new DataSet(groups)}this.groupsData=newDataSet;this.linegraph.setGroups(newDataSet)};Graph2d.prototype.getLegend=function(groupId,width,height){if(width===undefined){width=15}if(height===undefined){height=15}if(this.linegraph.groups[groupId]!==undefined){return this.linegraph.groups[groupId].getLegend(width,height)}else{return"cannot find group:"+groupId}};Graph2d.prototype.isGroupVisible=function(groupId){if(this.linegraph.groups[groupId]!==undefined){return this.linegraph.groups[groupId].visible&&(this.linegraph.options.groups.visibility[groupId]===undefined||this.linegraph.options.groups.visibility[groupId]==true)}else{return false}};Graph2d.prototype.getItemRange=function(){var min=null;var max=null;for(var groupId in this.linegraph.groups){if(this.linegraph.groups.hasOwnProperty(groupId)){if(this.linegraph.groups[groupId].visible==true){for(var i=0;i<this.linegraph.groups[groupId].itemsData.length;i++){var item=this.linegraph.groups[groupId].itemsData[i];var value=util.convert(item.x,"Date").valueOf();min=min==null?value:min>value?value:min;max=max==null?value:max<value?value:max}}}}return{min:min!=null?new Date(min):null,max:max!=null?new Date(max):null}};module.exports=Graph2d},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var DOMutil=__webpack_require__(6);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var Component=__webpack_require__(23);var DataAxis=__webpack_require__(44);var GraphGroup=__webpack_require__(46);var Legend=__webpack_require__(50);var BarGraphFunctions=__webpack_require__(49);var UNGROUPED="__ungrouped__";function LineGraph(body,options){this.id=util.randomUUID();this.body=body;this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:true,sampling:true,graphHeight:"400px",shaded:{enabled:false,orientation:"bottom"},style:"line",barChart:{width:50,handleOverlap:"overlap",align:"center"},catmullRom:{enabled:true,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:true,size:6,style:"square"},dataAxis:{showMinorLabels:true,showMajorLabels:true,showMinorLines:true,showMajorLines:true,icons:false,width:"40px",visible:true,alignZeros:true,customRange:{left:{min:undefined,max:undefined},right:{min:undefined,max:undefined}}},legend:{enabled:false,icons:true,left:{visible:true,position:"top-left"},right:{visible:true,position:"top-right"}},groups:{visibility:{}}};this.options=util.extend({},this.defaultOptions);this.dom={};this.props={};this.hammer=null;this.groups={};this.abortedGraphUpdate=false;this.autoSizeSVG=false;var me=this;this.itemsData=null;this.groupsData=null;this.itemListeners={add:function(event,params,senderId){me._onAdd(params.items)},update:function(event,params,senderId){me._onUpdate(params.items)},remove:function(event,params,senderId){me._onRemove(params.items)}};this.groupListeners={add:function(event,params,senderId){me._onAddGroups(params.items)},update:function(event,params,senderId){me._onUpdateGroups(params.items)},remove:function(event,params,senderId){me._onRemoveGroups(params.items)}};this.items={};this.selection=[];this.lastStart=this.body.range.start;this.touchParams={};this.svgElements={};this.setOptions(options);this.groupsUsingDefaultStyles=[0];this.COUNTER=0;this.body.emitter.on("rangechanged",function(){me.lastStart=me.body.range.start;me.svg.style.left=util.option.asSize(-me.props.width);me.redraw.call(me,true)});this._create();this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};this.body.emitter.emit("change")}LineGraph.prototype=new Component;LineGraph.prototype._create=function(){var frame=document.createElement("div");frame.className="LineGraph";this.dom.frame=frame;this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="relative";this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px";this.svg.style.display="block";frame.appendChild(this.svg);this.options.dataAxis.orientation="left";this.yAxisLeft=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups);this.options.dataAxis.orientation="right";this.yAxisRight=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups);delete this.options.dataAxis.orientation;this.legendLeft=new Legend(this.body,this.options.legend,"left",this.options.groups);this.legendRight=new Legend(this.body,this.options.legend,"right",this.options.groups);this.show()};LineGraph.prototype.setOptions=function(options){if(options){var fields=["sampling","defaultGroup","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];if(options.graphHeight===undefined&&options.height!==undefined&&this.body.domProps.centerContainer.height!==undefined){this.autoSizeSVG=true}else if(this.body.domProps.centerContainer.height!==undefined&&options.graphHeight!==undefined){if(parseInt((options.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height){this.autoSizeSVG=true}}util.selectiveDeepExtend(fields,this.options,options);util.mergeOptions(this.options,options,"catmullRom");util.mergeOptions(this.options,options,"drawPoints");util.mergeOptions(this.options,options,"shaded");util.mergeOptions(this.options,options,"legend");if(options.catmullRom){if(typeof options.catmullRom=="object"){if(options.catmullRom.parametrization){if(options.catmullRom.parametrization=="uniform"){this.options.catmullRom.alpha=0}else if(options.catmullRom.parametrization=="chordal"){this.options.catmullRom.alpha=1}else{this.options.catmullRom.parametrization="centripetal";this.options.catmullRom.alpha=.5}}}}if(this.yAxisLeft){if(options.dataAxis!==undefined){this.yAxisLeft.setOptions(this.options.dataAxis);this.yAxisRight.setOptions(this.options.dataAxis)}}if(this.legendLeft){if(options.legend!==undefined){this.legendLeft.setOptions(this.options.legend);this.legendRight.setOptions(this.options.legend)}}if(this.groups.hasOwnProperty(UNGROUPED)){this.groups[UNGROUPED].setOptions(options)}}if(this.dom.frame){this.redraw(true)}};LineGraph.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}};LineGraph.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame)}};LineGraph.prototype.setItems=function(items){var me=this,ids,oldItemsData=this.itemsData;if(!items){this.itemsData=null}else if(items instanceof DataSet||items instanceof DataView){this.itemsData=items}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(oldItemsData){util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback)});ids=oldItemsData.getIds();this._onRemove(ids)}if(this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id)});ids=this.itemsData.getIds();this._onAdd(ids)}this._updateUngrouped();this.redraw(true)};LineGraph.prototype.setGroups=function(groups){var me=this;var ids;if(this.groupsData){util.forEach(this.groupListeners,function(callback,event){me.groupsData.unsubscribe(event,callback)});ids=this.groupsData.getIds();this.groupsData=null;this._onRemoveGroups(ids)}if(!groups){this.groupsData=null}else if(groups instanceof DataSet||groups instanceof DataView){this.groupsData=groups}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id)});ids=this.groupsData.getIds();this._onAddGroups(ids)}this._onUpdate()};LineGraph.prototype._onUpdate=function(ids){this._updateUngrouped();this._updateAllGroupData();this.redraw(true)};LineGraph.prototype._onAdd=function(ids){this._onUpdate(ids)};LineGraph.prototype._onRemove=function(ids){this._onUpdate(ids)};LineGraph.prototype._onUpdateGroups=function(groupIds){for(var i=0;i<groupIds.length;i++){var group=this.groupsData.get(groupIds[i]);this._updateGroup(group,groupIds[i])}this.redraw(true)};LineGraph.prototype._onAddGroups=function(groupIds){this._onUpdateGroups(groupIds)};LineGraph.prototype._onRemoveGroups=function(groupIds){for(var i=0;i<groupIds.length;i++){if(this.groups.hasOwnProperty(groupIds[i])){if(this.groups[groupIds[i]].options.yAxisOrientation=="right"){this.yAxisRight.removeGroup(groupIds[i]);this.legendRight.removeGroup(groupIds[i]);this.legendRight.redraw()}else{this.yAxisLeft.removeGroup(groupIds[i]);this.legendLeft.removeGroup(groupIds[i]);this.legendLeft.redraw()}delete this.groups[groupIds[i]]}}this._updateUngrouped();this.redraw(true)};LineGraph.prototype._updateGroup=function(group,groupId){if(!this.groups.hasOwnProperty(groupId)){this.groups[groupId]=new GraphGroup(group,groupId,this.options,this.groupsUsingDefaultStyles);if(this.groups[groupId].options.yAxisOrientation=="right"){this.yAxisRight.addGroup(groupId,this.groups[groupId]);this.legendRight.addGroup(groupId,this.groups[groupId])}else{this.yAxisLeft.addGroup(groupId,this.groups[groupId]);this.legendLeft.addGroup(groupId,this.groups[groupId])}}else{this.groups[groupId].update(group);if(this.groups[groupId].options.yAxisOrientation=="right"){this.yAxisRight.updateGroup(groupId,this.groups[groupId]);this.legendRight.updateGroup(groupId,this.groups[groupId])}else{this.yAxisLeft.updateGroup(groupId,this.groups[groupId]);this.legendLeft.updateGroup(groupId,this.groups[groupId])}}this.legendLeft.redraw();this.legendRight.redraw()};LineGraph.prototype._updateAllGroupData=function(){if(this.itemsData!=null){var groupsContent={};var groupId;for(groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){groupsContent[groupId]=[]}}for(var itemId in this.itemsData._data){if(this.itemsData._data.hasOwnProperty(itemId)){var item=this.itemsData._data[itemId];if(groupsContent[item.group]===undefined){throw new Error("Cannot find referenced group. Possible reason: items added before groups? Groups need to be added before items, as items refer to groups.")}item.x=util.convert(item.x,"Date");groupsContent[item.group].push(item)}}for(groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){this.groups[groupId].setItems(groupsContent[groupId])}}}};LineGraph.prototype._updateUngrouped=function(){if(this.itemsData&&this.itemsData!=null){var ungroupedCounter=0;for(var itemId in this.itemsData._data){if(this.itemsData._data.hasOwnProperty(itemId)){var item=this.itemsData._data[itemId];if(item!=undefined){if(item.hasOwnProperty("group")){if(item.group===undefined){item.group=UNGROUPED}}else{item.group=UNGROUPED}ungroupedCounter=item.group==UNGROUPED?ungroupedCounter+1:ungroupedCounter}}}if(ungroupedCounter==0){delete this.groups[UNGROUPED];this.legendLeft.removeGroup(UNGROUPED);this.legendRight.removeGroup(UNGROUPED);this.yAxisLeft.removeGroup(UNGROUPED);this.yAxisRight.removeGroup(UNGROUPED)}else{var group={id:UNGROUPED,content:this.options.defaultGroup};this._updateGroup(group,UNGROUPED)}}else{delete this.groups[UNGROUPED];this.legendLeft.removeGroup(UNGROUPED);this.legendRight.removeGroup(UNGROUPED);this.yAxisLeft.removeGroup(UNGROUPED);this.yAxisRight.removeGroup(UNGROUPED)}this.legendLeft.redraw();this.legendRight.redraw()};LineGraph.prototype.redraw=function(forceGraphUpdate){var resized=false;this.props.width=this.dom.frame.offsetWidth;this.props.height=this.body.domProps.centerContainer.height;if(this.lastWidth===undefined&&this.props.width){forceGraphUpdate=true}resized=this._isResized()||resized;var visibleInterval=this.body.range.end-this.body.range.start;var zoomed=visibleInterval!=this.lastVisibleInterval;this.lastVisibleInterval=visibleInterval;if(resized==true){this.svg.style.width=util.option.asSize(3*this.props.width);this.svg.style.left=util.option.asSize(-this.props.width);if((this.options.height+"").indexOf("%")!=-1){this.autoSizeSVG=true}}if(this.autoSizeSVG==true){if(this.options.graphHeight!=this.body.domProps.centerContainer.height+"px"){this.options.graphHeight=this.body.domProps.centerContainer.height+"px";this.svg.style.height=this.body.domProps.centerContainer.height+"px"}this.autoSizeSVG=false}else{this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px"}if(resized==true||zoomed==true||this.abortedGraphUpdate==true||forceGraphUpdate==true){resized=this._updateGraph()||resized}else{if(this.lastStart!=0){var offset=this.body.range.start-this.lastStart;var range=this.body.range.end-this.body.range.start;if(this.props.width!=0){var rangePerPixelInv=this.props.width/range;var xOffset=offset*rangePerPixelInv;this.svg.style.left=-this.props.width-xOffset+"px"}}}this.legendLeft.redraw();this.legendRight.redraw();return resized};LineGraph.prototype._updateGraph=function(){DOMutil.prepareElements(this.svgElements);if(this.props.width!=0&&this.itemsData!=null){var group,i;var preprocessedGroupData={};var processedGroupData={};var groupRanges={};var changeCalled=false;var groupIds=[];for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){group=this.groups[groupId];if(group.visible==true&&(this.options.groups.visibility[groupId]===undefined||this.options.groups.visibility[groupId]==true)){groupIds.push(groupId)}}}if(groupIds.length>0){var minDate=this.body.util.toGlobalTime(-this.body.domProps.root.width);var maxDate=this.body.util.toGlobalTime(2*this.body.domProps.root.width);var groupsData={};this._getRelevantData(groupIds,groupsData,minDate,maxDate);this._applySampling(groupIds,groupsData);for(i=0;i<groupIds.length;i++){preprocessedGroupData[groupIds[i]]=this._convertXcoordinates(groupsData[groupIds[i]])}this._getYRanges(groupIds,preprocessedGroupData,groupRanges);changeCalled=this._updateYAxis(groupIds,groupRanges);var MAX_CYCLES=5;if(changeCalled==true&&this.COUNTER<MAX_CYCLES){DOMutil.cleanupElements(this.svgElements);this.abortedGraphUpdate=true;this.COUNTER++;this.body.emitter.emit("change");return true}else{if(this.COUNTER>MAX_CYCLES){console.log("WARNING: there may be an infinite loop in the _updateGraph emitter cycle.")}this.COUNTER=0;this.abortedGraphUpdate=false;for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];processedGroupData[groupIds[i]]=this._convertYcoordinates(groupsData[groupIds[i]],group)}for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];if(group.options.style!="bar"){group.draw(processedGroupData[groupIds[i]],group,this.framework)}}BarGraphFunctions.draw(groupIds,processedGroupData,this.framework)}}}DOMutil.cleanupElements(this.svgElements);return false};LineGraph.prototype._getRelevantData=function(groupIds,groupsData,minDate,maxDate){var group,i,j,item;if(groupIds.length>0){for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];groupsData[groupIds[i]]=[];var dataContainer=groupsData[groupIds[i]];if(group.options.sort==true){var guess=Math.max(0,util.binarySearchValue(group.itemsData,minDate,"x","before"));for(j=guess;j<group.itemsData.length;j++){item=group.itemsData[j];if(item!==undefined){if(item.x>maxDate){dataContainer.push(item);break}else{dataContainer.push(item)}}}}else{for(j=0;j<group.itemsData.length;j++){item=group.itemsData[j];if(item!==undefined){if(item.x>minDate&&item.x<maxDate){dataContainer.push(item)}}}}}}};LineGraph.prototype._applySampling=function(groupIds,groupsData){var group;if(groupIds.length>0){for(var i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];if(group.options.sampling==true){var dataContainer=groupsData[groupIds[i]];if(dataContainer.length>0){var increment=1;var amountOfPoints=dataContainer.length;var xDistance=this.body.util.toGlobalScreen(dataContainer[dataContainer.length-1].x)-this.body.util.toGlobalScreen(dataContainer[0].x);var pointsPerPixel=amountOfPoints/xDistance;increment=Math.min(Math.ceil(.2*amountOfPoints),Math.max(1,Math.round(pointsPerPixel)));var sampledData=[];for(var j=0;j<amountOfPoints;j+=increment){sampledData.push(dataContainer[j])}groupsData[groupIds[i]]=sampledData}}}}};LineGraph.prototype._getYRanges=function(groupIds,groupsData,groupRanges){var groupData,group,i;var barCombinedDataLeft=[];var barCombinedDataRight=[];var options;if(groupIds.length>0){for(i=0;i<groupIds.length;i++){groupData=groupsData[groupIds[i]];options=this.groups[groupIds[i]].options;if(groupData.length>0){group=this.groups[groupIds[i]];if(options.barChart.handleOverlap=="stack"&&options.style=="bar"){if(options.yAxisOrientation=="left"){barCombinedDataLeft=barCombinedDataLeft.concat(group.getYRange(groupData))}else{barCombinedDataRight=barCombinedDataRight.concat(group.getYRange(groupData))}}else{groupRanges[groupIds[i]]=group.getYRange(groupData,groupIds[i])}}}BarGraphFunctions.getStackedBarYRange(barCombinedDataLeft,groupRanges,groupIds,"__barchartLeft","left");BarGraphFunctions.getStackedBarYRange(barCombinedDataRight,groupRanges,groupIds,"__barchartRight","right")}};LineGraph.prototype._updateYAxis=function(groupIds,groupRanges){var changeCalled=false;var yAxisLeftUsed=false;var yAxisRightUsed=false;var minLeft=1e9,minRight=1e9,maxLeft=-1e9,maxRight=-1e9,minVal,maxVal;if(groupIds.length>0){for(var i=0;i<groupIds.length;i++){var group=this.groups[groupIds[i]];if(group&&group.options.yAxisOrientation=="left"){yAxisLeftUsed=true;minLeft=0;maxLeft=0}else{yAxisRightUsed=true;minRight=0;maxRight=0}}for(var i=0;i<groupIds.length;i++){if(groupRanges.hasOwnProperty(groupIds[i])){if(groupRanges[groupIds[i]].ignore!==true){minVal=groupRanges[groupIds[i]].min;maxVal=groupRanges[groupIds[i]].max;if(groupRanges[groupIds[i]].yAxisOrientation=="left"){yAxisLeftUsed=true;minLeft=minLeft>minVal?minVal:minLeft;maxLeft=maxLeft<maxVal?maxVal:maxLeft}else{yAxisRightUsed=true;minRight=minRight>minVal?minVal:minRight;maxRight=maxRight<maxVal?maxVal:maxRight}}}}if(yAxisLeftUsed==true){this.yAxisLeft.setRange(minLeft,maxLeft)}if(yAxisRightUsed==true){this.yAxisRight.setRange(minRight,maxRight)}}changeCalled=this._toggleAxisVisiblity(yAxisLeftUsed,this.yAxisLeft)||changeCalled;changeCalled=this._toggleAxisVisiblity(yAxisRightUsed,this.yAxisRight)||changeCalled;if(yAxisRightUsed==true&&yAxisLeftUsed==true){this.yAxisLeft.drawIcons=true;this.yAxisRight.drawIcons=true}else{this.yAxisLeft.drawIcons=false;this.yAxisRight.drawIcons=false}this.yAxisRight.master=!yAxisLeftUsed;if(this.yAxisRight.master==false){if(yAxisRightUsed==true){this.yAxisLeft.lineOffset=this.yAxisRight.width}else{this.yAxisLeft.lineOffset=0}changeCalled=this.yAxisLeft.redraw()||changeCalled;this.yAxisRight.stepPixelsForced=this.yAxisLeft.stepPixels;this.yAxisRight.zeroCrossing=this.yAxisLeft.zeroCrossing;changeCalled=this.yAxisRight.redraw()||changeCalled}else{changeCalled=this.yAxisRight.redraw()||changeCalled}if(groupIds.indexOf("__barchartLeft")!=-1){groupIds.splice(groupIds.indexOf("__barchartLeft"),1)}if(groupIds.indexOf("__barchartRight")!=-1){groupIds.splice(groupIds.indexOf("__barchartRight"),1)}return changeCalled};LineGraph.prototype._toggleAxisVisiblity=function(axisUsed,axis){var changed=false;if(axisUsed==false){if(axis.dom.frame.parentNode&&axis.hidden==false){axis.hide();changed=true}}else{if(!axis.dom.frame.parentNode&&axis.hidden==true){axis.show();changed=true}}return changed};LineGraph.prototype._convertXcoordinates=function(datapoints){var extractedData=[];var xValue,yValue;var toScreen=this.body.util.toScreen;for(var i=0;i<datapoints.length;i++){xValue=toScreen(datapoints[i].x)+this.props.width;yValue=datapoints[i].y;extractedData.push({x:xValue,y:yValue})}return extractedData};LineGraph.prototype._convertYcoordinates=function(datapoints,group){var extractedData=[];var xValue,yValue;var toScreen=this.body.util.toScreen;var axis=this.yAxisLeft;var svgHeight=Number(this.svg.style.height.replace("px",""));if(group.options.yAxisOrientation=="right"){axis=this.yAxisRight}for(var i=0;i<datapoints.length;i++){xValue=toScreen(datapoints[i].x)+this.props.width;yValue=Math.round(axis.convertValue(datapoints[i].y));extractedData.push({x:xValue,y:yValue})}group.setZeroPosition(Math.min(svgHeight,axis.convertValue(0)));return extractedData};module.exports=LineGraph},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var DOMutil=__webpack_require__(6);var Component=__webpack_require__(23);var DataStep=__webpack_require__(45);function DataAxis(body,options,svg,linegraphOptions){this.id=util.randomUUID();this.body=body;this.defaultOptions={orientation:"left",showMinorLabels:true,showMajorLabels:true,showMinorLines:true,showMajorLines:true,icons:true,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:true,alignZeros:true,customRange:{left:{min:undefined,max:undefined},right:{min:undefined,max:undefined}},title:{left:{text:undefined},right:{text:undefined}},format:{left:{decimals:undefined},right:{decimals:undefined}}};this.linegraphOptions=linegraphOptions;this.linegraphSVG=svg;this.props={};this.DOMelements={lines:{},labels:{},title:{}};this.dom={};this.range={start:0,end:0};this.options=util.extend({},this.defaultOptions);this.conversionFactor=1;this.setOptions(options);this.width=Number((""+this.options.width).replace("px",""));this.minWidth=this.width;this.height=this.linegraphSVG.offsetHeight;this.hidden=false;this.stepPixels=25;this.stepPixelsForced=25;this.zeroCrossing=-1;this.lineOffset=0;this.master=true;this.svgElements={};this.iconsRemoved=false;this.groups={};this.amountOfGroups=0;this._create();var me=this;this.body.emitter.on("verticalDrag",function(){me.dom.lineContainer.style.top=me.body.domProps.scrollTop+"px"})}DataAxis.prototype=new Component;DataAxis.prototype.addGroup=function(label,graphOptions){if(!this.groups.hasOwnProperty(label)){this.groups[label]=graphOptions}this.amountOfGroups+=1};DataAxis.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions};DataAxis.prototype.removeGroup=function(label){if(this.groups.hasOwnProperty(label)){delete this.groups[label];this.amountOfGroups-=1}};DataAxis.prototype.setOptions=function(options){if(options){var redraw=false;if(this.options.orientation!=options.orientation&&options.orientation!==undefined){redraw=true}var fields=["orientation","showMinorLabels","showMajorLabels","showMajorLines","showMinorLines","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","customRange","title","format","alignZeros"];util.selectiveExtend(fields,this.options,options);this.minWidth=Number((""+this.options.width).replace("px",""));if(redraw==true&&this.dom.frame){this.hide();this.show()}}};DataAxis.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.style.width=this.options.width;this.dom.frame.style.height=this.height;this.dom.lineContainer=document.createElement("div");this.dom.lineContainer.style.width="100%";this.dom.lineContainer.style.height=this.height;this.dom.lineContainer.style.position="relative";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top="0px";this.svg.style.height="100%";this.svg.style.width="100%";this.svg.style.display="block";this.dom.frame.appendChild(this.svg)};DataAxis.prototype._redrawGroupIcons=function(){DOMutil.prepareElements(this.svgElements);var x;var iconWidth=this.options.iconWidth;var iconHeight=15;var iconOffset=4;var y=iconOffset+.5*iconHeight;if(this.options.orientation=="left"){x=iconOffset}else{x=this.width-iconWidth-iconOffset}for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){this.groups[groupId].drawIcon(x,y,this.svgElements,this.svg,iconWidth,iconHeight);y+=iconHeight+iconOffset}}}DOMutil.cleanupElements(this.svgElements);this.iconsRemoved=false};DataAxis.prototype._cleanupIcons=function(){if(this.iconsRemoved==false){DOMutil.prepareElements(this.svgElements);DOMutil.cleanupElements(this.svgElements);this.iconsRemoved=true}};DataAxis.prototype.show=function(){this.hidden=false;if(!this.dom.frame.parentNode){if(this.options.orientation=="left"){this.body.dom.left.appendChild(this.dom.frame)}else{this.body.dom.right.appendChild(this.dom.frame)}}if(!this.dom.lineContainer.parentNode){this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)}};DataAxis.prototype.hide=function(){this.hidden=true;if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}if(this.dom.lineContainer.parentNode){this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)}};DataAxis.prototype.setRange=function(start,end){if(this.master==false&&this.options.alignZeros==true&&this.zeroCrossing!=-1){if(start>0){start=0}}this.range.start=start;this.range.end=end};DataAxis.prototype.redraw=function(){var changeCalled=false;var activeGroups=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){activeGroups++}}}if(this.amountOfGroups==0||activeGroups==0){this.hide()}else{this.show();this.height=Number(this.linegraphSVG.style.height.replace("px",""));this.dom.lineContainer.style.height=this.height+"px";this.width=this.options.visible==true?Number((""+this.options.width).replace("px","")):0;var props=this.props;var frame=this.dom.frame;frame.className="dataaxis";this._calculateCharSize();var orientation=this.options.orientation;var showMinorLabels=this.options.showMinorLabels;var showMajorLabels=this.options.showMajorLabels;props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0;props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0;props.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset;props.minorLineHeight=1;props.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset;props.majorLineHeight=1;if(orientation=="left"){frame.style.top="0";frame.style.left="0";frame.style.bottom="";frame.style.width=this.width+"px";frame.style.height=this.height+"px"}else{frame.style.top="";frame.style.bottom="0";frame.style.left="0";frame.style.width=this.width+"px";frame.style.height=this.height+"px"}changeCalled=this._redrawLabels();if(this.options.icons==true){this._redrawGroupIcons()}else{this._cleanupIcons()}this._redrawTitle(orientation)}return changeCalled};DataAxis.prototype._redrawLabels=function(){DOMutil.prepareElements(this.DOMelements.lines);DOMutil.prepareElements(this.DOMelements.labels);var orientation=this.options["orientation"];
var minimumStep=this.master?this.props.majorCharHeight||10:this.stepPixelsForced;var step=new DataStep(this.range.start,this.range.end,minimumStep,this.dom.frame.offsetHeight,this.options.customRange[this.options.orientation],this.master==false&&this.options.alignZeros);this.step=step;var stepPixels=(this.dom.frame.offsetHeight-step.deadSpace*(this.dom.frame.offsetHeight/step.marginRange))/((step.marginRange-step.deadSpace)/step.step);this.stepPixels=stepPixels;var amountOfSteps=this.height/stepPixels;var stepDifference=0;if(this.master==false){stepPixels=this.stepPixelsForced;stepDifference=Math.round(this.dom.frame.offsetHeight/stepPixels-amountOfSteps);for(var i=0;i<.5*stepDifference;i++){step.previous()}amountOfSteps=this.height/stepPixels;if(this.zeroCrossing!=-1&&this.options.alignZeros==true){var zeroStepDifference=step.marginEnd/step.step-this.zeroCrossing;if(zeroStepDifference>0){for(var i=0;i<zeroStepDifference;i++){step.next()}}else if(zeroStepDifference<0){for(var i=0;i<-zeroStepDifference;i++){step.previous()}}}}else{amountOfSteps+=.25}this.valueAtZero=step.marginEnd;var marginStartPos=0;var max=1;var decimals;if(this.options.format[orientation]!==undefined){decimals=this.options.format[orientation].decimals}this.maxLabelSize=0;var y=0;while(max<Math.round(amountOfSteps)){step.next();y=Math.round(max*stepPixels);marginStartPos=max*stepPixels;var isMajor=step.isMajor();if(this.options["showMinorLabels"]&&isMajor==false||this.master==false&&this.options["showMinorLabels"]==true){this._redrawLabel(y-2,step.getCurrent(decimals),orientation,"yAxis minor",this.props.minorCharHeight)}if(isMajor&&this.options["showMajorLabels"]&&this.master==true||this.options["showMinorLabels"]==false&&this.master==false&&isMajor==true){if(y>=0){this._redrawLabel(y-2,step.getCurrent(decimals),orientation,"yAxis major",this.props.majorCharHeight)}if(this.options.showMajorLines==true){this._redrawLine(y,orientation,"grid horizontal major",this.options.majorLinesOffset,this.props.majorLineWidth)}}else if(this.options.showMinorLines==true){this._redrawLine(y,orientation,"grid horizontal minor",this.options.minorLinesOffset,this.props.minorLineWidth)}if(this.master==true&&step.current==0){this.zeroCrossing=max}max++}if(this.master==false){this.conversionFactor=y/(this.valueAtZero-step.current)}else{this.conversionFactor=this.dom.frame.offsetHeight/step.marginRange}var titleWidth=0;if(this.options.title[orientation]!==undefined&&this.options.title[orientation].text!==undefined){titleWidth=this.props.titleCharHeight}var offset=this.options.icons==true?Math.max(this.options.iconWidth,titleWidth)+this.options.labelOffsetX+15:titleWidth+this.options.labelOffsetX+15;if(this.maxLabelSize>this.width-offset&&this.options.visible==true){this.width=this.maxLabelSize+offset;this.options.width=this.width+"px";DOMutil.cleanupElements(this.DOMelements.lines);DOMutil.cleanupElements(this.DOMelements.labels);this.redraw();return true}else if(this.maxLabelSize<this.width-offset&&this.options.visible==true&&this.width>this.minWidth){this.width=Math.max(this.minWidth,this.maxLabelSize+offset);this.options.width=this.width+"px";DOMutil.cleanupElements(this.DOMelements.lines);DOMutil.cleanupElements(this.DOMelements.labels);this.redraw();return true}else{DOMutil.cleanupElements(this.DOMelements.lines);DOMutil.cleanupElements(this.DOMelements.labels);return false}};DataAxis.prototype.convertValue=function(value){var invertedValue=this.valueAtZero-value;var convertedValue=invertedValue*this.conversionFactor;return convertedValue};DataAxis.prototype._redrawLabel=function(y,text,orientation,className,characterHeight){var label=DOMutil.getDOMElement("div",this.DOMelements.labels,this.dom.frame);label.className=className;label.innerHTML=text;if(orientation=="left"){label.style.left="-"+this.options.labelOffsetX+"px";label.style.textAlign="right"}else{label.style.right="-"+this.options.labelOffsetX+"px";label.style.textAlign="left"}label.style.top=y-.5*characterHeight+this.options.labelOffsetY+"px";text+="";var largestWidth=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);if(this.maxLabelSize<text.length*largestWidth){this.maxLabelSize=text.length*largestWidth}};DataAxis.prototype._redrawLine=function(y,orientation,className,offset,width){if(this.master==true){var line=DOMutil.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);line.className=className;line.innerHTML="";if(orientation=="left"){line.style.left=this.width-offset+"px"}else{line.style.right=this.width-offset+"px"}line.style.width=width+"px";line.style.top=y+"px"}};DataAxis.prototype._redrawTitle=function(orientation){DOMutil.prepareElements(this.DOMelements.title);if(this.options.title[orientation]!==undefined&&this.options.title[orientation].text!==undefined){var title=DOMutil.getDOMElement("div",this.DOMelements.title,this.dom.frame);title.className="yAxis title "+orientation;title.innerHTML=this.options.title[orientation].text;if(this.options.title[orientation].style!==undefined){util.addCssText(title,this.options.title[orientation].style)}if(orientation=="left"){title.style.left=this.props.titleCharHeight+"px"}else{title.style.right=this.props.titleCharHeight+"px"}title.style.width=this.height+"px"}DOMutil.cleanupElements(this.DOMelements.title)};DataAxis.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var textMinor=document.createTextNode("0");var measureCharMinor=document.createElement("div");measureCharMinor.className="yAxis minor measure";measureCharMinor.appendChild(textMinor);this.dom.frame.appendChild(measureCharMinor);this.props.minorCharHeight=measureCharMinor.clientHeight;this.props.minorCharWidth=measureCharMinor.clientWidth;this.dom.frame.removeChild(measureCharMinor)}if(!("majorCharHeight"in this.props)){var textMajor=document.createTextNode("0");var measureCharMajor=document.createElement("div");measureCharMajor.className="yAxis major measure";measureCharMajor.appendChild(textMajor);this.dom.frame.appendChild(measureCharMajor);this.props.majorCharHeight=measureCharMajor.clientHeight;this.props.majorCharWidth=measureCharMajor.clientWidth;this.dom.frame.removeChild(measureCharMajor)}if(!("titleCharHeight"in this.props)){var textTitle=document.createTextNode("0");var measureCharTitle=document.createElement("div");measureCharTitle.className="yAxis title measure";measureCharTitle.appendChild(textTitle);this.dom.frame.appendChild(measureCharTitle);this.props.titleCharHeight=measureCharTitle.clientHeight;this.props.titleCharWidth=measureCharTitle.clientWidth;this.dom.frame.removeChild(measureCharTitle)}};DataAxis.prototype.snap=function(date){return this.step.snap(date)};module.exports=DataAxis},function(module,exports,__webpack_require__){function DataStep(start,end,minimumStep,containerHeight,customRange,alignZeros){this.current=0;this.autoScale=true;this.stepIndex=0;this.step=1;this.scale=1;this.marginStart;this.marginEnd;this.deadSpace=0;this.majorSteps=[1,2,5,10];this.minorSteps=[.25,.5,1,2];this.alignZeros=alignZeros;this.setRange(start,end,minimumStep,containerHeight,customRange)}DataStep.prototype.setRange=function(start,end,minimumStep,containerHeight,customRange){this._start=customRange.min===undefined?start:customRange.min;this._end=customRange.max===undefined?end:customRange.max;if(this._start==this._end){this._start-=.75;this._end+=1}if(this.autoScale==true){this.setMinimumStep(minimumStep,containerHeight)}this.setFirst(customRange)};DataStep.prototype.setMinimumStep=function(minimumStep,containerHeight){var size=this._end-this._start;var safeSize=size*1.2;var minimumStepValue=minimumStep*(safeSize/containerHeight);var orderOfMagnitude=Math.round(Math.log(safeSize)/Math.LN10);var minorStepIdx=-1;var magnitudefactor=Math.pow(10,orderOfMagnitude);var start=0;if(orderOfMagnitude<0){start=orderOfMagnitude}var solutionFound=false;for(var i=start;Math.abs(i)<=Math.abs(orderOfMagnitude);i++){magnitudefactor=Math.pow(10,i);for(var j=0;j<this.minorSteps.length;j++){var stepSize=magnitudefactor*this.minorSteps[j];if(stepSize>=minimumStepValue){solutionFound=true;minorStepIdx=j;break}}if(solutionFound==true){break}}this.stepIndex=minorStepIdx;this.scale=magnitudefactor;this.step=magnitudefactor*this.minorSteps[minorStepIdx]};DataStep.prototype.setFirst=function(customRange){if(customRange===undefined){customRange={}}var niceStart=customRange.min===undefined?this._start-this.scale*2*this.minorSteps[this.stepIndex]:customRange.min;var niceEnd=customRange.max===undefined?this._end+this.scale*this.minorSteps[this.stepIndex]:customRange.max;this.marginEnd=customRange.max===undefined?this.roundToMinor(niceEnd):customRange.max;this.marginStart=customRange.min===undefined?this.roundToMinor(niceStart):customRange.min;if(this.alignZeros==true&&(this.marginEnd-this.marginStart)%this.step!=0){this.marginEnd+=this.marginEnd%this.step}this.deadSpace=this.roundToMinor(niceEnd)-niceEnd+this.roundToMinor(niceStart)-niceStart;this.marginRange=this.marginEnd-this.marginStart;this.current=this.marginEnd};DataStep.prototype.roundToMinor=function(value){var rounded=value-value%(this.scale*this.minorSteps[this.stepIndex]);if(value%(this.scale*this.minorSteps[this.stepIndex])>.5*(this.scale*this.minorSteps[this.stepIndex])){return rounded+this.scale*this.minorSteps[this.stepIndex]}else{return rounded}};DataStep.prototype.hasNext=function(){return this.current>=this.marginStart};DataStep.prototype.next=function(){var prev=this.current;this.current-=this.step;if(this.current==prev){this.current=this._end}};DataStep.prototype.previous=function(){this.current+=this.step;this.marginEnd+=this.step;this.marginRange=this.marginEnd-this.marginStart};DataStep.prototype.getCurrent=function(decimals){var current=Math.abs(this.current)<this.step/2?0:this.current;var toPrecision=""+Number(current).toPrecision(5);if(decimals!==undefined&&!isNaN(Number(decimals))){var exp="";var index=toPrecision.indexOf("e");if(index!=-1){exp=toPrecision.slice(index);toPrecision=toPrecision.slice(0,index)}index=Math.max(toPrecision.indexOf(","),toPrecision.indexOf("."));if(index===-1){if(decimals!==0){toPrecision+="."}index=toPrecision.length+decimals}else if(decimals!==0){index+=decimals+1}if(index>toPrecision.length){for(var cnt=index-toPrecision.length;cnt>0;cnt--){toPrecision+="0"}}else{toPrecision=toPrecision.slice(0,index)}toPrecision+=exp}else{if(toPrecision.indexOf(",")!=-1||toPrecision.indexOf(".")!=-1){for(var i=toPrecision.length-1;i>0;i--){if(toPrecision[i]=="0"){toPrecision=toPrecision.slice(0,i)}else if(toPrecision[i]=="."||toPrecision[i]==","){toPrecision=toPrecision.slice(0,i);break}else{break}}}}return toPrecision};DataStep.prototype.snap=function(date){};DataStep.prototype.isMajor=function(){return this.current%(this.scale*this.majorSteps[this.stepIndex])==0};module.exports=DataStep},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var DOMutil=__webpack_require__(6);var Line=__webpack_require__(47);var Bar=__webpack_require__(49);var Points=__webpack_require__(48);function GraphGroup(group,groupId,options,groupsUsingDefaultStyles){this.id=groupId;var fields=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","catmullRom"];this.options=util.selectiveBridgeObject(fields,options);this.usingDefaultStyle=group.className===undefined;this.groupsUsingDefaultStyles=groupsUsingDefaultStyles;this.zeroPosition=0;this.update(group);if(this.usingDefaultStyle==true){this.groupsUsingDefaultStyles[0]+=1}this.itemsData=[];this.visible=group.visible===undefined?true:group.visible}GraphGroup.prototype.setItems=function(items){if(items!=null){this.itemsData=items;if(this.options.sort==true){this.itemsData.sort(function(a,b){return a.x-b.x})}}else{this.itemsData=[]}};GraphGroup.prototype.setZeroPosition=function(pos){this.zeroPosition=pos};GraphGroup.prototype.setOptions=function(options){if(options!==undefined){var fields=["sampling","style","sort","yAxisOrientation","barChart"];util.selectiveDeepExtend(fields,this.options,options);util.mergeOptions(this.options,options,"catmullRom");util.mergeOptions(this.options,options,"drawPoints");util.mergeOptions(this.options,options,"shaded");if(options.catmullRom){if(typeof options.catmullRom=="object"){if(options.catmullRom.parametrization){if(options.catmullRom.parametrization=="uniform"){this.options.catmullRom.alpha=0}else if(options.catmullRom.parametrization=="chordal"){this.options.catmullRom.alpha=1}else{this.options.catmullRom.parametrization="centripetal";this.options.catmullRom.alpha=.5}}}}}if(this.options.style=="line"){this.type=new Line(this.id,this.options)}else if(this.options.style=="bar"){this.type=new Bar(this.id,this.options)}else if(this.options.style=="points"){this.type=new Points(this.id,this.options)}};GraphGroup.prototype.update=function(group){this.group=group;this.content=group.content||"graph";this.className=group.className||this.className||"graphGroup"+this.groupsUsingDefaultStyles[0]%10;this.visible=group.visible===undefined?true:group.visible;this.style=group.style;this.setOptions(group.options)};GraphGroup.prototype.drawIcon=function(x,y,JSONcontainer,SVGcontainer,iconWidth,iconHeight){var fillHeight=iconHeight*.5;var path,fillPath;var outline=DOMutil.getSVGElement("rect",JSONcontainer,SVGcontainer);outline.setAttributeNS(null,"x",x);outline.setAttributeNS(null,"y",y-fillHeight);outline.setAttributeNS(null,"width",iconWidth);outline.setAttributeNS(null,"height",2*fillHeight);outline.setAttributeNS(null,"class","outline");if(this.options.style=="line"){path=DOMutil.getSVGElement("path",JSONcontainer,SVGcontainer);path.setAttributeNS(null,"class",this.className);if(this.style!==undefined){path.setAttributeNS(null,"style",this.style)}path.setAttributeNS(null,"d","M"+x+","+y+" L"+(x+iconWidth)+","+y+"");if(this.options.shaded.enabled==true){fillPath=DOMutil.getSVGElement("path",JSONcontainer,SVGcontainer);if(this.options.shaded.orientation=="top"){fillPath.setAttributeNS(null,"d","M"+x+", "+(y-fillHeight)+"L"+x+","+y+" L"+(x+iconWidth)+","+y+" L"+(x+iconWidth)+","+(y-fillHeight))}else{fillPath.setAttributeNS(null,"d","M"+x+","+y+" "+"L"+x+","+(y+fillHeight)+" "+"L"+(x+iconWidth)+","+(y+fillHeight)+"L"+(x+iconWidth)+","+y)}fillPath.setAttributeNS(null,"class",this.className+" iconFill")}if(this.options.drawPoints.enabled==true){DOMutil.drawPoint(x+.5*iconWidth,y,this,JSONcontainer,SVGcontainer)}}else{var barWidth=Math.round(.3*iconWidth);var bar1Height=Math.round(.4*iconHeight);var bar2Height=Math.round(.75*iconHeight);var offset=Math.round((iconWidth-2*barWidth)/3);DOMutil.drawBar(x+.5*barWidth+offset,y+fillHeight-bar1Height-1,barWidth,bar1Height,this.className+" bar",JSONcontainer,SVGcontainer);DOMutil.drawBar(x+1.5*barWidth+offset+2,y+fillHeight-bar2Height-1,barWidth,bar2Height,this.className+" bar",JSONcontainer,SVGcontainer)}};GraphGroup.prototype.getLegend=function(iconWidth,iconHeight){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawIcon(0,.5*iconHeight,[],svg,iconWidth,iconHeight);return{icon:svg,label:this.content,orientation:this.options.yAxisOrientation}};GraphGroup.prototype.getYRange=function(groupData){return this.type.getYRange(groupData)};GraphGroup.prototype.draw=function(dataset,group,framework){this.type.draw(dataset,group,framework)};module.exports=GraphGroup},function(module,exports,__webpack_require__){var DOMutil=__webpack_require__(6);var Points=__webpack_require__(48);function Line(groupId,options){this.groupId=groupId;this.options=options}Line.prototype.getYRange=function(groupData){var yMin=groupData[0].y;var yMax=groupData[0].y;for(var j=0;j<groupData.length;j++){yMin=yMin>groupData[j].y?groupData[j].y:yMin;yMax=yMax<groupData[j].y?groupData[j].y:yMax}return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}};Line.prototype.draw=function(dataset,group,framework){if(dataset!=null){if(dataset.length>0){var path,d;var svgHeight=Number(framework.svg.style.height.replace("px",""));path=DOMutil.getSVGElement("path",framework.svgElements,framework.svg);path.setAttributeNS(null,"class",group.className);if(group.style!==undefined){path.setAttributeNS(null,"style",group.style)}if(group.options.catmullRom.enabled==true){d=Line._catmullRom(dataset,group)}else{d=Line._linear(dataset)}if(group.options.shaded.enabled==true){var fillPath=DOMutil.getSVGElement("path",framework.svgElements,framework.svg);var dFill;if(group.options.shaded.orientation=="top"){dFill="M"+dataset[0].x+","+0+" "+d+"L"+dataset[dataset.length-1].x+","+0}else{dFill="M"+dataset[0].x+","+svgHeight+" "+d+"L"+dataset[dataset.length-1].x+","+svgHeight}fillPath.setAttributeNS(null,"class",group.className+" fill");if(group.options.shaded.style!==undefined){fillPath.setAttributeNS(null,"style",group.options.shaded.style)}fillPath.setAttributeNS(null,"d",dFill)}path.setAttributeNS(null,"d","M"+d);if(group.options.drawPoints.enabled==true){Points.draw(dataset,group,framework)}}}};Line._catmullRomUniform=function(data){var p0,p1,p2,p3,bp1,bp2;var d=Math.round(data[0].x)+","+Math.round(data[0].y)+" ";var normalization=1/6;var length=data.length;for(var i=0;i<length-1;i++){p0=i==0?data[0]:data[i-1];p1=data[i];p2=data[i+1];p3=i+2<length?data[i+2]:p2;bp1={x:(-p0.x+6*p1.x+p2.x)*normalization,y:(-p0.y+6*p1.y+p2.y)*normalization};bp2={x:(p1.x+6*p2.x-p3.x)*normalization,y:(p1.y+6*p2.y-p3.y)*normalization};d+="C"+bp1.x+","+bp1.y+" "+bp2.x+","+bp2.y+" "+p2.x+","+p2.y+" "}return d};Line._catmullRom=function(data,group){var alpha=group.options.catmullRom.alpha;if(alpha==0||alpha===undefined){return this._catmullRomUniform(data)}else{var p0,p1,p2,p3,bp1,bp2,d1,d2,d3,A,B,N,M;var d3powA,d2powA,d3pow2A,d2pow2A,d1pow2A,d1powA;var d=Math.round(data[0].x)+","+Math.round(data[0].y)+" ";var length=data.length;for(var i=0;i<length-1;i++){p0=i==0?data[0]:data[i-1];p1=data[i];p2=data[i+1];p3=i+2<length?data[i+2]:p2;d1=Math.sqrt(Math.pow(p0.x-p1.x,2)+Math.pow(p0.y-p1.y,2));d2=Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2));d3=Math.sqrt(Math.pow(p2.x-p3.x,2)+Math.pow(p2.y-p3.y,2));d3powA=Math.pow(d3,alpha);d3pow2A=Math.pow(d3,2*alpha);d2powA=Math.pow(d2,alpha);d2pow2A=Math.pow(d2,2*alpha);d1powA=Math.pow(d1,alpha);d1pow2A=Math.pow(d1,2*alpha);A=2*d1pow2A+3*d1powA*d2powA+d2pow2A;B=2*d3pow2A+3*d3powA*d2powA+d2pow2A;N=3*d1powA*(d1powA+d2powA);if(N>0){N=1/N}M=3*d3powA*(d3powA+d2powA);if(M>0){M=1/M}bp1={x:(-d2pow2A*p0.x+A*p1.x+d1pow2A*p2.x)*N,y:(-d2pow2A*p0.y+A*p1.y+d1pow2A*p2.y)*N};bp2={x:(d3pow2A*p1.x+B*p2.x-d2pow2A*p3.x)*M,y:(d3pow2A*p1.y+B*p2.y-d2pow2A*p3.y)*M};if(bp1.x==0&&bp1.y==0){bp1=p1}if(bp2.x==0&&bp2.y==0){bp2=p2}d+="C"+bp1.x+","+bp1.y+" "+bp2.x+","+bp2.y+" "+p2.x+","+p2.y+" "}return d}};Line._linear=function(data){var d="";for(var i=0;i<data.length;i++){if(i==0){d+=data[i].x+","+data[i].y}else{d+=" "+data[i].x+","+data[i].y}}return d};module.exports=Line},function(module,exports,__webpack_require__){var DOMutil=__webpack_require__(6);function Points(groupId,options){this.groupId=groupId;this.options=options}Points.prototype.getYRange=function(groupData){var yMin=groupData[0].y;var yMax=groupData[0].y;for(var j=0;j<groupData.length;j++){yMin=yMin>groupData[j].y?groupData[j].y:yMin;yMax=yMax<groupData[j].y?groupData[j].y:yMax}return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}};Points.prototype.draw=function(dataset,group,framework,offset){Points.draw(dataset,group,framework,offset)};Points.draw=function(dataset,group,framework,offset){if(offset===undefined){offset=0}for(var i=0;i<dataset.length;i++){DOMutil.drawPoint(dataset[i].x+offset,dataset[i].y,group,framework.svgElements,framework.svg)}};module.exports=Points},function(module,exports,__webpack_require__){var DOMutil=__webpack_require__(6);var Points=__webpack_require__(48);function Bargraph(groupId,options){this.groupId=groupId;this.options=options}Bargraph.prototype.getYRange=function(groupData){if(this.options.barChart.handleOverlap!="stack"){var yMin=groupData[0].y;var yMax=groupData[0].y;for(var j=0;j<groupData.length;j++){yMin=yMin>groupData[j].y?groupData[j].y:yMin;yMax=yMax<groupData[j].y?groupData[j].y:yMax}return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}}else{var barCombinedData=[];for(var j=0;j<groupData.length;j++){barCombinedData.push({x:groupData[j].x,y:groupData[j].y,groupId:this.groupId})}return barCombinedData}};Bargraph.draw=function(groupIds,processedGroupData,framework){var combinedData=[];var intersections={};var coreDistance;var key,drawData;var group;var i,j;var barPoints=0;for(i=0;i<groupIds.length;i++){group=framework.groups[groupIds[i]];if(group.options.style=="bar"){if(group.visible==true&&(framework.options.groups.visibility[groupIds[i]]===undefined||framework.options.groups.visibility[groupIds[i]]==true)){for(j=0;j<processedGroupData[groupIds[i]].length;j++){combinedData.push({x:processedGroupData[groupIds[i]][j].x,y:processedGroupData[groupIds[i]][j].y,groupId:groupIds[i]});barPoints+=1}}}}if(barPoints==0){return}combinedData.sort(function(a,b){if(a.x==b.x){return a.groupId-b.groupId}else{return a.x-b.x}});Bargraph._getDataIntersections(intersections,combinedData);for(i=0;i<combinedData.length;i++){group=framework.groups[combinedData[i].groupId];var minWidth=.1*group.options.barChart.width;key=combinedData[i].x;var heightOffset=0;if(intersections[key]===undefined){if(i+1<combinedData.length){coreDistance=Math.abs(combinedData[i+1].x-key)}if(i>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-key))}drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth)}else{var nextKey=i+(intersections[key].amount-intersections[key].resolved);var prevKey=i-(intersections[key].resolved+1);if(nextKey<combinedData.length){coreDistance=Math.abs(combinedData[nextKey].x-key)}if(prevKey>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[prevKey].x-key))}drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth);intersections[key].resolved+=1;if(group.options.barChart.handleOverlap=="stack"){heightOffset=intersections[key].accumulated;intersections[key].accumulated+=group.zeroPosition-combinedData[i].y}else if(group.options.barChart.handleOverlap=="sideBySide"){drawData.width=drawData.width/intersections[key].amount;drawData.offset+=intersections[key].resolved*drawData.width-.5*drawData.width*(intersections[key].amount+1);if(group.options.barChart.align=="left"){drawData.offset-=.5*drawData.width}else if(group.options.barChart.align=="right"){drawData.offset+=.5*drawData.width}}}DOMutil.drawBar(combinedData[i].x+drawData.offset,combinedData[i].y-heightOffset,drawData.width,group.zeroPosition-combinedData[i].y,group.className+" bar",framework.svgElements,framework.svg);if(group.options.drawPoints.enabled==true){DOMutil.drawPoint(combinedData[i].x+drawData.offset,combinedData[i].y,group,framework.svgElements,framework.svg)}}};Bargraph._getDataIntersections=function(intersections,combinedData){var coreDistance;for(var i=0;i<combinedData.length;i++){if(i+1<combinedData.length){coreDistance=Math.abs(combinedData[i+1].x-combinedData[i].x)}if(i>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-combinedData[i].x))}if(coreDistance==0){if(intersections[combinedData[i].x]===undefined){intersections[combinedData[i].x]={amount:0,resolved:0,accumulated:0}}intersections[combinedData[i].x].amount+=1}}};Bargraph._getSafeDrawData=function(coreDistance,group,minWidth){var width,offset;if(coreDistance<group.options.barChart.width&&coreDistance>0){width=coreDistance<minWidth?minWidth:coreDistance;offset=0;if(group.options.barChart.align=="left"){offset-=.5*coreDistance}else if(group.options.barChart.align=="right"){offset+=.5*coreDistance}}else{width=group.options.barChart.width;offset=0;if(group.options.barChart.align=="left"){offset-=.5*group.options.barChart.width}else if(group.options.barChart.align=="right"){offset+=.5*group.options.barChart.width}}return{width:width,offset:offset}};Bargraph.getStackedBarYRange=function(barCombinedData,groupRanges,groupIds,groupLabel,orientation){if(barCombinedData.length>0){barCombinedData.sort(function(a,b){if(a.x==b.x){return a.groupId-b.groupId}else{return a.x-b.x}});var intersections={};Bargraph._getDataIntersections(intersections,barCombinedData);groupRanges[groupLabel]=Bargraph._getStackedBarYRange(intersections,barCombinedData);groupRanges[groupLabel].yAxisOrientation=orientation;groupIds.push(groupLabel)}};Bargraph._getStackedBarYRange=function(intersections,combinedData){var key;var yMin=combinedData[0].y;var yMax=combinedData[0].y;for(var i=0;i<combinedData.length;i++){key=combinedData[i].x;if(intersections[key]===undefined){yMin=yMin>combinedData[i].y?combinedData[i].y:yMin;yMax=yMax<combinedData[i].y?combinedData[i].y:yMax}else{intersections[key].accumulated+=combinedData[i].y}}for(var xpos in intersections){if(intersections.hasOwnProperty(xpos)){yMin=yMin>intersections[xpos].accumulated?intersections[xpos].accumulated:yMin;yMax=yMax<intersections[xpos].accumulated?intersections[xpos].accumulated:yMax}}return{min:yMin,max:yMax}};module.exports=Bargraph},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var DOMutil=__webpack_require__(6);var Component=__webpack_require__(23);function Legend(body,options,side,linegraphOptions){this.body=body;this.defaultOptions={enabled:true,icons:true,iconSize:20,iconSpacing:6,left:{visible:true,position:"top-left"},right:{visible:true,position:"top-left"}};this.side=side;this.options=util.extend({},this.defaultOptions);this.linegraphOptions=linegraphOptions;this.svgElements={};this.dom={};this.groups={};this.amountOfGroups=0;this._create();this.setOptions(options)}Legend.prototype=new Component;Legend.prototype.clear=function(){this.groups={};this.amountOfGroups=0};Legend.prototype.addGroup=function(label,graphOptions){if(!this.groups.hasOwnProperty(label)){this.groups[label]=graphOptions}this.amountOfGroups+=1};Legend.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions};Legend.prototype.removeGroup=function(label){if(this.groups.hasOwnProperty(label)){delete this.groups[label];this.amountOfGroups-=1}};Legend.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.className="legend";this.dom.frame.style.position="absolute";this.dom.frame.style.top="10px";this.dom.frame.style.display="block";this.dom.textArea=document.createElement("div");this.dom.textArea.className="legendText";this.dom.textArea.style.position="relative";this.dom.textArea.style.top="0px";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top=0+"px";this.svg.style.width=this.options.iconSize+5+"px";this.svg.style.height="100%";this.dom.frame.appendChild(this.svg);this.dom.frame.appendChild(this.dom.textArea)};Legend.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}};Legend.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame)}};Legend.prototype.setOptions=function(options){var fields=["enabled","orientation","icons","left","right"];util.selectiveDeepExtend(fields,this.options,options)};Legend.prototype.redraw=function(){var activeGroups=0;for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){activeGroups++}}}if(this.options[this.side].visible==false||this.amountOfGroups==0||this.options.enabled==false||activeGroups==0){this.hide()}else{this.show();if(this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"){this.dom.frame.style.left="4px";this.dom.frame.style.textAlign="left";this.dom.textArea.style.textAlign="left";this.dom.textArea.style.left=this.options.iconSize+15+"px";this.dom.textArea.style.right="";this.svg.style.left=0+"px";this.svg.style.right=""}else{this.dom.frame.style.right="4px";this.dom.frame.style.textAlign="right";this.dom.textArea.style.textAlign="right";this.dom.textArea.style.right=this.options.iconSize+15+"px";this.dom.textArea.style.left="";this.svg.style.right=0+"px";this.svg.style.left=""}if(this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right"){this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px";this.dom.frame.style.bottom=""}else{var scrollableHeight=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+scrollableHeight+Number(this.body.dom.center.style.top.replace("px",""))+"px";this.dom.frame.style.top=""}if(this.options.icons==false){this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px";this.dom.textArea.style.right="";this.dom.textArea.style.left="";this.svg.style.width="0px"}else{this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px";this.drawLegendIcons()}var content="";for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){content+=this.groups[groupId].content+"<br />"}}}this.dom.textArea.innerHTML=content;this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};Legend.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){DOMutil.prepareElements(this.svgElements);var padding=window.getComputedStyle(this.dom.frame).paddingTop;var iconOffset=Number(padding.replace("px",""));var x=iconOffset;var iconWidth=this.options.iconSize;var iconHeight=.75*this.options.iconSize;var y=iconOffset+.5*iconHeight+3;this.svg.style.width=iconWidth+5+iconOffset+"px";for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){this.groups[groupId].drawIcon(x,y,this.svgElements,this.svg,iconWidth,iconHeight);y+=iconHeight+this.options.iconSpacing}}}DOMutil.cleanupElements(this.svgElements)}};module.exports=Legend},function(module,exports,__webpack_require__){var Emitter=__webpack_require__(11);var Hammer=__webpack_require__(19);var keycharm=__webpack_require__(36);var util=__webpack_require__(1);var hammerUtil=__webpack_require__(22);var DataSet=__webpack_require__(7);var DataView=__webpack_require__(9);var dotparser=__webpack_require__(52);var gephiParser=__webpack_require__(53);var Groups=__webpack_require__(54);var Images=__webpack_require__(55);var Node=__webpack_require__(56);var Edge=__webpack_require__(57);var Popup=__webpack_require__(58);var MixinLoader=__webpack_require__(59);var Activator=__webpack_require__(35);var locales=__webpack_require__(70);__webpack_require__(71);function Network(container,data,options){if(!(this instanceof Network)){throw new SyntaxError("Constructor must be called with the new operator")}this._initializeMixinLoaders();this.containerElement=container;this.renderRefreshRate=60;this.renderTimestep=1e3/this.renderRefreshRate;this.renderTime=.5*this.renderTimestep;this.maxPhysicsTicksPerRender=3;this.physicsDiscreteStepsize=.5;this.initializing=true;this.triggerFunctions={add:null,edit:null,editEdge:null,connect:null,del:null};this.defaultOptions={nodes:{mass:1,radiusMin:10,radiusMax:30,radius:10,shape:"ellipse",image:undefined,widthMin:16,widthMax:64,fontColor:"black",fontSize:14,fontFace:"verdana",fontFill:undefined,level:-1,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF",group:undefined,borderWidth:1,borderWidthSelected:undefined},edges:{widthMin:1,widthMax:15,width:1,widthSelectionMultiplier:2,hoverWidth:1.5,style:"line",color:{color:"#848484",highlight:"#848484",hover:"#848484"},fontColor:"#343434",fontSize:14,fontFace:"arial",fontFill:"white",arrowScaleFactor:1,dash:{length:10,gap:5,altLength:undefined},inheritColor:"from"},configurePhysics:false,physics:{barnesHut:{enabled:true,thetaInverted:1/.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09},repulsion:{centralGravity:0,springLength:200,springConstant:.05,nodeDistance:100,damping:.09},hierarchicalRepulsion:{enabled:false,centralGravity:0,springLength:100,springConstant:.01,nodeDistance:150,damping:.09},damping:null,centralGravity:null,springLength:null,springConstant:null},clustering:{enabled:false,initialMaxNodes:100,clusterThreshold:500,reduceToNodes:300,chainThreshold:.4,clusterEdgeThreshold:20,sectorThreshold:100,screenSizeThreshold:.2,fontSizeMultiplier:4,maxFontSize:1e3,forceAmplification:.1,distanceAmplification:.1,edgeGrowth:20,nodeScaling:{width:1,height:1,radius:1},maxNodeSizeIncrements:600,activeAreaBoxSize:80,clusterLevelDifference:2},navigation:{enabled:false},keyboard:{enabled:false,speed:{x:10,y:10,zoom:.02}},dataManipulation:{enabled:false,initiallyVisible:false},hierarchicalLayout:{enabled:false,levelSeparation:150,nodeSpacing:100,direction:"UD",layout:"hubsize"},freezeForStabilization:false,smoothCurves:{enabled:true,dynamic:true,type:"continuous",roundness:.5},maxVelocity:30,minVelocity:.1,stabilize:true,stabilizationIterations:1e3,zoomExtentOnStabilize:true,locale:"en",locales:locales,tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}},dragNetwork:true,dragNodes:true,zoomable:true,hover:false,hideEdgesOnDrag:false,hideNodesOnDrag:false,width:"100%",height:"100%",selectable:true};
this.constants=util.extend({},this.defaultOptions);this.pixelRatio=1;this.hoverObj={nodes:{},edges:{}};this.controlNodesActive=false;this.navigationHammers={existing:[],_new:[]};this.animationSpeed=1/this.renderRefreshRate;this.animationEasingFunction="easeInOutQuint";this.easingTime=0;this.sourceScale=0;this.targetScale=0;this.sourceTranslation=0;this.targetTranslation=0;this.lockedOnNodeId=null;this.lockedOnNodeOffset=null;this.touchTime=0;var network=this;this.groups=new Groups;this.images=new Images;this.images.setOnloadCallback(function(){network._redraw()});this.xIncrement=0;this.yIncrement=0;this.zoomIncrement=0;this._loadPhysicsSystem();this._create();this._loadSectorSystem();this._loadClusterSystem();this._loadSelectionSystem();this._loadHierarchySystem();this._setTranslation(this.frame.clientWidth/2,this.frame.clientHeight/2);this._setScale(1);this.setOptions(options);this.freezeSimulation=false;this.cachedFunctions={};this.startedStabilization=false;this.stabilized=false;this.stabilizationIterations=null;this.draggingNodes=false;this.calculationNodes={};this.calculationNodeIndices=[];this.nodeIndices=[];this.nodes={};this.edges={};this.canvasTopLeft={x:0,y:0};this.canvasBottomRight={x:0,y:0};this.pointerPosition={x:0,y:0};this.areaCenter={};this.scale=1;this.previousScale=this.scale;this.nodesData=null;this.edgesData=null;this.nodesListeners={add:function(event,params){network._addNodes(params.items);network.start()},update:function(event,params){network._updateNodes(params.items,params.data);network.start()},remove:function(event,params){network._removeNodes(params.items);network.start()}};this.edgesListeners={add:function(event,params){network._addEdges(params.items);network.start()},update:function(event,params){network._updateEdges(params.items);network.start()},remove:function(event,params){network._removeEdges(params.items);network.start()}};this.moving=true;this.timer=undefined;this.setData(data,this.constants.clustering.enabled||this.constants.hierarchicalLayout.enabled);this.initializing=false;if(this.constants.hierarchicalLayout.enabled==true){this._setupHierarchicalLayout()}else{if(this.constants.stabilize==false){this.zoomExtent(undefined,true,this.constants.clustering.enabled)}}if(this.constants.clustering.enabled){this.startWithClustering()}}Emitter(Network.prototype);Network.prototype._getScriptPath=function(){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var src=scripts[i].src;var match=src&&/\/?vis(.min)?\.js$/.exec(src);if(match){return src.substring(0,src.length-match[0].length)}}return null};Network.prototype._getRange=function(){var minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9,node;for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];if(minX>node.boundingBox.left){minX=node.boundingBox.left}if(maxX<node.boundingBox.right){maxX=node.boundingBox.right}if(minY>node.boundingBox.bottom){minY=node.boundingBox.bottom}if(maxY<node.boundingBox.top){maxY=node.boundingBox.top}}}if(minX==1e9&&maxX==-1e9&&minY==1e9&&maxY==-1e9){minY=0,maxY=0,minX=0,maxX=0}return{minX:minX,maxX:maxX,minY:minY,maxY:maxY}};Network.prototype._findCenter=function(range){return{x:.5*(range.maxX+range.minX),y:.5*(range.maxY+range.minY)}};Network.prototype.zoomExtent=function(animationOptions,initialZoom,disableStart){this._redraw(true);if(initialZoom===undefined){initialZoom=false}if(disableStart===undefined){disableStart=false}if(animationOptions===undefined){animationOptions=false}var range=this._getRange();var zoomLevel;if(initialZoom==true){var numberOfNodes=this.nodeIndices.length;if(this.constants.smoothCurves==true){if(this.constants.clustering.enabled==true&&numberOfNodes>=this.constants.clustering.initialMaxNodes){zoomLevel=49.07548/(numberOfNodes+142.05338)+91444e-8}else{zoomLevel=12.662/(numberOfNodes+7.4147)+.0964822}}else{if(this.constants.clustering.enabled==true&&numberOfNodes>=this.constants.clustering.initialMaxNodes){zoomLevel=77.5271985/(numberOfNodes+187.266146)+476710517e-13}else{zoomLevel=30.5062972/(numberOfNodes+19.93597763)+.08413486}}var factor=Math.min(this.frame.canvas.clientWidth/600,this.frame.canvas.clientHeight/600);zoomLevel*=factor}else{var xDistance=Math.abs(range.maxX-range.minX)*1.1;var yDistance=Math.abs(range.maxY-range.minY)*1.1;var xZoomLevel=this.frame.canvas.clientWidth/xDistance;var yZoomLevel=this.frame.canvas.clientHeight/yDistance;zoomLevel=xZoomLevel<=yZoomLevel?xZoomLevel:yZoomLevel}if(zoomLevel>1){zoomLevel=1}var center=this._findCenter(range);if(disableStart==false){var options={position:center,scale:zoomLevel,animation:animationOptions};this.moveTo(options);this.moving=true;this.start()}else{center.x*=zoomLevel;center.y*=zoomLevel;center.x-=.5*this.frame.canvas.clientWidth;center.y-=.5*this.frame.canvas.clientHeight;this._setScale(zoomLevel);this._setTranslation(-center.x,-center.y)}};Network.prototype._updateNodeIndexList=function(){this._clearNodeIndexList();for(var idx in this.nodes){if(this.nodes.hasOwnProperty(idx)){this.nodeIndices.push(idx)}}};Network.prototype.setData=function(data,disableStart){if(disableStart===undefined){disableStart=false}this.initializing=true;if(data&&data.dot&&(data.nodes||data.edges)){throw new SyntaxError('Data must contain either parameter "dot" or '+' parameter pair "nodes" and "edges", but not both.')}this.setOptions(data&&data.options);if(data&&data.dot){if(data&&data.dot){var dotData=dotparser.DOTToGraph(data.dot);this.setData(dotData);return}}else if(data&&data.gephi){if(data&&data.gephi){var gephiData=gephiParser.parseGephi(data.gephi);this.setData(gephiData);return}}else{this._setNodes(data&&data.nodes);this._setEdges(data&&data.edges)}this._putDataInSector();if(disableStart==false){if(this.constants.hierarchicalLayout.enabled==true){this._resetLevels();this._setupHierarchicalLayout()}else{if(this.constants.stabilize){this._stabilize()}}this.start()}this.initializing=false};Network.prototype.setOptions=function(options){if(options){var prop;var fields=["nodes","edges","smoothCurves","hierarchicalLayout","clustering","navigation","keyboard","dataManipulation","onAdd","onEdit","onEditEdge","onConnect","onDelete","clickToUse"];util.selectiveNotDeepExtend(fields,this.constants,options);util.selectiveNotDeepExtend(["color"],this.constants.nodes,options.nodes);util.selectiveNotDeepExtend(["color","length"],this.constants.edges,options.edges);if(options.physics){util.mergeOptions(this.constants.physics,options.physics,"barnesHut");util.mergeOptions(this.constants.physics,options.physics,"repulsion");if(options.physics.hierarchicalRepulsion){this.constants.hierarchicalLayout.enabled=true;this.constants.physics.hierarchicalRepulsion.enabled=true;this.constants.physics.barnesHut.enabled=false;for(prop in options.physics.hierarchicalRepulsion){if(options.physics.hierarchicalRepulsion.hasOwnProperty(prop)){this.constants.physics.hierarchicalRepulsion[prop]=options.physics.hierarchicalRepulsion[prop]}}}}if(options.onAdd){this.triggerFunctions.add=options.onAdd}if(options.onEdit){this.triggerFunctions.edit=options.onEdit}if(options.onEditEdge){this.triggerFunctions.editEdge=options.onEditEdge}if(options.onConnect){this.triggerFunctions.connect=options.onConnect}if(options.onDelete){this.triggerFunctions.del=options.onDelete}util.mergeOptions(this.constants,options,"smoothCurves");util.mergeOptions(this.constants,options,"hierarchicalLayout");util.mergeOptions(this.constants,options,"clustering");util.mergeOptions(this.constants,options,"navigation");util.mergeOptions(this.constants,options,"keyboard");util.mergeOptions(this.constants,options,"dataManipulation");if(options.dataManipulation){this.editMode=this.constants.dataManipulation.initiallyVisible}if(options.edges){if(options.edges.color!==undefined){if(util.isString(options.edges.color)){this.constants.edges.color={};this.constants.edges.color.color=options.edges.color;this.constants.edges.color.highlight=options.edges.color;this.constants.edges.color.hover=options.edges.color}else{if(options.edges.color.color!==undefined){this.constants.edges.color.color=options.edges.color.color}if(options.edges.color.highlight!==undefined){this.constants.edges.color.highlight=options.edges.color.highlight}if(options.edges.color.hover!==undefined){this.constants.edges.color.hover=options.edges.color.hover}}this.constants.edges.inheritColor=false}if(!options.edges.fontColor){if(options.edges.color!==undefined){if(util.isString(options.edges.color)){this.constants.edges.fontColor=options.edges.color}else if(options.edges.color.color!==undefined){this.constants.edges.fontColor=options.edges.color.color}}}}if(options.nodes){if(options.nodes.color){var newColorObj=util.parseColor(options.nodes.color);this.constants.nodes.color.background=newColorObj.background;this.constants.nodes.color.border=newColorObj.border;this.constants.nodes.color.highlight.background=newColorObj.highlight.background;this.constants.nodes.color.highlight.border=newColorObj.highlight.border;this.constants.nodes.color.hover.background=newColorObj.hover.background;this.constants.nodes.color.hover.border=newColorObj.hover.border}}if(options.groups){for(var groupname in options.groups){if(options.groups.hasOwnProperty(groupname)){var group=options.groups[groupname];this.groups.add(groupname,group)}}}if(options.tooltip){for(prop in options.tooltip){if(options.tooltip.hasOwnProperty(prop)){this.constants.tooltip[prop]=options.tooltip[prop]}}if(options.tooltip.color){this.constants.tooltip.color=util.parseColor(options.tooltip.color)}}if("clickToUse"in options){if(options.clickToUse){this.activator=new Activator(this.frame);this.activator.on("change",this._createKeyBinds.bind(this))}else{if(this.activator){this.activator.destroy();delete this.activator}}}if(options.labels){throw new Error('Option "labels" is deprecated. Use options "locale" and "locales" instead.')}}this._loadPhysicsSystem();this._loadNavigationControls();this._loadManipulationSystem();this._configureSmoothCurves();this._createKeyBinds();this.setSize(this.constants.width,this.constants.height);this.moving=true;this.start()};Network.prototype._create=function(){while(this.containerElement.hasChildNodes()){this.containerElement.removeChild(this.containerElement.firstChild)}this.frame=document.createElement("div");this.frame.className="vis network-frame";this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);if(!this.frame.canvas.getContext){var noCanvas=document.createElement("DIV");noCanvas.style.color="red";noCanvas.style.fontWeight="bold";noCanvas.style.padding="10px";noCanvas.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(noCanvas)}else{var ctx=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}var me=this;this.drag={};this.pinch={};this.hammer=Hammer(this.frame.canvas,{prevent_default:true});this.hammer.on("tap",me._onTap.bind(me));this.hammer.on("doubletap",me._onDoubleTap.bind(me));this.hammer.on("hold",me._onHold.bind(me));this.hammer.on("pinch",me._onPinch.bind(me));this.hammer.on("touch",me._onTouch.bind(me));this.hammer.on("dragstart",me._onDragStart.bind(me));this.hammer.on("drag",me._onDrag.bind(me));this.hammer.on("dragend",me._onDragEnd.bind(me));this.hammer.on("mousewheel",me._onMouseWheel.bind(me));this.hammer.on("DOMMouseScroll",me._onMouseWheel.bind(me));this.hammer.on("mousemove",me._onMouseMoveTitle.bind(me));this.hammerFrame=Hammer(this.frame,{prevent_default:true});this.hammerFrame.on("release",me._onRelease.bind(me));this.containerElement.appendChild(this.frame)};Network.prototype._createKeyBinds=function(){var me=this;if(this.keycharm!==undefined){this.keycharm.destroy()}this.keycharm=keycharm();this.keycharm.reset();if(this.constants.keyboard.enabled&&this.isActive()){this.keycharm.bind("up",this._moveUp.bind(me),"keydown");this.keycharm.bind("up",this._yStopMoving.bind(me),"keyup");this.keycharm.bind("down",this._moveDown.bind(me),"keydown");this.keycharm.bind("down",this._yStopMoving.bind(me),"keyup");this.keycharm.bind("left",this._moveLeft.bind(me),"keydown");this.keycharm.bind("left",this._xStopMoving.bind(me),"keyup");this.keycharm.bind("right",this._moveRight.bind(me),"keydown");this.keycharm.bind("right",this._xStopMoving.bind(me),"keyup");this.keycharm.bind("=",this._zoomIn.bind(me),"keydown");this.keycharm.bind("=",this._stopZoom.bind(me),"keyup");this.keycharm.bind("num+",this._zoomIn.bind(me),"keydown");this.keycharm.bind("num+",this._stopZoom.bind(me),"keyup");this.keycharm.bind("num-",this._zoomOut.bind(me),"keydown");this.keycharm.bind("num-",this._stopZoom.bind(me),"keyup");this.keycharm.bind("-",this._zoomOut.bind(me),"keydown");this.keycharm.bind("-",this._stopZoom.bind(me),"keyup");this.keycharm.bind("[",this._zoomIn.bind(me),"keydown");this.keycharm.bind("[",this._stopZoom.bind(me),"keyup");this.keycharm.bind("]",this._zoomOut.bind(me),"keydown");this.keycharm.bind("]",this._stopZoom.bind(me),"keyup");this.keycharm.bind("pageup",this._zoomIn.bind(me),"keydown");this.keycharm.bind("pageup",this._stopZoom.bind(me),"keyup");this.keycharm.bind("pagedown",this._zoomOut.bind(me),"keydown");this.keycharm.bind("pagedown",this._stopZoom.bind(me),"keyup")}if(this.constants.dataManipulation.enabled==true){this.keycharm.bind("esc",this._createManipulatorBar.bind(me));this.keycharm.bind("delete",this._deleteSelected.bind(me))}};Network.prototype.destroy=function(){this.keycharm.reset();this.hammer.dispose();this.off()};Network.prototype._getPointer=function(touch){return{x:touch.pageX-util.getAbsoluteLeft(this.frame.canvas),y:touch.pageY-util.getAbsoluteTop(this.frame.canvas)}};Network.prototype._onTouch=function(event){if((new Date).valueOf()-this.touchTime>100){this.drag.pointer=this._getPointer(event.gesture.center);this.drag.pinched=false;this.pinch.scale=this._getScale();this.touchTime=(new Date).valueOf();this._handleTouch(this.drag.pointer)}};Network.prototype._onDragStart=function(){this._handleDragStart()};Network.prototype._handleDragStart=function(){var drag=this.drag;var node=this._getNodeAt(drag.pointer);drag.dragging=true;drag.selection=[];drag.translation=this._getTranslation();drag.nodeId=null;this.draggingNodes=false;if(node!=null&&this.constants.dragNodes==true){this.draggingNodes=true;drag.nodeId=node.id;if(!node.isSelected()){this._selectObject(node,false)}this.emit("dragStart",{nodeIds:this.getSelection().nodes});for(var objectId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(objectId)){var object=this.selectionObj.nodes[objectId];var s={id:object.id,node:object,x:object.x,y:object.y,xFixed:object.xFixed,yFixed:object.yFixed};object.xFixed=true;object.yFixed=true;drag.selection.push(s)}}}};Network.prototype._onDrag=function(event){this._handleOnDrag(event)};Network.prototype._handleOnDrag=function(event){if(this.drag.pinched){return}this.releaseNode();var pointer=this._getPointer(event.gesture.center);var me=this;var drag=this.drag;var selection=drag.selection;if(selection&&selection.length&&this.constants.dragNodes==true){var deltaX=pointer.x-drag.pointer.x;var deltaY=pointer.y-drag.pointer.y;selection.forEach(function(s){var node=s.node;if(!s.xFixed){node.x=me._XconvertDOMtoCanvas(me._XconvertCanvasToDOM(s.x)+deltaX)}if(!s.yFixed){node.y=me._YconvertDOMtoCanvas(me._YconvertCanvasToDOM(s.y)+deltaY)}});if(!this.moving){this.moving=true;this.start()}}else{if(this.constants.dragNetwork==true){var diffX=pointer.x-this.drag.pointer.x;var diffY=pointer.y-this.drag.pointer.y;this._setTranslation(this.drag.translation.x+diffX,this.drag.translation.y+diffY);this._redraw()}}};Network.prototype._onDragEnd=function(event){this._handleDragEnd(event)};Network.prototype._handleDragEnd=function(event){this.drag.dragging=false;var selection=this.drag.selection;if(selection&&selection.length){selection.forEach(function(s){s.node.xFixed=s.xFixed;s.node.yFixed=s.yFixed});this.moving=true;this.start()}else{this._redraw()}if(this.draggingNodes==false){this.emit("dragEnd",{nodeIds:[]})}else{this.emit("dragEnd",{nodeIds:this.getSelection().nodes})}};Network.prototype._onTap=function(event){var pointer=this._getPointer(event.gesture.center);this.pointerPosition=pointer;this._handleTap(pointer)};Network.prototype._onDoubleTap=function(event){var pointer=this._getPointer(event.gesture.center);this._handleDoubleTap(pointer)};Network.prototype._onHold=function(event){var pointer=this._getPointer(event.gesture.center);this.pointerPosition=pointer;this._handleOnHold(pointer)};Network.prototype._onRelease=function(event){var pointer=this._getPointer(event.gesture.center);this._handleOnRelease(pointer)};Network.prototype._onPinch=function(event){var pointer=this._getPointer(event.gesture.center);this.drag.pinched=true;if(!("scale"in this.pinch)){this.pinch.scale=1}var scale=this.pinch.scale*event.gesture.scale;this._zoom(scale,pointer)};Network.prototype._zoom=function(scale,pointer){if(this.constants.zoomable==true){var scaleOld=this._getScale();if(scale<1e-5){scale=1e-5}if(scale>10){scale=10}var preScaleDragPointer=null;if(this.drag!==undefined){if(this.drag.dragging==true){preScaleDragPointer=this.DOMtoCanvas(this.drag.pointer)}}var translation=this._getTranslation();var scaleFrac=scale/scaleOld;var tx=(1-scaleFrac)*pointer.x+translation.x*scaleFrac;var ty=(1-scaleFrac)*pointer.y+translation.y*scaleFrac;this.areaCenter={x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)};this._setScale(scale);this._setTranslation(tx,ty);this.updateClustersDefault();if(preScaleDragPointer!=null){var postScaleDragPointer=this.canvasToDOM(preScaleDragPointer);this.drag.pointer.x=postScaleDragPointer.x;this.drag.pointer.y=postScaleDragPointer.y}this._redraw();if(scaleOld<scale){this.emit("zoom",{direction:"+"})}else{this.emit("zoom",{direction:"-"})}return scale}};Network.prototype._onMouseWheel=function(event){var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120}else if(event.detail){delta=-event.detail/3}if(delta){var scale=this._getScale();var zoom=delta/10;if(delta<0){zoom=zoom/(1-zoom)}scale*=1+zoom;var gesture=hammerUtil.fakeGesture(this,event);var pointer=this._getPointer(gesture.center);this._zoom(scale,pointer)}event.preventDefault()};Network.prototype._onMouseMoveTitle=function(event){var gesture=hammerUtil.fakeGesture(this,event);var pointer=this._getPointer(gesture.center);if(this.popupObj){this._checkHidePopup(pointer)}var me=this;var checkShow=function(){me._checkShowPopup(pointer)};if(this.popupTimer){clearInterval(this.popupTimer)}if(!this.drag.dragging){this.popupTimer=setTimeout(checkShow,this.constants.tooltip.delay)}if(this.constants.hover==true){for(var edgeId in this.hoverObj.edges){if(this.hoverObj.edges.hasOwnProperty(edgeId)){this.hoverObj.edges[edgeId].hover=false;delete this.hoverObj.edges[edgeId]}}var obj=this._getNodeAt(pointer);if(obj==null){obj=this._getEdgeAt(pointer)}if(obj!=null){this._hoverObject(obj)}for(var nodeId in this.hoverObj.nodes){if(this.hoverObj.nodes.hasOwnProperty(nodeId)){if(obj instanceof Node&&obj.id!=nodeId||obj instanceof Edge||obj==null){this._blurObject(this.hoverObj.nodes[nodeId]);delete this.hoverObj.nodes[nodeId]}}}this.redraw()}};Network.prototype._checkShowPopup=function(pointer){var obj={left:this._XconvertDOMtoCanvas(pointer.x),top:this._YconvertDOMtoCanvas(pointer.y),right:this._XconvertDOMtoCanvas(pointer.x),bottom:this._YconvertDOMtoCanvas(pointer.y)};var id;var lastPopupNode=this.popupObj;if(this.popupObj==undefined){var nodes=this.nodes;for(id in nodes){if(nodes.hasOwnProperty(id)){var node=nodes[id];if(node.getTitle()!==undefined&&node.isOverlappingWith(obj)){this.popupObj=node;break}}}}if(this.popupObj===undefined){var edges=this.edges;for(id in edges){if(edges.hasOwnProperty(id)){var edge=edges[id];if(edge.connected&&edge.getTitle()!==undefined&&edge.isOverlappingWith(obj)){this.popupObj=edge;break}}}}if(this.popupObj){if(this.popupObj!=lastPopupNode){var me=this;if(!me.popup){me.popup=new Popup(me.frame,me.constants.tooltip)}me.popup.setPosition(pointer.x-3,pointer.y-3);me.popup.setText(me.popupObj.getTitle());me.popup.show()}}else{if(this.popup){this.popup.hide()}}};Network.prototype._checkHidePopup=function(pointer){if(!this.popupObj||!this._getNodeAt(pointer)){this.popupObj=undefined;if(this.popup){this.popup.hide()}}};Network.prototype.setSize=function(width,height){var emitEvent=false;var oldWidth=this.frame.canvas.width;var oldHeight=this.frame.canvas.height;if(width!=this.constants.width||height!=this.constants.height||this.frame.style.width!=width||this.frame.style.height!=height){this.frame.style.width=width;this.frame.style.height=height;this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=this.frame.canvas.clientWidth*this.pixelRatio;this.frame.canvas.height=this.frame.canvas.clientHeight*this.pixelRatio;this.constants.width=width;this.constants.height=height;emitEvent=true}else{if(this.frame.canvas.width!=this.frame.canvas.clientWidth*this.pixelRatio){this.frame.canvas.width=this.frame.canvas.clientWidth*this.pixelRatio;emitEvent=true}if(this.frame.canvas.height!=this.frame.canvas.clientHeight*this.pixelRatio){this.frame.canvas.height=this.frame.canvas.clientHeight*this.pixelRatio;emitEvent=true}}if(emitEvent==true){this.emit("resize",{width:this.frame.canvas.width*this.pixelRatio,height:this.frame.canvas.height*this.pixelRatio,oldWidth:oldWidth*this.pixelRatio,oldHeight:oldHeight*this.pixelRatio})}};Network.prototype._setNodes=function(nodes){var oldNodesData=this.nodesData;if(nodes instanceof DataSet||nodes instanceof DataView){this.nodesData=nodes}else if(Array.isArray(nodes)){this.nodesData=new DataSet;this.nodesData.add(nodes)}else if(!nodes){this.nodesData=new DataSet}else{throw new TypeError("Array or DataSet expected")}if(oldNodesData){util.forEach(this.nodesListeners,function(callback,event){oldNodesData.off(event,callback)})}this.nodes={};if(this.nodesData){var me=this;util.forEach(this.nodesListeners,function(callback,event){me.nodesData.on(event,callback)});var ids=this.nodesData.getIds();this._addNodes(ids)}this._updateSelection()};Network.prototype._addNodes=function(ids){var id;for(var i=0,len=ids.length;i<len;i++){id=ids[i];var data=this.nodesData.get(id);var node=new Node(data,this.images,this.groups,this.constants);this.nodes[id]=node;if((node.xFixed==false||node.yFixed==false)&&(node.x===null||node.y===null)){var radius=10*.1*ids.length+10;var angle=2*Math.PI*Math.random();if(node.xFixed==false){node.x=radius*Math.cos(angle)}if(node.yFixed==false){node.y=radius*Math.sin(angle)}}this.moving=true}this._updateNodeIndexList();if(this.constants.hierarchicalLayout.enabled==true&&this.initializing==false){this._resetLevels();this._setupHierarchicalLayout()}this._updateCalculationNodes();this._reconnectEdges();this._updateValueRange(this.nodes);this.updateLabels()};Network.prototype._updateNodes=function(ids,changedData){var nodes=this.nodes;for(var i=0,len=ids.length;i<len;i++){var id=ids[i];var node=nodes[id];var data=changedData[i];if(node){node.setProperties(data,this.constants)}else{node=new Node(properties,this.images,this.groups,this.constants);nodes[id]=node}}this.moving=true;if(this.constants.hierarchicalLayout.enabled==true&&this.initializing==false){this._resetLevels();this._setupHierarchicalLayout()}this._updateNodeIndexList();this._updateValueRange(nodes)};Network.prototype._removeNodes=function(ids){var nodes=this.nodes;for(var i=0,len=ids.length;i<len;i++){var id=ids[i];delete nodes[id]}this._updateNodeIndexList();if(this.constants.hierarchicalLayout.enabled==true&&this.initializing==false){this._resetLevels();this._setupHierarchicalLayout()}this._updateCalculationNodes();this._reconnectEdges();this._updateSelection();this._updateValueRange(nodes)};Network.prototype._setEdges=function(edges){var oldEdgesData=this.edgesData;if(edges instanceof DataSet||edges instanceof DataView){this.edgesData=edges}else if(Array.isArray(edges)){this.edgesData=new DataSet;this.edgesData.add(edges)}else if(!edges){this.edgesData=new DataSet}else{throw new TypeError("Array or DataSet expected")}if(oldEdgesData){util.forEach(this.edgesListeners,function(callback,event){oldEdgesData.off(event,callback)})}this.edges={};if(this.edgesData){var me=this;util.forEach(this.edgesListeners,function(callback,event){me.edgesData.on(event,callback)});var ids=this.edgesData.getIds();this._addEdges(ids)}this._reconnectEdges()};Network.prototype._addEdges=function(ids){var edges=this.edges,edgesData=this.edgesData;for(var i=0,len=ids.length;i<len;i++){var id=ids[i];var oldEdge=edges[id];if(oldEdge){oldEdge.disconnect()}var data=edgesData.get(id,{showInternalIds:true});edges[id]=new Edge(data,this,this.constants)}this.moving=true;this._updateValueRange(edges);this._createBezierNodes();this._updateCalculationNodes();if(this.constants.hierarchicalLayout.enabled==true&&this.initializing==false){this._resetLevels();this._setupHierarchicalLayout()}};Network.prototype._updateEdges=function(ids){var edges=this.edges,edgesData=this.edgesData;for(var i=0,len=ids.length;i<len;i++){var id=ids[i];var data=edgesData.get(id);var edge=edges[id];if(edge){edge.disconnect();edge.setProperties(data,this.constants);edge.connect()}else{edge=new Edge(data,this,this.constants);this.edges[id]=edge}}this._createBezierNodes();if(this.constants.hierarchicalLayout.enabled==true&&this.initializing==false){this._resetLevels();this._setupHierarchicalLayout()}this.moving=true;this._updateValueRange(edges)};Network.prototype._removeEdges=function(ids){var edges=this.edges;for(var i=0,len=ids.length;i<len;i++){var id=ids[i];var edge=edges[id];if(edge){if(edge.via!=null){delete this.sectors["support"]["nodes"][edge.via.id]}edge.disconnect();delete edges[id]}}this.moving=true;this._updateValueRange(edges);if(this.constants.hierarchicalLayout.enabled==true&&this.initializing==false){this._resetLevels();this._setupHierarchicalLayout()}this._updateCalculationNodes()};Network.prototype._reconnectEdges=function(){var id,nodes=this.nodes,edges=this.edges;for(id in nodes){if(nodes.hasOwnProperty(id)){nodes[id].edges=[];nodes[id].dynamicEdges=[]}}for(id in edges){if(edges.hasOwnProperty(id)){var edge=edges[id];edge.from=null;edge.to=null;edge.connect()}}};Network.prototype._updateValueRange=function(obj){var id;var valueMin=undefined;var valueMax=undefined;for(id in obj){if(obj.hasOwnProperty(id)){var value=obj[id].getValue();if(value!==undefined){valueMin=valueMin===undefined?value:Math.min(value,valueMin);valueMax=valueMax===undefined?value:Math.max(value,valueMax)}}}if(valueMin!==undefined&&valueMax!==undefined){for(id in obj){if(obj.hasOwnProperty(id)){obj[id].setValueRange(valueMin,valueMax)}}}};Network.prototype.redraw=function(){this.setSize(this.constants.width,this.constants.height);this._redraw()};Network.prototype._redraw=function(hidden){var ctx=this.frame.canvas.getContext("2d");ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.frame.canvas.width*this.pixelRatio;var h=this.frame.canvas.height*this.pixelRatio;ctx.clearRect(0,0,w,h);ctx.save();ctx.translate(this.translation.x,this.translation.y);ctx.scale(this.scale,this.scale);this.canvasTopLeft={x:this._XconvertDOMtoCanvas(0),y:this._YconvertDOMtoCanvas(0)};this.canvasBottomRight={x:this._XconvertDOMtoCanvas(this.frame.canvas.clientWidth*this.pixelRatio),y:this._YconvertDOMtoCanvas(this.frame.canvas.clientHeight*this.pixelRatio)};if(!(hidden==true)){this._doInAllSectors("_drawAllSectorNodes",ctx);if(this.drag.dragging==false||this.drag.dragging===undefined||this.constants.hideEdgesOnDrag==false){this._doInAllSectors("_drawEdges",ctx)}}if(this.drag.dragging==false||this.drag.dragging===undefined||this.constants.hideNodesOnDrag==false){this._doInAllSectors("_drawNodes",ctx,false)}if(!(hidden==true)){if(this.controlNodesActive==true){this._doInAllSectors("_drawControlNodes",ctx)}}ctx.restore();if(hidden==true){ctx.clearRect(0,0,w,h)}};Network.prototype._setTranslation=function(offsetX,offsetY){if(this.translation===undefined){this.translation={x:0,y:0}}if(offsetX!==undefined){this.translation.x=offsetX}if(offsetY!==undefined){this.translation.y=offsetY}this.emit("viewChanged")};Network.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}};Network.prototype._setScale=function(scale){this.scale=scale};Network.prototype._getScale=function(){return this.scale};Network.prototype._XconvertDOMtoCanvas=function(x){return(x-this.translation.x)/this.scale};Network.prototype._XconvertCanvasToDOM=function(x){return x*this.scale+this.translation.x};Network.prototype._YconvertDOMtoCanvas=function(y){return(y-this.translation.y)/this.scale};Network.prototype._YconvertCanvasToDOM=function(y){return y*this.scale+this.translation.y};Network.prototype.canvasToDOM=function(pos){return{x:this._XconvertCanvasToDOM(pos.x),y:this._YconvertCanvasToDOM(pos.y)}};Network.prototype.DOMtoCanvas=function(pos){return{x:this._XconvertDOMtoCanvas(pos.x),y:this._YconvertDOMtoCanvas(pos.y)}};Network.prototype._drawNodes=function(ctx,alwaysShow){if(alwaysShow===undefined){alwaysShow=false}var nodes=this.nodes;var selected=[];for(var id in nodes){if(nodes.hasOwnProperty(id)){nodes[id].setScaleAndPos(this.scale,this.canvasTopLeft,this.canvasBottomRight);if(nodes[id].isSelected()){selected.push(id)}else{if(nodes[id].inArea()||alwaysShow){nodes[id].draw(ctx)}}}}for(var s=0,sMax=selected.length;s<sMax;s++){if(nodes[selected[s]].inArea()||alwaysShow){nodes[selected[s]].draw(ctx)}}};Network.prototype._drawEdges=function(ctx){var edges=this.edges;for(var id in edges){if(edges.hasOwnProperty(id)){var edge=edges[id];edge.setScale(this.scale);if(edge.connected){edges[id].draw(ctx)}}}};Network.prototype._drawControlNodes=function(ctx){var edges=this.edges;for(var id in edges){if(edges.hasOwnProperty(id)){edges[id]._drawControlNodes(ctx)}}};Network.prototype._stabilize=function(){if(this.constants.freezeForStabilization==true){this._freezeDefinedNodes()}var count=0;while(this.moving&&count<this.constants.stabilizationIterations){this._physicsTick();count++}if(this.constants.zoomExtentOnStabilize==true){this.zoomExtent(undefined,false,true)}if(this.constants.freezeForStabilization==true){this._restoreFrozenNodes()}};Network.prototype._freezeDefinedNodes=function(){var nodes=this.nodes;for(var id in nodes){if(nodes.hasOwnProperty(id)){if(nodes[id].x!=null&&nodes[id].y!=null){nodes[id].fixedData.x=nodes[id].xFixed;nodes[id].fixedData.y=nodes[id].yFixed;nodes[id].xFixed=true;nodes[id].yFixed=true}}}};Network.prototype._restoreFrozenNodes=function(){var nodes=this.nodes;for(var id in nodes){if(nodes.hasOwnProperty(id)){if(nodes[id].fixedData.x!=null){nodes[id].xFixed=nodes[id].fixedData.x;nodes[id].yFixed=nodes[id].fixedData.y}}}};Network.prototype._isMoving=function(vmin){var nodes=this.nodes;for(var id in nodes){if(nodes.hasOwnProperty(id)&&nodes[id].isMoving(vmin)){return true}}return false};Network.prototype._discreteStepNodes=function(){var interval=this.physicsDiscreteStepsize;var nodes=this.nodes;var nodeId;var nodesPresent=false;if(this.constants.maxVelocity>0){for(nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){nodes[nodeId].discreteStepLimited(interval,this.constants.maxVelocity);nodesPresent=true}}}else{for(nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){nodes[nodeId].discreteStep(interval);nodesPresent=true}}}if(nodesPresent==true){var vminCorrected=this.constants.minVelocity/Math.max(this.scale,.05);if(vminCorrected>.5*this.constants.maxVelocity){return true}else{return this._isMoving(vminCorrected)}}return false
};Network.prototype._physicsTick=function(){if(!this.freezeSimulation){if(this.moving==true){var mainMovingStatus=false;var supportMovingStatus=false;this._doInAllActiveSectors("_initializeForceCalculation");var mainMoving=this._doInAllActiveSectors("_discreteStepNodes");if(this.constants.smoothCurves.enabled==true&&this.constants.smoothCurves.dynamic==true){supportMovingStatus=this._doInSupportSector("_discreteStepNodes")}for(var i=0;i<mainMoving.length;i++){mainMovingStatus=mainMoving[0]||mainMovingStatus}this.moving=mainMovingStatus||supportMovingStatus;this.stabilizationIterations++}}};Network.prototype._animationStep=function(){this.timer=undefined;this._handleNavigation();this.start();var calculationTime=Date.now();var maxSteps=1;this._physicsTick();var timeRequired=Date.now()-calculationTime;while(timeRequired<.9*(this.renderTimestep-this.renderTime)&&maxSteps<this.maxPhysicsTicksPerRender){this._physicsTick();timeRequired=Date.now()-calculationTime;maxSteps++}var renderTime=Date.now();this._redraw();this.renderTime=Date.now()-renderTime};if(typeof window!=="undefined"){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}Network.prototype.start=function(){if(this.moving==true||this.xIncrement!=0||this.yIncrement!=0||this.zoomIncrement!=0){if(this.startedStabilization==false){this.emit("startStabilization");this.startedStabilization=true}if(!this.timer){var ua=navigator.userAgent.toLowerCase();var requiresTimeout=false;if(ua.indexOf("msie 9.0")!=-1){requiresTimeout=true}else if(ua.indexOf("safari")!=-1){if(ua.indexOf("chrome")<=-1){requiresTimeout=true}}if(requiresTimeout==true){this.timer=window.setTimeout(this._animationStep.bind(this),this.renderTimestep)}else{this.timer=window.requestAnimationFrame(this._animationStep.bind(this),this.renderTimestep)}}}else{this._redraw();if(this.stabilizationIterations>0){var me=this;var params={iterations:me.stabilizationIterations};me.stabilizationIterations=0;me.startedStabilization=false;setTimeout(function(){me.emit("stabilized",params)},0)}}};Network.prototype._handleNavigation=function(){if(this.xIncrement!=0||this.yIncrement!=0){var translation=this._getTranslation();this._setTranslation(translation.x+this.xIncrement,translation.y+this.yIncrement)}if(this.zoomIncrement!=0){var center={x:this.frame.canvas.clientWidth/2,y:this.frame.canvas.clientHeight/2};this._zoom(this.scale*(1+this.zoomIncrement),center)}};Network.prototype.toggleFreeze=function(){if(this.freezeSimulation==false){this.freezeSimulation=true}else{this.freezeSimulation=false;this.start()}};Network.prototype._configureSmoothCurves=function(disableStart){if(disableStart===undefined){disableStart=true}if(this.constants.smoothCurves.enabled==true&&this.constants.smoothCurves.dynamic==true){this._createBezierNodes();for(var nodeId in this.sectors["support"]["nodes"]){if(this.sectors["support"]["nodes"].hasOwnProperty(nodeId)){if(this.edges[this.sectors["support"]["nodes"][nodeId].parentEdgeId]===undefined){delete this.sectors["support"]["nodes"][nodeId]}}}}else{this.sectors["support"]["nodes"]={};for(var edgeId in this.edges){if(this.edges.hasOwnProperty(edgeId)){this.edges[edgeId].via=null}}}this._updateCalculationNodes();if(!disableStart){this.moving=true;this.start()}};Network.prototype._createBezierNodes=function(){if(this.constants.smoothCurves.enabled==true&&this.constants.smoothCurves.dynamic==true){for(var edgeId in this.edges){if(this.edges.hasOwnProperty(edgeId)){var edge=this.edges[edgeId];if(edge.via==null){var nodeId="edgeId:".concat(edge.id);this.sectors["support"]["nodes"][nodeId]=new Node({id:nodeId,mass:1,shape:"circle",image:"",internalMultiplier:1},{},{},this.constants);edge.via=this.sectors["support"]["nodes"][nodeId];edge.via.parentEdgeId=edge.id;edge.positionBezierNode()}}}}};Network.prototype._initializeMixinLoaders=function(){for(var mixin in MixinLoader){if(MixinLoader.hasOwnProperty(mixin)){Network.prototype[mixin]=MixinLoader[mixin]}}};Network.prototype.storePosition=function(){console.log("storePosition is depricated: use .storePositions() from now on.");this.storePositions()};Network.prototype.storePositions=function(){var dataArray=[];for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];var allowedToMoveX=!this.nodes.xFixed;var allowedToMoveY=!this.nodes.yFixed;if(this.nodesData._data[nodeId].x!=Math.round(node.x)||this.nodesData._data[nodeId].y!=Math.round(node.y)){dataArray.push({id:nodeId,x:Math.round(node.x),y:Math.round(node.y),allowedToMoveX:allowedToMoveX,allowedToMoveY:allowedToMoveY})}}}this.nodesData.update(dataArray)};Network.prototype.getPositions=function(ids){var dataArray={};if(ids!==undefined){if(Array.isArray(ids)==true){for(var i=0;i<ids.length;i++){if(this.nodes[ids[i]]!==undefined){var node=this.nodes[ids[i]];dataArray[ids[i]]={x:Math.round(node.x),y:Math.round(node.y)}}}}else{if(this.nodes[ids]!==undefined){var node=this.nodes[ids];dataArray[ids]={x:Math.round(node.x),y:Math.round(node.y)}}}}else{for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];dataArray[nodeId]={x:Math.round(node.x),y:Math.round(node.y)}}}}return dataArray};Network.prototype.focusOnNode=function(nodeId,options){if(this.nodes.hasOwnProperty(nodeId)){if(options===undefined){options={}}var nodePosition={x:this.nodes[nodeId].x,y:this.nodes[nodeId].y};options.position=nodePosition;options.lockedOnNode=nodeId;this.moveTo(options)}else{console.log("This nodeId cannot be found.")}};Network.prototype.moveTo=function(options){if(options===undefined){options={};return}if(options.offset===undefined){options.offset={x:0,y:0}}if(options.offset.x===undefined){options.offset.x=0}if(options.offset.y===undefined){options.offset.y=0}if(options.scale===undefined){options.scale=this._getScale()}if(options.position===undefined){options.position=this._getTranslation()}if(options.animation===undefined){options.animation={duration:0}}if(options.animation===false){options.animation={duration:0}}if(options.animation===true){options.animation={}}if(options.animation.duration===undefined){options.animation.duration=1e3}if(options.animation.easingFunction===undefined){options.animation.easingFunction="easeInOutQuad"}this.animateView(options)};Network.prototype.animateView=function(options){if(options===undefined){options={};return}this.releaseNode();if(options.locked==true){this.lockedOnNodeId=options.lockedOnNode;this.lockedOnNodeOffset=options.offset}if(this.easingTime!=0){this._transitionRedraw(1)}this.sourceScale=this._getScale();this.sourceTranslation=this._getTranslation();this.targetScale=options.scale;this._setScale(this.targetScale);var viewCenter=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight});var distanceFromCenter={x:viewCenter.x-options.position.x,y:viewCenter.y-options.position.y};this.targetTranslation={x:this.sourceTranslation.x+distanceFromCenter.x*this.targetScale+options.offset.x,y:this.sourceTranslation.y+distanceFromCenter.y*this.targetScale+options.offset.y};if(options.animation.duration==0){if(this.lockedOnNodeId!=null){this._classicRedraw=this._redraw;this._redraw=this._lockedRedraw}else{this._setScale(this.targetScale);this._setTranslation(this.targetTranslation.x,this.targetTranslation.y);this._redraw()}}else{this.animationSpeed=1/(this.renderRefreshRate*options.animation.duration*.001)||1/this.renderRefreshRate;this.animationEasingFunction=options.animation.easingFunction;this._classicRedraw=this._redraw;this._redraw=this._transitionRedraw;this._redraw();this.moving=true;this.start()}};Network.prototype._lockedRedraw=function(){var nodePosition={x:this.nodes[this.lockedOnNodeId].x,y:this.nodes[this.lockedOnNodeId].y};var viewCenter=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight});var distanceFromCenter={x:viewCenter.x-nodePosition.x,y:viewCenter.y-nodePosition.y};var sourceTranslation=this._getTranslation();var targetTranslation={x:sourceTranslation.x+distanceFromCenter.x*this.scale+this.lockedOnNodeOffset.x,y:sourceTranslation.y+distanceFromCenter.y*this.scale+this.lockedOnNodeOffset.y};this._setTranslation(targetTranslation.x,targetTranslation.y);this._classicRedraw()};Network.prototype.releaseNode=function(){if(this.lockedOnNodeId!=null){this._redraw=this._classicRedraw;this.lockedOnNodeId=null;this.lockedOnNodeOffset=null}};Network.prototype._transitionRedraw=function(easingTime){this.easingTime=easingTime||this.easingTime+this.animationSpeed;this.easingTime+=this.animationSpeed;var progress=util.easingFunctions[this.animationEasingFunction](this.easingTime);this._setScale(this.sourceScale+(this.targetScale-this.sourceScale)*progress);this._setTranslation(this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*progress,this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*progress);this._classicRedraw();this.moving=true;if(this.easingTime>=1){this.easingTime=0;if(this.lockedOnNodeId!=null){this._redraw=this._lockedRedraw}else{this._redraw=this._classicRedraw}this.emit("animationFinished")}};Network.prototype._classicRedraw=function(){};Network.prototype.isActive=function(){return!this.activator||this.activator.active};Network.prototype.setScale=function(){return this._setScale()};Network.prototype.getScale=function(){return this._getScale()};Network.prototype.getCenterCoordinates=function(){return this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight})};module.exports=Network},function(module,exports,__webpack_require__){function parseDOT(data){dot=data;return parseGraph()}var TOKENTYPE={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3};var DELIMITERS={"{":true,"}":true,"[":true,"]":true,";":true,"=":true,",":true,"->":true,"--":true};var dot="";var index=0;var c="";var token="";var tokenType=TOKENTYPE.NULL;function first(){index=0;c=dot.charAt(0)}function next(){index++;c=dot.charAt(index)}function nextPreview(){return dot.charAt(index+1)}var regexAlphaNumeric=/[a-zA-Z_0-9.:#]/;function isAlphaNumeric(c){return regexAlphaNumeric.test(c)}function merge(a,b){if(!a){a={}}if(b){for(var name in b){if(b.hasOwnProperty(name)){a[name]=b[name]}}}return a}function setValue(obj,path,value){var keys=path.split(".");var o=obj;while(keys.length){var key=keys.shift();if(keys.length){if(!o[key]){o[key]={}}o=o[key]}else{o[key]=value}}}function addNode(graph,node){var i,len;var current=null;var graphs=[graph];var root=graph;while(root.parent){graphs.push(root.parent);root=root.parent}if(root.nodes){for(i=0,len=root.nodes.length;i<len;i++){if(node.id===root.nodes[i].id){current=root.nodes[i];break}}}if(!current){current={id:node.id};if(graph.node){current.attr=merge(current.attr,graph.node)}}for(i=graphs.length-1;i>=0;i--){var g=graphs[i];if(!g.nodes){g.nodes=[]}if(g.nodes.indexOf(current)==-1){g.nodes.push(current)}}if(node.attr){current.attr=merge(current.attr,node.attr)}}function addEdge(graph,edge){if(!graph.edges){graph.edges=[]}graph.edges.push(edge);if(graph.edge){var attr=merge({},graph.edge);edge.attr=merge(attr,edge.attr)}}function createEdge(graph,from,to,type,attr){var edge={from:from,to:to,type:type};if(graph.edge){edge.attr=merge({},graph.edge)}edge.attr=merge(edge.attr||{},attr);return edge}function getToken(){tokenType=TOKENTYPE.NULL;token="";while(c==" "||c=="	"||c=="\n"||c=="\r"){next()}do{var isComment=false;if(c=="#"){var i=index-1;while(dot.charAt(i)==" "||dot.charAt(i)=="	"){i--}if(dot.charAt(i)=="\n"||dot.charAt(i)==""){while(c!=""&&c!="\n"){next()}isComment=true}}if(c=="/"&&nextPreview()=="/"){while(c!=""&&c!="\n"){next()}isComment=true}if(c=="/"&&nextPreview()=="*"){while(c!=""){if(c=="*"&&nextPreview()=="/"){next();next();break}else{next()}}isComment=true}while(c==" "||c=="	"||c=="\n"||c=="\r"){next()}}while(isComment);if(c==""){tokenType=TOKENTYPE.DELIMITER;return}var c2=c+nextPreview();if(DELIMITERS[c2]){tokenType=TOKENTYPE.DELIMITER;token=c2;next();next();return}if(DELIMITERS[c]){tokenType=TOKENTYPE.DELIMITER;token=c;next();return}if(isAlphaNumeric(c)||c=="-"){token+=c;next();while(isAlphaNumeric(c)){token+=c;next()}if(token=="false"){token=false}else if(token=="true"){token=true}else if(!isNaN(Number(token))){token=Number(token)}tokenType=TOKENTYPE.IDENTIFIER;return}if(c=='"'){next();while(c!=""&&(c!='"'||c=='"'&&nextPreview()=='"')){token+=c;if(c=='"'){next()}next()}if(c!='"'){throw newSyntaxError('End of string " expected')}next();tokenType=TOKENTYPE.IDENTIFIER;return}tokenType=TOKENTYPE.UNKNOWN;while(c!=""){token+=c;next()}throw new SyntaxError('Syntax error in part "'+chop(token,30)+'"')}function parseGraph(){var graph={};first();getToken();if(token=="strict"){graph.strict=true;getToken()}if(token=="graph"||token=="digraph"){graph.type=token;getToken()}if(tokenType==TOKENTYPE.IDENTIFIER){graph.id=token;getToken()}if(token!="{"){throw newSyntaxError("Angle bracket { expected")}getToken();parseStatements(graph);if(token!="}"){throw newSyntaxError("Angle bracket } expected")}getToken();if(token!==""){throw newSyntaxError("End of file expected")}getToken();delete graph.node;delete graph.edge;delete graph.graph;return graph}function parseStatements(graph){while(token!==""&&token!="}"){parseStatement(graph);if(token==";"){getToken()}}}function parseStatement(graph){var subgraph=parseSubgraph(graph);if(subgraph){parseEdge(graph,subgraph);return}var attr=parseAttributeStatement(graph);if(attr){return}if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError("Identifier expected")}var id=token;getToken();if(token=="="){getToken();if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError("Identifier expected")}graph[id]=token;getToken()}else{parseNodeStatement(graph,id)}}function parseSubgraph(graph){var subgraph=null;if(token=="subgraph"){subgraph={};subgraph.type="subgraph";getToken();if(tokenType==TOKENTYPE.IDENTIFIER){subgraph.id=token;getToken()}}if(token=="{"){getToken();if(!subgraph){subgraph={}}subgraph.parent=graph;subgraph.node=graph.node;subgraph.edge=graph.edge;subgraph.graph=graph.graph;parseStatements(subgraph);if(token!="}"){throw newSyntaxError("Angle bracket } expected")}getToken();delete subgraph.node;delete subgraph.edge;delete subgraph.graph;delete subgraph.parent;if(!graph.subgraphs){graph.subgraphs=[]}graph.subgraphs.push(subgraph)}return subgraph}function parseAttributeStatement(graph){if(token=="node"){getToken();graph.node=parseAttributeList();return"node"}else if(token=="edge"){getToken();graph.edge=parseAttributeList();return"edge"}else if(token=="graph"){getToken();graph.graph=parseAttributeList();return"graph"}return null}function parseNodeStatement(graph,id){var node={id:id};var attr=parseAttributeList();if(attr){node.attr=attr}addNode(graph,node);parseEdge(graph,id)}function parseEdge(graph,from){while(token=="->"||token=="--"){var to;var type=token;getToken();var subgraph=parseSubgraph(graph);if(subgraph){to=subgraph}else{if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError("Identifier or subgraph expected")}to=token;addNode(graph,{id:to});getToken()}var attr=parseAttributeList();var edge=createEdge(graph,from,to,type,attr);addEdge(graph,edge);from=to}}function parseAttributeList(){var attr=null;while(token=="["){getToken();attr={};while(token!==""&&token!="]"){if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError("Attribute name expected")}var name=token;getToken();if(token!="="){throw newSyntaxError("Equal sign = expected")}getToken();if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError("Attribute value expected")}var value=token;setValue(attr,name,value);getToken();if(token==","){getToken()}}if(token!="]"){throw newSyntaxError("Bracket ] expected")}getToken()}return attr}function newSyntaxError(message){return new SyntaxError(message+', got "'+chop(token,30)+'" (char '+index+")")}function chop(text,maxLength){return text.length<=maxLength?text:text.substr(0,27)+"..."}function forEach2(array1,array2,fn){if(Array.isArray(array1)){array1.forEach(function(elem1){if(Array.isArray(array2)){array2.forEach(function(elem2){fn(elem1,elem2)})}else{fn(elem1,array2)}})}else{if(Array.isArray(array2)){array2.forEach(function(elem2){fn(array1,elem2)})}else{fn(array1,array2)}}}function DOTToGraph(data){var dotData=parseDOT(data);var graphData={nodes:[],edges:[],options:{}};if(dotData.nodes){dotData.nodes.forEach(function(dotNode){var graphNode={id:dotNode.id,label:String(dotNode.label||dotNode.id)};merge(graphNode,dotNode.attr);if(graphNode.image){graphNode.shape="image"}graphData.nodes.push(graphNode)})}if(dotData.edges){var convertEdge=function(dotEdge){var graphEdge={from:dotEdge.from,to:dotEdge.to};merge(graphEdge,dotEdge.attr);graphEdge.style=dotEdge.type=="->"?"arrow":"line";return graphEdge};dotData.edges.forEach(function(dotEdge){var from,to;if(dotEdge.from instanceof Object){from=dotEdge.from.nodes}else{from={id:dotEdge.from}}if(dotEdge.to instanceof Object){to=dotEdge.to.nodes}else{to={id:dotEdge.to}}if(dotEdge.from instanceof Object&&dotEdge.from.edges){dotEdge.from.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)})}forEach2(from,to,function(from,to){var subEdge=createEdge(graphData,from.id,to.id,dotEdge.type,dotEdge.attr);var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)});if(dotEdge.to instanceof Object&&dotEdge.to.edges){dotEdge.to.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)})}})}if(dotData.attr){graphData.options=dotData.attr}return graphData}exports.parseDOT=parseDOT;exports.DOTToGraph=DOTToGraph},function(module,exports,__webpack_require__){function parseGephi(gephiJSON,options){var edges=[];var nodes=[];this.options={edges:{inheritColor:true},nodes:{allowedToMove:false,parseColor:false}};if(options!==undefined){this.options.nodes["allowedToMove"]=options.allowedToMove|false;this.options.nodes["parseColor"]=options.parseColor|false;this.options.edges["inheritColor"]=options.inheritColor|true}var gEdges=gephiJSON.edges;var gNodes=gephiJSON.nodes;for(var i=0;i<gEdges.length;i++){var edge={};var gEdge=gEdges[i];edge["id"]=gEdge.id;edge["from"]=gEdge.source;edge["to"]=gEdge.target;edge["attributes"]=gEdge.attributes;edge["color"]=gEdge.color;edge["inheritColor"]=edge["color"]!==undefined?false:this.options.inheritColor;edges.push(edge)}for(var i=0;i<gNodes.length;i++){var node={};var gNode=gNodes[i];node["id"]=gNode.id;node["attributes"]=gNode.attributes;node["x"]=gNode.x;node["y"]=gNode.y;node["label"]=gNode.label;if(this.options.nodes.parseColor==true){node["color"]=gNode.color}else{node["color"]=gNode.color!==undefined?{background:gNode.color,border:gNode.color}:undefined}node["radius"]=gNode.size;node["allowedToMoveX"]=this.options.nodes.allowedToMove;node["allowedToMoveY"]=this.options.nodes.allowedToMove;nodes.push(node)}return{nodes:nodes,edges:edges}}exports.parseGephi=parseGephi},function(module,exports,__webpack_require__){var util=__webpack_require__(1);function Groups(){this.clear();this.defaultIndex=0}Groups.DEFAULT=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}}];Groups.prototype.clear=function(){this.groups={};this.groups.length=function(){var i=0;for(var p in this){if(this.hasOwnProperty(p)){i++}}return i}};Groups.prototype.get=function(groupname){var group=this.groups[groupname];if(group==undefined){var index=this.defaultIndex%Groups.DEFAULT.length;this.defaultIndex++;group={};group.color=Groups.DEFAULT[index];this.groups[groupname]=group}return group};Groups.prototype.add=function(groupname,style){this.groups[groupname]=style;if(style.color){style.color=util.parseColor(style.color)}return style};module.exports=Groups},function(module,exports,__webpack_require__){function Images(){this.images={};this.callback=undefined}Images.prototype.setOnloadCallback=function(callback){this.callback=callback};Images.prototype.load=function(url,brokenUrl){var img=this.images[url];if(img==undefined){var images=this;img=new Image;this.images[url]=img;img.onload=function(){if(images.callback){images.callback(this)}};img.onerror=function(){this.src=brokenUrl;if(images.callback){images.callback(this)}};img.src=url}return img};module.exports=Images},function(module,exports,__webpack_require__){var util=__webpack_require__(1);function Node(properties,imagelist,grouplist,networkConstants){var constants=util.selectiveBridgeObject(["nodes"],networkConstants);this.options=constants.nodes;this.selected=false;this.hover=false;this.edges=[];this.dynamicEdges=[];this.reroutedEdges={};this.fontDrawThreshold=3;this.id=undefined;this.x=null;this.y=null;this.allowedToMoveX=false;this.allowedToMoveY=false;this.xFixed=false;this.yFixed=false;this.horizontalAlignLeft=true;this.verticalAlignTop=true;this.baseRadiusValue=networkConstants.nodes.radius;this.radiusFixed=false;this.level=-1;this.preassignedLevel=false;this.hierarchyEnumerated=false;this.labelDimensions={top:0,left:0,width:0,height:0,yLine:0};this.boundingBox={top:0,left:0,right:0,bottom:0};this.imagelist=imagelist;this.grouplist=grouplist;this.fx=0;this.fy=0;this.vx=0;this.vy=0;this.damping=networkConstants.physics.damping;this.fixedData={x:null,y:null};this.setProperties(properties,constants);this.resetCluster();this.dynamicEdgesLength=0;this.clusterSession=0;this.clusterSizeWidthFactor=networkConstants.clustering.nodeScaling.width;this.clusterSizeHeightFactor=networkConstants.clustering.nodeScaling.height;this.clusterSizeRadiusFactor=networkConstants.clustering.nodeScaling.radius;this.maxNodeSizeIncrements=networkConstants.clustering.maxNodeSizeIncrements;this.growthIndicator=0;this.networkScaleInv=1;this.networkScale=1;this.canvasTopLeft={x:-300,y:-300};this.canvasBottomRight={x:300,y:300};this.parentEdgeId=null}Node.prototype.resetCluster=function(){this.formationScale=undefined;this.clusterSize=1;this.containedNodes={};this.containedEdges={};this.clusterSessions=[]};Node.prototype.attachEdge=function(edge){if(this.edges.indexOf(edge)==-1){this.edges.push(edge)}if(this.dynamicEdges.indexOf(edge)==-1){this.dynamicEdges.push(edge)}this.dynamicEdgesLength=this.dynamicEdges.length};Node.prototype.detachEdge=function(edge){var index=this.edges.indexOf(edge);if(index!=-1){this.edges.splice(index,1)}index=this.dynamicEdges.indexOf(edge);if(index!=-1){this.dynamicEdges.splice(index,1)}this.dynamicEdgesLength=this.dynamicEdges.length};Node.prototype.setProperties=function(properties,constants){if(!properties){return}var fields=["borderWidth","borderWidthSelected","shape","image","brokenImage","radius","fontColor","fontSize","fontFace","fontFill","group","mass"];util.selectiveDeepExtend(fields,this.options,properties);if(properties.id!==undefined){this.id=properties.id}if(properties.label!==undefined){this.label=properties.label;this.originalLabel=properties.label}if(properties.title!==undefined){this.title=properties.title}if(properties.x!==undefined){this.x=properties.x}if(properties.y!==undefined){this.y=properties.y}if(properties.value!==undefined){this.value=properties.value}if(properties.level!==undefined){this.level=properties.level;this.preassignedLevel=true}if(properties.horizontalAlignLeft!==undefined){this.horizontalAlignLeft=properties.horizontalAlignLeft}if(properties.verticalAlignTop!==undefined){this.verticalAlignTop=properties.verticalAlignTop}if(properties.triggerFunction!==undefined){this.triggerFunction=properties.triggerFunction}if(this.id===undefined){throw"Node must have an id"}if(typeof this.options.group==="number"||typeof this.options.group==="string"&&this.options.group!=""){var groupObj=this.grouplist.get(this.options.group);for(var prop in groupObj){if(groupObj.hasOwnProperty(prop)){this.options[prop]=groupObj[prop]}}}if(properties.radius!==undefined){this.baseRadiusValue=this.options.radius}if(properties.color!==undefined){this.options.color=util.parseColor(properties.color)}if(this.options.image!==undefined&&this.options.image!=""){if(this.imagelist){this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage)}else{throw"No imagelist provided"}}if(properties.allowedToMoveX!==undefined){this.xFixed=!properties.allowedToMoveX;this.allowedToMoveX=properties.allowedToMoveX}else if(properties.x!==undefined&&this.allowedToMoveX==false){this.xFixed=true}if(properties.allowedToMoveY!==undefined){this.yFixed=!properties.allowedToMoveY;this.allowedToMoveY=properties.allowedToMoveY}else if(properties.y!==undefined&&this.allowedToMoveY==false){this.yFixed=true}this.radiusFixed=this.radiusFixed||properties.radius!==undefined;if(this.options.shape=="image"){this.options.radiusMin=constants.nodes.widthMin;this.options.radiusMax=constants.nodes.widthMax}switch(this.options.shape){case"database":this.draw=this._drawDatabase;this.resize=this._resizeDatabase;break;case"box":this.draw=this._drawBox;this.resize=this._resizeBox;break;case"circle":this.draw=this._drawCircle;this.resize=this._resizeCircle;break;case"ellipse":this.draw=this._drawEllipse;this.resize=this._resizeEllipse;break;case"image":this.draw=this._drawImage;this.resize=this._resizeImage;break;case"text":this.draw=this._drawText;this.resize=this._resizeText;break;case"dot":this.draw=this._drawDot;this.resize=this._resizeShape;break;case"square":this.draw=this._drawSquare;this.resize=this._resizeShape;break;case"triangle":this.draw=this._drawTriangle;this.resize=this._resizeShape;break;case"triangleDown":this.draw=this._drawTriangleDown;this.resize=this._resizeShape;break;case"star":this.draw=this._drawStar;this.resize=this._resizeShape;break;default:this.draw=this._drawEllipse;this.resize=this._resizeEllipse;break}this._reset()};Node.prototype.select=function(){this.selected=true;this._reset()};Node.prototype.unselect=function(){this.selected=false;this._reset()};Node.prototype.clearSizeCache=function(){this._reset()};Node.prototype._reset=function(){this.width=undefined;this.height=undefined};Node.prototype.getTitle=function(){return typeof this.title==="function"?this.title():this.title};Node.prototype.distanceToBorder=function(ctx,angle){var borderWidth=1;if(!this.width){this.resize(ctx)}switch(this.options.shape){case"circle":case"dot":return this.options.radius+borderWidth;case"ellipse":var a=this.width/2;var b=this.height/2;var w=Math.sin(angle)*a;var h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);case"box":case"image":case"text":default:if(this.width){return Math.min(Math.abs(this.width/2/Math.cos(angle)),Math.abs(this.height/2/Math.sin(angle)))+borderWidth}else{return 0}}};Node.prototype._setForce=function(fx,fy){this.fx=fx;this.fy=fy};Node.prototype._addForce=function(fx,fy){this.fx+=fx;this.fy+=fy};Node.prototype.discreteStep=function(interval){if(!this.xFixed){var dx=this.damping*this.vx;var ax=(this.fx-dx)/this.options.mass;this.vx+=ax*interval;this.x+=this.vx*interval}else{this.fx=0;this.vx=0}if(!this.yFixed){var dy=this.damping*this.vy;var ay=(this.fy-dy)/this.options.mass;this.vy+=ay*interval;this.y+=this.vy*interval}else{this.fy=0;this.vy=0}};Node.prototype.discreteStepLimited=function(interval,maxVelocity){if(!this.xFixed){var dx=this.damping*this.vx;var ax=(this.fx-dx)/this.options.mass;this.vx+=ax*interval;this.vx=Math.abs(this.vx)>maxVelocity?this.vx>0?maxVelocity:-maxVelocity:this.vx;this.x+=this.vx*interval}else{this.fx=0;this.vx=0}if(!this.yFixed){var dy=this.damping*this.vy;var ay=(this.fy-dy)/this.options.mass;this.vy+=ay*interval;this.vy=Math.abs(this.vy)>maxVelocity?this.vy>0?maxVelocity:-maxVelocity:this.vy;this.y+=this.vy*interval}else{this.fy=0;this.vy=0}};Node.prototype.isFixed=function(){return this.xFixed&&this.yFixed};Node.prototype.isMoving=function(vmin){var velocity=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2));return velocity>vmin};Node.prototype.isSelected=function(){return this.selected};Node.prototype.getValue=function(){return this.value};Node.prototype.getDistance=function(x,y){var dx=this.x-x,dy=this.y-y;return Math.sqrt(dx*dx+dy*dy)};Node.prototype.setValueRange=function(min,max){if(!this.radiusFixed&&this.value!==undefined){if(max==min){this.options.radius=(this.options.radiusMin+this.options.radiusMax)/2}else{var scale=(this.options.radiusMax-this.options.radiusMin)/(max-min);this.options.radius=(this.value-min)*scale+this.options.radiusMin}}this.baseRadiusValue=this.options.radius};Node.prototype.draw=function(ctx){throw"Draw method not initialized for node"};Node.prototype.resize=function(ctx){throw"Resize method not initialized for node"};Node.prototype.isOverlappingWith=function(obj){return this.left<obj.right&&this.left+this.width>obj.left&&this.top<obj.bottom&&this.top+this.height>obj.top};Node.prototype._resizeImage=function(ctx){if(!this.width||!this.height){var width,height;if(this.value){this.options.radius=this.baseRadiusValue;var scale=this.imageObj.height/this.imageObj.width;if(scale!==undefined){width=this.options.radius||this.imageObj.width;height=this.options.radius*scale||this.imageObj.height}else{width=0;height=0}}else{width=this.imageObj.width;height=this.imageObj.height}this.width=width;this.height=height;this.growthIndicator=0;if(this.width>0&&this.height>0){this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-width}}};Node.prototype._drawImage=function(ctx){this._resizeImage(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var yLabel;if(this.imageObj.width!=0){if(this.clusterSize>1){var lineWidth=this.clusterSize>1?10:0;lineWidth*=this.networkScaleInv;lineWidth=Math.min(.2*this.width,lineWidth);ctx.globalAlpha=.5;ctx.drawImage(this.imageObj,this.left-lineWidth,this.top-lineWidth,this.width+2*lineWidth,this.height+2*lineWidth)}ctx.globalAlpha=1;ctx.drawImage(this.imageObj,this.left,this.top,this.width,this.height);yLabel=this.y+this.height/2}else{yLabel=this.y}this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;this._label(ctx,this.label,this.x,yLabel,undefined,"top");this.boundingBox.left=Math.min(this.boundingBox.left,this.labelDimensions.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelDimensions.left+this.labelDimensions.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelDimensions.height)};Node.prototype._resizeBox=function(ctx){if(!this.width){var margin=5;var textSize=this.getTextSize(ctx);
this.width=textSize.width+2*margin;this.height=textSize.height+2*margin;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeHeightFactor;this.growthIndicator=this.width-(textSize.width+2*margin)}};Node.prototype._drawBox=function(ctx){this._resizeBox(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var clusterLineWidth=2.5;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;if(this.clusterSize>1){ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.roundRect(this.left-2*ctx.lineWidth,this.top-2*ctx.lineWidth,this.width+4*ctx.lineWidth,this.height+4*ctx.lineWidth,this.options.radius);ctx.stroke()}ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=this.selected?this.options.color.highlight.background:this.options.color.background;ctx.roundRect(this.left,this.top,this.width,this.height,this.options.radius);ctx.fill();ctx.stroke();this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;this._label(ctx,this.label,this.x,this.y)};Node.prototype._resizeDatabase=function(ctx){if(!this.width){var margin=5;var textSize=this.getTextSize(ctx);var size=textSize.width+2*margin;this.width=size;this.height=size;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-size}};Node.prototype._drawDatabase=function(ctx){this._resizeDatabase(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var clusterLineWidth=2.5;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;if(this.clusterSize>1){ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.database(this.x-this.width/2-2*ctx.lineWidth,this.y-this.height*.5-2*ctx.lineWidth,this.width+4*ctx.lineWidth,this.height+4*ctx.lineWidth);ctx.stroke()}ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;ctx.database(this.x-this.width/2,this.y-this.height*.5,this.width,this.height);ctx.fill();ctx.stroke();this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;this._label(ctx,this.label,this.x,this.y)};Node.prototype._resizeCircle=function(ctx){if(!this.width){var margin=5;var textSize=this.getTextSize(ctx);var diameter=Math.max(textSize.width,textSize.height)+2*margin;this.options.radius=diameter/2;this.width=diameter;this.height=diameter;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeRadiusFactor;this.growthIndicator=this.options.radius-.5*diameter}};Node.prototype._drawCircle=function(ctx){this._resizeCircle(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var clusterLineWidth=2.5;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;if(this.clusterSize>1){ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.circle(this.x,this.y,this.options.radius+2*ctx.lineWidth);ctx.stroke()}ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;ctx.circle(this.x,this.y,this.options.radius);ctx.fill();ctx.stroke();this.boundingBox.top=this.y-this.options.radius;this.boundingBox.left=this.x-this.options.radius;this.boundingBox.right=this.x+this.options.radius;this.boundingBox.bottom=this.y+this.options.radius;this._label(ctx,this.label,this.x,this.y)};Node.prototype._resizeEllipse=function(ctx){if(!this.width){var textSize=this.getTextSize(ctx);this.width=textSize.width*1.5;this.height=textSize.height*2;if(this.width<this.height){this.width=this.height}var defaultSize=this.width;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-defaultSize}};Node.prototype._drawEllipse=function(ctx){this._resizeEllipse(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var clusterLineWidth=2.5;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;if(this.clusterSize>1){ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.ellipse(this.left-2*ctx.lineWidth,this.top-2*ctx.lineWidth,this.width+4*ctx.lineWidth,this.height+4*ctx.lineWidth);ctx.stroke()}ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;ctx.ellipse(this.left,this.top,this.width,this.height);ctx.fill();ctx.stroke();this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;this._label(ctx,this.label,this.x,this.y)};Node.prototype._drawDot=function(ctx){this._drawShape(ctx,"circle")};Node.prototype._drawTriangle=function(ctx){this._drawShape(ctx,"triangle")};Node.prototype._drawTriangleDown=function(ctx){this._drawShape(ctx,"triangleDown")};Node.prototype._drawSquare=function(ctx){this._drawShape(ctx,"square")};Node.prototype._drawStar=function(ctx){this._drawShape(ctx,"star")};Node.prototype._resizeShape=function(ctx){if(!this.width){this.options.radius=this.baseRadiusValue;var size=2*this.options.radius;this.width=size;this.height=size;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-size}};Node.prototype._drawShape=function(ctx,shape){this._resizeShape(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var clusterLineWidth=2.5;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;var radiusMultiplier=2;switch(shape){case"dot":radiusMultiplier=2;break;case"square":radiusMultiplier=2;break;case"triangle":radiusMultiplier=3;break;case"triangleDown":radiusMultiplier=3;break;case"star":radiusMultiplier=4;break}ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;if(this.clusterSize>1){ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx[shape](this.x,this.y,this.options.radius+radiusMultiplier*ctx.lineWidth);ctx.stroke()}ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0);ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;ctx[shape](this.x,this.y,this.options.radius);ctx.fill();ctx.stroke();this.boundingBox.top=this.y-this.options.radius;this.boundingBox.left=this.x-this.options.radius;this.boundingBox.right=this.x+this.options.radius;this.boundingBox.bottom=this.y+this.options.radius;if(this.label){this._label(ctx,this.label,this.x,this.y+this.height/2,undefined,"top",true);this.boundingBox.left=Math.min(this.boundingBox.left,this.labelDimensions.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelDimensions.left+this.labelDimensions.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelDimensions.height)}};Node.prototype._resizeText=function(ctx){if(!this.width){var margin=5;var textSize=this.getTextSize(ctx);this.width=textSize.width+2*margin;this.height=textSize.height+2*margin;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-(textSize.width+2*margin)}};Node.prototype._drawText=function(ctx){this._resizeText(ctx);this.left=this.x-this.width/2;this.top=this.y-this.height/2;this._label(ctx,this.label,this.x,this.y);this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height};Node.prototype._label=function(ctx,text,x,y,align,baseline,labelUnderNode){if(text&&Number(this.options.fontSize)*this.networkScale>this.fontDrawThreshold){ctx.font=(this.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var lines=text.split("\n");var lineCount=lines.length;var fontSize=Number(this.options.fontSize)+4;var yLine=y+(1-lineCount)/2*fontSize;if(labelUnderNode==true){yLine=y+(1-lineCount)/(2*fontSize)}var width=ctx.measureText(lines[0]).width;for(var i=1;i<lineCount;i++){var lineWidth=ctx.measureText(lines[i]).width;width=lineWidth>width?lineWidth:width}var height=this.options.fontSize*lineCount;var left=x-width/2;var top=y-height/2;if(baseline=="top"){top+=.5*fontSize}this.labelDimensions={top:top,left:left,width:width,height:height,yLine:yLine};if(this.options.fontFill!==undefined&&this.options.fontFill!==null&&this.options.fontFill!=="none"){ctx.fillStyle=this.options.fontFill;ctx.fillRect(left,top,width,height)}ctx.fillStyle=this.options.fontColor||"black";ctx.textAlign=align||"center";ctx.textBaseline=baseline||"middle";for(var i=0;i<lineCount;i++){ctx.fillText(lines[i],x,yLine);yLine+=fontSize}}};Node.prototype.getTextSize=function(ctx){if(this.label!==undefined){ctx.font=(this.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var lines=this.label.split("\n"),height=(Number(this.options.fontSize)+4)*lines.length,width=0;for(var i=0,iMax=lines.length;i<iMax;i++){width=Math.max(width,ctx.measureText(lines[i]).width)}return{width:width,height:height}}else{return{width:0,height:0}}};Node.prototype.inArea=function(){if(this.width!==undefined){return this.x+this.width*this.networkScaleInv>=this.canvasTopLeft.x&&this.x-this.width*this.networkScaleInv<this.canvasBottomRight.x&&this.y+this.height*this.networkScaleInv>=this.canvasTopLeft.y&&this.y-this.height*this.networkScaleInv<this.canvasBottomRight.y}else{return true}};Node.prototype.inView=function(){return this.x>=this.canvasTopLeft.x&&this.x<this.canvasBottomRight.x&&this.y>=this.canvasTopLeft.y&&this.y<this.canvasBottomRight.y};Node.prototype.setScaleAndPos=function(scale,canvasTopLeft,canvasBottomRight){this.networkScaleInv=1/scale;this.networkScale=scale;this.canvasTopLeft=canvasTopLeft;this.canvasBottomRight=canvasBottomRight};Node.prototype.setScale=function(scale){this.networkScaleInv=1/scale;this.networkScale=scale};Node.prototype.clearVelocity=function(){this.vx=0;this.vy=0};Node.prototype.updateVelocity=function(massBeforeClustering){var energyBefore=this.vx*this.vx*massBeforeClustering;this.vx=Math.sqrt(energyBefore/this.options.mass);energyBefore=this.vy*this.vy*massBeforeClustering;this.vy=Math.sqrt(energyBefore/this.options.mass)};module.exports=Node},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Node=__webpack_require__(56);function Edge(properties,network,networkConstants){if(!network){throw"No network provided"}var fields=["edges","physics"];var constants=util.selectiveBridgeObject(fields,networkConstants);this.options=constants.edges;this.physics=constants.physics;this.options["smoothCurves"]=networkConstants["smoothCurves"];this.network=network;this.id=undefined;this.fromId=undefined;this.toId=undefined;this.title=undefined;this.widthSelected=this.options.width*this.options.widthSelectionMultiplier;this.value=undefined;this.selected=false;this.hover=false;this.labelDimensions={top:0,left:0,width:0,height:0,yLine:0};this.dirtyLabel=true;this.from=null;this.to=null;this.via=null;this.fromBackup=null;this.toBackup=null;this.originalFromId=[];this.originalToId=[];this.connected=false;this.widthFixed=false;this.lengthFixed=false;this.setProperties(properties);this.controlNodesEnabled=false;this.controlNodes={from:null,to:null,positions:{}};this.connectedNode=null}Edge.prototype.setProperties=function(properties){if(!properties){return}var fields=["style","fontSize","fontFace","fontColor","fontFill","width","widthSelectionMultiplier","hoverWidth","arrowScaleFactor","dash","inheritColor"];util.selectiveDeepExtend(fields,this.options,properties);if(properties.from!==undefined){this.fromId=properties.from}if(properties.to!==undefined){this.toId=properties.to}if(properties.id!==undefined){this.id=properties.id}if(properties.label!==undefined){this.label=properties.label;this.dirtyLabel=true}if(properties.title!==undefined){this.title=properties.title}if(properties.value!==undefined){this.value=properties.value}if(properties.length!==undefined){this.physics.springLength=properties.length}if(properties.color!==undefined){this.options.inheritColor=false;if(util.isString(properties.color)){this.options.color.color=properties.color;this.options.color.highlight=properties.color}else{if(properties.color.color!==undefined){this.options.color.color=properties.color.color}if(properties.color.highlight!==undefined){this.options.color.highlight=properties.color.highlight}if(properties.color.hover!==undefined){this.options.color.hover=properties.color.hover}}}this.connect();this.widthFixed=this.widthFixed||properties.width!==undefined;this.lengthFixed=this.lengthFixed||properties.length!==undefined;this.widthSelected=this.options.width*this.options.widthSelectionMultiplier;switch(this.options.style){case"line":this.draw=this._drawLine;break;case"arrow":this.draw=this._drawArrow;break;case"arrow-center":this.draw=this._drawArrowCenter;break;case"dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine;break}};Edge.prototype.connect=function(){this.disconnect();this.from=this.network.nodes[this.fromId]||null;this.to=this.network.nodes[this.toId]||null;this.connected=this.from&&this.to;if(this.connected){this.from.attachEdge(this);this.to.attachEdge(this)}else{if(this.from){this.from.detachEdge(this)}if(this.to){this.to.detachEdge(this)}}};Edge.prototype.disconnect=function(){if(this.from){this.from.detachEdge(this);this.from=null}if(this.to){this.to.detachEdge(this);this.to=null}this.connected=false};Edge.prototype.getTitle=function(){return typeof this.title==="function"?this.title():this.title};Edge.prototype.getValue=function(){return this.value};Edge.prototype.setValueRange=function(min,max){if(!this.widthFixed&&this.value!==undefined){var scale=(this.options.widthMax-this.options.widthMin)/(max-min);this.options.width=(this.value-min)*scale+this.options.widthMin;this.widthSelected=this.options.width*this.options.widthSelectionMultiplier}};Edge.prototype.draw=function(ctx){throw"Method draw not initialized in edge"};Edge.prototype.isOverlappingWith=function(obj){if(this.connected){var distMax=10;var xFrom=this.from.x;var yFrom=this.from.y;var xTo=this.to.x;var yTo=this.to.y;var xObj=obj.left;var yObj=obj.top;var dist=this._getDistanceToEdge(xFrom,yFrom,xTo,yTo,xObj,yObj);return dist<distMax}else{return false}};Edge.prototype._getColor=function(){var colorObj=this.options.color;if(this.options.inheritColor=="to"){colorObj={highlight:this.to.options.color.highlight.border,hover:this.to.options.color.hover.border,color:this.to.options.color.border}}else if(this.options.inheritColor=="from"||this.options.inheritColor==true){colorObj={highlight:this.from.options.color.highlight.border,hover:this.from.options.color.hover.border,color:this.from.options.color.border}}if(this.selected==true){return colorObj.highlight}else if(this.hover==true){return colorObj.hover}else{return colorObj.color}};Edge.prototype._drawLine=function(ctx){ctx.strokeStyle=this._getColor();ctx.lineWidth=this._getLineWidth();if(this.from!=this.to){var via=this._line(ctx);var point;if(this.label){if(this.options.smoothCurves.enabled==true&&via!=null){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x));var midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else{point=this._pointOnLine(.5)}this._label(ctx,this.label,point.x,point.y)}}else{var x,y;var radius=this.physics.springLength/4;var node=this.from;if(!node.width){node.resize(ctx)}if(node.width>node.height){x=node.x+node.width/2;y=node.y-radius}else{x=node.x+radius;y=node.y-node.height/2}this._circle(ctx,x,y,radius);point=this._pointOnCircle(x,y,radius,.5);this._label(ctx,this.label,point.x,point.y)}};Edge.prototype._getLineWidth=function(){if(this.selected==true){return Math.max(Math.min(this.widthSelected,this.options.widthMax),.3*this.networkScaleInv)}else{if(this.hover==true){return Math.max(Math.min(this.options.hoverWidth,this.options.widthMax),.3*this.networkScaleInv)}else{return Math.max(this.options.width,.3*this.networkScaleInv)}}};Edge.prototype._getViaCoordinates=function(){var xVia=null;var yVia=null;var factor=this.options.smoothCurves.roundness;var type=this.options.smoothCurves.type;var dx=Math.abs(this.from.x-this.to.x);var dy=Math.abs(this.from.y-this.to.y);if(type=="discrete"||type=="diagonalCross"){if(Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y-factor*dy}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y-factor*dy}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y+factor*dy}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y+factor*dy}}if(type=="discrete"){xVia=dx<factor*dy?this.from.x:xVia}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y-factor*dx}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y-factor*dx}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y+factor*dx}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y+factor*dx}}if(type=="discrete"){yVia=dy<factor*dx?this.from.y:yVia}}}else if(type=="straightCross"){if(Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)){xVia=this.from.x;if(this.from.y<this.to.y){yVia=this.to.y-(1-factor)*dy}else{yVia=this.to.y+(1-factor)*dy}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.x<this.to.x){xVia=this.to.x-(1-factor)*dx}else{xVia=this.to.x+(1-factor)*dx}yVia=this.from.y}}else if(type=="horizontal"){if(this.from.x<this.to.x){xVia=this.to.x-(1-factor)*dx}else{xVia=this.to.x+(1-factor)*dx}yVia=this.from.y}else if(type=="vertical"){xVia=this.from.x;if(this.from.y<this.to.y){yVia=this.to.y-(1-factor)*dy}else{yVia=this.to.y+(1-factor)*dy}}else{if(Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y-factor*dy;xVia=this.to.x<xVia?this.to.x:xVia}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y-factor*dy;xVia=this.to.x>xVia?this.to.x:xVia}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y+factor*dy;xVia=this.to.x<xVia?this.to.x:xVia}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y+factor*dy;xVia=this.to.x>xVia?this.to.x:xVia}}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y-factor*dx;yVia=this.to.y>yVia?this.to.y:yVia}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y-factor*dx;yVia=this.to.y>yVia?this.to.y:yVia}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y+factor*dx;yVia=this.to.y<yVia?this.to.y:yVia}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y+factor*dx;yVia=this.to.y<yVia?this.to.y:yVia}}}}return{x:xVia,y:yVia}};Edge.prototype._line=function(ctx){ctx.beginPath();ctx.moveTo(this.from.x,this.from.y);if(this.options.smoothCurves.enabled==true){if(this.options.smoothCurves.dynamic==false){var via=this._getViaCoordinates();if(via.x==null){ctx.lineTo(this.to.x,this.to.y);ctx.stroke();return null}else{ctx.quadraticCurveTo(via.x,via.y,this.to.x,this.to.y);ctx.stroke();return via}}else{ctx.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y);ctx.stroke();return this.via}}else{ctx.lineTo(this.to.x,this.to.y);ctx.stroke();return null}};Edge.prototype._circle=function(ctx,x,y,radius){ctx.beginPath();ctx.arc(x,y,radius,0,2*Math.PI,false);ctx.stroke()};Edge.prototype._label=function(ctx,text,x,y){if(text){ctx.font=(this.from.selected||this.to.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var yLine;if(this.dirtyLabel==true){var lines=String(text).split("\n");var lineCount=lines.length;var fontSize=Number(this.options.fontSize)+4;yLine=y+(1-lineCount)/2*fontSize;var width=ctx.measureText(lines[0]).width;for(var i=1;i<lineCount;i++){var lineWidth=ctx.measureText(lines[i]).width;width=lineWidth>width?lineWidth:width}var height=this.options.fontSize*lineCount;var left=x-width/2;var top=y-height/2;this.labelDimensions={top:top,left:left,width:width,height:height,yLine:yLine}}if(this.options.fontFill!==undefined&&this.options.fontFill!==null&&this.options.fontFill!=="none"){ctx.fillStyle=this.options.fontFill;ctx.fillRect(this.labelDimensions.left,this.labelDimensions.top,this.labelDimensions.width,this.labelDimensions.height)}ctx.fillStyle=this.options.fontColor||"black";ctx.textAlign="center";ctx.textBaseline="middle";yLine=this.labelDimensions.yLine;for(var i=0;i<lineCount;i++){ctx.fillText(lines[i],x,yLine);yLine+=fontSize}}};Edge.prototype._drawDashLine=function(ctx){ctx.strokeStyle=this._getColor();ctx.lineWidth=this._getLineWidth();var via=null;if(ctx.mozDash!==undefined||ctx.setLineDash!==undefined){var pattern=[0];if(this.options.dash.length!==undefined&&this.options.dash.gap!==undefined){pattern=[this.options.dash.length,this.options.dash.gap]}else{pattern=[5,5]}if(typeof ctx.setLineDash!=="undefined"){ctx.setLineDash(pattern);ctx.lineDashOffset=0}else{ctx.mozDash=pattern;ctx.mozDashOffset=0}via=this._line(ctx);if(typeof ctx.setLineDash!=="undefined"){ctx.setLineDash([0]);ctx.lineDashOffset=0}else{ctx.mozDash=[0];ctx.mozDashOffset=0}}else{ctx.beginPath();ctx.lineCap="round";if(this.options.dash.altLength!==undefined){ctx.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap,this.options.dash.altLength,this.options.dash.gap])}else if(this.options.dash.length!==undefined&&this.options.dash.gap!==undefined){ctx.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap])}else{ctx.moveTo(this.from.x,this.from.y);ctx.lineTo(this.to.x,this.to.y)}ctx.stroke()}if(this.label){var point;if(this.options.smoothCurves.enabled==true&&via!=null){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x));var midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else{point=this._pointOnLine(.5)}this._label(ctx,this.label,point.x,point.y)}};Edge.prototype._pointOnLine=function(percentage){return{x:(1-percentage)*this.from.x+percentage*this.to.x,y:(1-percentage)*this.from.y+percentage*this.to.y}};Edge.prototype._pointOnCircle=function(x,y,radius,percentage){var angle=(percentage-3/8)*2*Math.PI;return{x:x+radius*Math.cos(angle),y:y-radius*Math.sin(angle)}};Edge.prototype._drawArrowCenter=function(ctx){var point;ctx.strokeStyle=this._getColor();ctx.fillStyle=ctx.strokeStyle;ctx.lineWidth=this._getLineWidth();if(this.from!=this.to){var via=this._line(ctx);var angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var length=(10+5*this.options.width)*this.options.arrowScaleFactor;if(this.options.smoothCurves.enabled==true&&via!=null){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x));var midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else{point=this._pointOnLine(.5)}ctx.arrow(point.x,point.y,angle,length);ctx.fill();ctx.stroke();if(this.label){this._label(ctx,this.label,point.x,point.y)}}else{var x,y;var radius=.25*Math.max(100,this.physics.springLength);var node=this.from;if(!node.width){node.resize(ctx)}if(node.width>node.height){x=node.x+node.width*.5;y=node.y-radius}else{x=node.x+radius;y=node.y-node.height*.5}this._circle(ctx,x,y,radius);var angle=.2*Math.PI;var length=(10+5*this.options.width)*this.options.arrowScaleFactor;point=this._pointOnCircle(x,y,radius,.5);ctx.arrow(point.x,point.y,angle,length);ctx.fill();ctx.stroke();if(this.label){point=this._pointOnCircle(x,y,radius,.5);this._label(ctx,this.label,point.x,point.y)}}};Edge.prototype._drawArrow=function(ctx){ctx.strokeStyle=this._getColor();ctx.fillStyle=ctx.strokeStyle;ctx.lineWidth=this._getLineWidth();var angle,length;if(this.from!=this.to){angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var dx=this.to.x-this.from.x;var dy=this.to.y-this.from.y;var edgeSegmentLength=Math.sqrt(dx*dx+dy*dy);var fromBorderDist=this.from.distanceToBorder(ctx,angle+Math.PI);var fromBorderPoint=(edgeSegmentLength-fromBorderDist)/edgeSegmentLength;var xFrom=fromBorderPoint*this.from.x+(1-fromBorderPoint)*this.to.x;var yFrom=fromBorderPoint*this.from.y+(1-fromBorderPoint)*this.to.y;var via;if(this.options.smoothCurves.dynamic==true&&this.options.smoothCurves.enabled==true){via=this.via}else if(this.options.smoothCurves.enabled==true){via=this._getViaCoordinates()}if(this.options.smoothCurves.enabled==true&&via.x!=null){angle=Math.atan2(this.to.y-via.y,this.to.x-via.x);dx=this.to.x-via.x;dy=this.to.y-via.y;edgeSegmentLength=Math.sqrt(dx*dx+dy*dy)}var toBorderDist=this.to.distanceToBorder(ctx,angle);var toBorderPoint=(edgeSegmentLength-toBorderDist)/edgeSegmentLength;var xTo,yTo;if(this.options.smoothCurves.enabled==true&&via.x!=null){xTo=(1-toBorderPoint)*via.x+toBorderPoint*this.to.x;yTo=(1-toBorderPoint)*via.y+toBorderPoint*this.to.y}else{xTo=(1-toBorderPoint)*this.from.x+toBorderPoint*this.to.x;yTo=(1-toBorderPoint)*this.from.y+toBorderPoint*this.to.y}ctx.beginPath();ctx.moveTo(xFrom,yFrom);if(this.options.smoothCurves.enabled==true&&via.x!=null){ctx.quadraticCurveTo(via.x,via.y,xTo,yTo)}else{ctx.lineTo(xTo,yTo)}ctx.stroke();length=(10+5*this.options.width)*this.options.arrowScaleFactor;ctx.arrow(xTo,yTo,angle,length);ctx.fill();ctx.stroke();if(this.label){var point;if(this.options.smoothCurves.enabled==true&&via!=null){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x));var midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else{point=this._pointOnLine(.5)}this._label(ctx,this.label,point.x,point.y)}}else{var node=this.from;var x,y,arrow;var radius=.25*Math.max(100,this.physics.springLength);if(!node.width){node.resize(ctx)}if(node.width>node.height){x=node.x+node.width*.5;y=node.y-radius;arrow={x:x,y:node.y,angle:.9*Math.PI}}else{x=node.x+radius;y=node.y-node.height*.5;arrow={x:node.x,y:y,angle:.6*Math.PI}}ctx.beginPath();ctx.arc(x,y,radius,0,2*Math.PI,false);ctx.stroke();var length=(10+5*this.options.width)*this.options.arrowScaleFactor;ctx.arrow(arrow.x,arrow.y,arrow.angle,length);ctx.fill();ctx.stroke();if(this.label){point=this._pointOnCircle(x,y,radius,.5);this._label(ctx,this.label,point.x,point.y)}}};Edge.prototype._getDistanceToEdge=function(x1,y1,x2,y2,x3,y3){var returnValue=0;if(this.from!=this.to){if(this.options.smoothCurves.enabled==true){var xVia,yVia;if(this.options.smoothCurves.enabled==true&&this.options.smoothCurves.dynamic==true){xVia=this.via.x;yVia=this.via.y}else{var via=this._getViaCoordinates();xVia=via.x;yVia=via.y}var minDistance=1e9;var distance;var i,t,x,y,lastX,lastY;for(i=0;i<10;i++){t=.1*i;x=Math.pow(1-t,2)*x1+2*t*(1-t)*xVia+Math.pow(t,2)*x2;y=Math.pow(1-t,2)*y1+2*t*(1-t)*yVia+Math.pow(t,2)*y2;if(i>0){distance=this._getDistanceToLine(lastX,lastY,x,y,x3,y3);minDistance=distance<minDistance?distance:minDistance}lastX=x;lastY=y}returnValue=minDistance}else{returnValue=this._getDistanceToLine(x1,y1,x2,y2,x3,y3)}}else{var x,y,dx,dy;var radius=.25*this.physics.springLength;var node=this.from;if(node.width>node.height){x=node.x+.5*node.width;y=node.y-radius}else{x=node.x+radius;y=node.y-.5*node.height}dx=x-x3;dy=y-y3;returnValue=Math.abs(Math.sqrt(dx*dx+dy*dy)-radius)}if(this.labelDimensions.left<x3&&this.labelDimensions.left+this.labelDimensions.width>x3&&this.labelDimensions.top<y3&&this.labelDimensions.top+this.labelDimensions.height>y3){return 0}else{return returnValue}};Edge.prototype._getDistanceToLine=function(x1,y1,x2,y2,x3,y3){var px=x2-x1,py=y2-y1,something=px*px+py*py,u=((x3-x1)*px+(y3-y1)*py)/something;if(u>1){u=1}else if(u<0){u=0}var x=x1+u*px,y=y1+u*py,dx=x-x3,dy=y-y3;return Math.sqrt(dx*dx+dy*dy)};Edge.prototype.setScale=function(scale){this.networkScaleInv=1/scale};Edge.prototype.select=function(){this.selected=true};Edge.prototype.unselect=function(){this.selected=false};Edge.prototype.positionBezierNode=function(){if(this.via!==null&&this.from!==null&&this.to!==null){this.via.x=.5*(this.from.x+this.to.x);this.via.y=.5*(this.from.y+this.to.y)}else{this.via.x=0;this.via.y=0}};Edge.prototype._drawControlNodes=function(ctx){if(this.controlNodesEnabled==true){if(this.controlNodes.from===null&&this.controlNodes.to===null){var nodeIdFrom="edgeIdFrom:".concat(this.id);
var nodeIdTo="edgeIdTo:".concat(this.id);var constants={nodes:{group:"",radius:8},physics:{damping:0},clustering:{maxNodeSizeIncrements:0,nodeScaling:{width:0,height:0,radius:0}}};this.controlNodes.from=new Node({id:nodeIdFrom,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},constants);this.controlNodes.to=new Node({id:nodeIdTo,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},constants)}if(this.controlNodes.from.selected==false&&this.controlNodes.to.selected==false){this.controlNodes.positions=this.getControlNodePositions(ctx);this.controlNodes.from.x=this.controlNodes.positions.from.x;this.controlNodes.from.y=this.controlNodes.positions.from.y;this.controlNodes.to.x=this.controlNodes.positions.to.x;this.controlNodes.to.y=this.controlNodes.positions.to.y}this.controlNodes.from.draw(ctx);this.controlNodes.to.draw(ctx)}else{this.controlNodes={from:null,to:null,positions:{}}}};Edge.prototype._enableControlNodes=function(){this.fromBackup=this.from;this.toBackup=this.to;this.controlNodesEnabled=true};Edge.prototype._disableControlNodes=function(){this.fromId=this.from.id;this.toId=this.to.id;if(this.fromId!=this.fromBackup.id){this.fromBackup.detachEdge(this)}else if(this.toId!=this.toBackup.id){this.toBackup.detachEdge(this)}this.fromBackup=null;this.toBackup=null;this.controlNodesEnabled=false};Edge.prototype._getSelectedControlNode=function(x,y){var positions=this.controlNodes.positions;var fromDistance=Math.sqrt(Math.pow(x-positions.from.x,2)+Math.pow(y-positions.from.y,2));var toDistance=Math.sqrt(Math.pow(x-positions.to.x,2)+Math.pow(y-positions.to.y,2));if(fromDistance<15){this.connectedNode=this.from;this.from=this.controlNodes.from;return this.controlNodes.from}else if(toDistance<15){this.connectedNode=this.to;this.to=this.controlNodes.to;return this.controlNodes.to}else{return null}};Edge.prototype._restoreControlNodes=function(){if(this.controlNodes.from.selected==true){this.from=this.connectedNode;this.connectedNode=null;this.controlNodes.from.unselect()}else if(this.controlNodes.to.selected==true){this.to=this.connectedNode;this.connectedNode=null;this.controlNodes.to.unselect()}};Edge.prototype.getControlNodePositions=function(ctx){var angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var dx=this.to.x-this.from.x;var dy=this.to.y-this.from.y;var edgeSegmentLength=Math.sqrt(dx*dx+dy*dy);var fromBorderDist=this.from.distanceToBorder(ctx,angle+Math.PI);var fromBorderPoint=(edgeSegmentLength-fromBorderDist)/edgeSegmentLength;var xFrom=fromBorderPoint*this.from.x+(1-fromBorderPoint)*this.to.x;var yFrom=fromBorderPoint*this.from.y+(1-fromBorderPoint)*this.to.y;var via;if(this.options.smoothCurves.dynamic==true&&this.options.smoothCurves.enabled==true){via=this.via}else if(this.options.smoothCurves.enabled==true){via=this._getViaCoordinates()}if(this.options.smoothCurves.enabled==true&&via.x!=null){angle=Math.atan2(this.to.y-via.y,this.to.x-via.x);dx=this.to.x-via.x;dy=this.to.y-via.y;edgeSegmentLength=Math.sqrt(dx*dx+dy*dy)}var toBorderDist=this.to.distanceToBorder(ctx,angle);var toBorderPoint=(edgeSegmentLength-toBorderDist)/edgeSegmentLength;var xTo,yTo;if(this.options.smoothCurves.enabled==true&&via.x!=null){xTo=(1-toBorderPoint)*via.x+toBorderPoint*this.to.x;yTo=(1-toBorderPoint)*via.y+toBorderPoint*this.to.y}else{xTo=(1-toBorderPoint)*this.from.x+toBorderPoint*this.to.x;yTo=(1-toBorderPoint)*this.from.y+toBorderPoint*this.to.y}return{from:{x:xFrom,y:yFrom},to:{x:xTo,y:yTo}}};module.exports=Edge},function(module,exports,__webpack_require__){function Popup(container,x,y,text,style){if(container){this.container=container}else{this.container=document.body}if(style===undefined){if(typeof x==="object"){style=x;x=undefined}else if(typeof text==="object"){style=text;text=undefined}else{style={fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}}}}this.x=0;this.y=0;this.padding=5;if(x!==undefined&&y!==undefined){this.setPosition(x,y)}if(text!==undefined){this.setText(text)}this.frame=document.createElement("div");var styleAttr=this.frame.style;styleAttr.position="absolute";styleAttr.visibility="hidden";styleAttr.border="1px solid "+style.color.border;styleAttr.color=style.fontColor;styleAttr.fontSize=style.fontSize+"px";styleAttr.fontFamily=style.fontFace;styleAttr.padding=this.padding+"px";styleAttr.backgroundColor=style.color.background;styleAttr.borderRadius="3px";styleAttr.MozBorderRadius="3px";styleAttr.WebkitBorderRadius="3px";styleAttr.boxShadow="3px 3px 10px rgba(128, 128, 128, 0.5)";styleAttr.whiteSpace="nowrap";this.container.appendChild(this.frame)}Popup.prototype.setPosition=function(x,y){this.x=parseInt(x);this.y=parseInt(y)};Popup.prototype.setText=function(content){if(content instanceof Element){this.frame.innerHTML="";this.frame.appendChild(content)}else{this.frame.innerHTML=content}};Popup.prototype.show=function(show){if(show===undefined){show=true}if(show){var height=this.frame.clientHeight;var width=this.frame.clientWidth;var maxHeight=this.frame.parentNode.clientHeight;var maxWidth=this.frame.parentNode.clientWidth;var top=this.y-height;if(top+height+this.padding>maxHeight){top=maxHeight-height-this.padding}if(top<this.padding){top=this.padding}var left=this.x;if(left+width+this.padding>maxWidth){left=maxWidth-width-this.padding}if(left<this.padding){left=this.padding}this.frame.style.left=left+"px";this.frame.style.top=top+"px";this.frame.style.visibility="visible"}else{this.hide()}};Popup.prototype.hide=function(){this.frame.style.visibility="hidden"};module.exports=Popup},function(module,exports,__webpack_require__){var PhysicsMixin=__webpack_require__(60);var ClusterMixin=__webpack_require__(64);var SectorsMixin=__webpack_require__(65);var SelectionMixin=__webpack_require__(66);var ManipulationMixin=__webpack_require__(67);var NavigationMixin=__webpack_require__(68);var HierarchicalLayoutMixin=__webpack_require__(69);exports._loadMixin=function(sourceVariable){for(var mixinFunction in sourceVariable){if(sourceVariable.hasOwnProperty(mixinFunction)){this[mixinFunction]=sourceVariable[mixinFunction]}}};exports._clearMixin=function(sourceVariable){for(var mixinFunction in sourceVariable){if(sourceVariable.hasOwnProperty(mixinFunction)){this[mixinFunction]=undefined}}};exports._loadPhysicsSystem=function(){this._loadMixin(PhysicsMixin);this._loadSelectedForceSolver();if(this.constants.configurePhysics==true){this._loadPhysicsConfiguration()}};exports._loadClusterSystem=function(){this.clusterSession=0;this.hubThreshold=5;this._loadMixin(ClusterMixin)};exports._loadSectorSystem=function(){this.sectors={};this.activeSector=["default"];this.sectors["active"]={};this.sectors["active"]["default"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:undefined};this.sectors["frozen"]={};this.sectors["support"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:undefined};this.nodeIndices=this.sectors["active"]["default"]["nodeIndices"];this._loadMixin(SectorsMixin)};exports._loadSelectionSystem=function(){this.selectionObj={nodes:{},edges:{}};this._loadMixin(SelectionMixin)};exports._loadManipulationSystem=function(){this.blockConnectingEdgeSelection=false;this.forceAppendSelection=false;if(this.constants.dataManipulation.enabled==true){if(this.manipulationDiv===undefined){this.manipulationDiv=document.createElement("div");this.manipulationDiv.className="network-manipulationDiv";if(this.editMode==true){this.manipulationDiv.style.display="block"}else{this.manipulationDiv.style.display="none"}this.frame.appendChild(this.manipulationDiv)}if(this.editModeDiv===undefined){this.editModeDiv=document.createElement("div");this.editModeDiv.className="network-manipulation-editMode";if(this.editMode==true){this.editModeDiv.style.display="none"}else{this.editModeDiv.style.display="block"}this.frame.appendChild(this.editModeDiv)}if(this.closeDiv===undefined){this.closeDiv=document.createElement("div");this.closeDiv.className="network-manipulation-closeDiv";this.closeDiv.style.display=this.manipulationDiv.style.display;this.frame.appendChild(this.closeDiv)}this._loadMixin(ManipulationMixin);this._createManipulatorBar()}else{if(this.manipulationDiv!==undefined){this._createManipulatorBar();this.frame.removeChild(this.manipulationDiv);this.frame.removeChild(this.editModeDiv);this.frame.removeChild(this.closeDiv);this.manipulationDiv=undefined;this.editModeDiv=undefined;this.closeDiv=undefined;this._clearMixin(ManipulationMixin)}}};exports._loadNavigationControls=function(){this._loadMixin(NavigationMixin);this._cleanNavigation();if(this.constants.navigation.enabled==true){this._loadNavigationElements()}};exports._loadHierarchySystem=function(){this._loadMixin(HierarchicalLayoutMixin)}},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var RepulsionMixin=__webpack_require__(61);var HierarchialRepulsionMixin=__webpack_require__(62);var BarnesHutMixin=__webpack_require__(63);exports._toggleBarnesHut=function(){this.constants.physics.barnesHut.enabled=!this.constants.physics.barnesHut.enabled;this._loadSelectedForceSolver();this.moving=true;this.start()};exports._loadSelectedForceSolver=function(){if(this.constants.physics.barnesHut.enabled==true){this._clearMixin(RepulsionMixin);this._clearMixin(HierarchialRepulsionMixin);this.constants.physics.centralGravity=this.constants.physics.barnesHut.centralGravity;this.constants.physics.springLength=this.constants.physics.barnesHut.springLength;this.constants.physics.springConstant=this.constants.physics.barnesHut.springConstant;this.constants.physics.damping=this.constants.physics.barnesHut.damping;this._loadMixin(BarnesHutMixin)}else if(this.constants.physics.hierarchicalRepulsion.enabled==true){this._clearMixin(BarnesHutMixin);this._clearMixin(RepulsionMixin);this.constants.physics.centralGravity=this.constants.physics.hierarchicalRepulsion.centralGravity;this.constants.physics.springLength=this.constants.physics.hierarchicalRepulsion.springLength;this.constants.physics.springConstant=this.constants.physics.hierarchicalRepulsion.springConstant;this.constants.physics.damping=this.constants.physics.hierarchicalRepulsion.damping;this._loadMixin(HierarchialRepulsionMixin)}else{this._clearMixin(BarnesHutMixin);this._clearMixin(HierarchialRepulsionMixin);this.barnesHutTree=undefined;this.constants.physics.centralGravity=this.constants.physics.repulsion.centralGravity;this.constants.physics.springLength=this.constants.physics.repulsion.springLength;this.constants.physics.springConstant=this.constants.physics.repulsion.springConstant;this.constants.physics.damping=this.constants.physics.repulsion.damping;this._loadMixin(RepulsionMixin)}};exports._initializeForceCalculation=function(){if(this.nodeIndices.length==1){this.nodes[this.nodeIndices[0]]._setForce(0,0)}else{if(this.nodeIndices.length>this.constants.clustering.clusterThreshold&&this.constants.clustering.enabled==true){this.clusterToFit(this.constants.clustering.reduceToNodes,false)}this._calculateForces()}};exports._calculateForces=function(){this._calculateGravitationalForces();this._calculateNodeForces();if(this.constants.physics.springConstant>0){if(this.constants.smoothCurves.enabled==true&&this.constants.smoothCurves.dynamic==true){this._calculateSpringForcesWithSupport()}else{if(this.constants.physics.hierarchicalRepulsion.enabled==true){this._calculateHierarchicalSpringForces()}else{this._calculateSpringForces()}}}};exports._updateCalculationNodes=function(){if(this.constants.smoothCurves.enabled==true&&this.constants.smoothCurves.dynamic==true){this.calculationNodes={};this.calculationNodeIndices=[];for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){this.calculationNodes[nodeId]=this.nodes[nodeId]}}var supportNodes=this.sectors["support"]["nodes"];for(var supportNodeId in supportNodes){if(supportNodes.hasOwnProperty(supportNodeId)){if(this.edges.hasOwnProperty(supportNodes[supportNodeId].parentEdgeId)){this.calculationNodes[supportNodeId]=supportNodes[supportNodeId]}else{supportNodes[supportNodeId]._setForce(0,0)}}}for(var idx in this.calculationNodes){if(this.calculationNodes.hasOwnProperty(idx)){this.calculationNodeIndices.push(idx)}}}else{this.calculationNodes=this.nodes;this.calculationNodeIndices=this.nodeIndices}};exports._calculateGravitationalForces=function(){var dx,dy,distance,node,i;var nodes=this.calculationNodes;var gravity=this.constants.physics.centralGravity;var gravityForce=0;for(i=0;i<this.calculationNodeIndices.length;i++){node=nodes[this.calculationNodeIndices[i]];node.damping=this.constants.physics.damping;if(this._sector()=="default"&&gravity!=0){dx=-node.x;dy=-node.y;distance=Math.sqrt(dx*dx+dy*dy);gravityForce=distance==0?0:gravity/distance;node.fx=dx*gravityForce;node.fy=dy*gravityForce}else{node.fx=0;node.fy=0}}};exports._calculateSpringForces=function(){var edgeLength,edge,edgeId;var dx,dy,fx,fy,springForce,distance;var edges=this.edges;for(edgeId in edges){if(edges.hasOwnProperty(edgeId)){edge=edges[edgeId];if(edge.connected){if(this.nodes.hasOwnProperty(edge.toId)&&this.nodes.hasOwnProperty(edge.fromId)){edgeLength=edge.physics.springLength;edgeLength+=(edge.to.clusterSize+edge.from.clusterSize-2)*this.constants.clustering.edgeGrowth;dx=edge.from.x-edge.to.x;dy=edge.from.y-edge.to.y;distance=Math.sqrt(dx*dx+dy*dy);if(distance==0){distance=.01}springForce=this.constants.physics.springConstant*(edgeLength-distance)/distance;fx=dx*springForce;fy=dy*springForce;edge.from.fx+=fx;edge.from.fy+=fy;edge.to.fx-=fx;edge.to.fy-=fy}}}}};exports._calculateSpringForcesWithSupport=function(){var edgeLength,edge,edgeId,combinedClusterSize;var edges=this.edges;for(edgeId in edges){if(edges.hasOwnProperty(edgeId)){edge=edges[edgeId];if(edge.connected){if(this.nodes.hasOwnProperty(edge.toId)&&this.nodes.hasOwnProperty(edge.fromId)){if(edge.via!=null){var node1=edge.to;var node2=edge.via;var node3=edge.from;edgeLength=edge.physics.springLength;combinedClusterSize=node1.clusterSize+node3.clusterSize-2;edgeLength+=combinedClusterSize*this.constants.clustering.edgeGrowth;this._calculateSpringForce(node1,node2,.5*edgeLength);this._calculateSpringForce(node2,node3,.5*edgeLength)}}}}}};exports._calculateSpringForce=function(node1,node2,edgeLength){var dx,dy,fx,fy,springForce,distance;dx=node1.x-node2.x;dy=node1.y-node2.y;distance=Math.sqrt(dx*dx+dy*dy);if(distance==0){distance=.01}springForce=this.constants.physics.springConstant*(edgeLength-distance)/distance;fx=dx*springForce;fy=dy*springForce;node1.fx+=fx;node1.fy+=fy;node2.fx-=fx;node2.fy-=fy};exports._loadPhysicsConfiguration=function(){if(this.physicsConfiguration===undefined){this.backupConstants={};util.deepExtend(this.backupConstants,this.constants);var hierarchicalLayoutDirections=["LR","RL","UD","DU"];this.physicsConfiguration=document.createElement("div");this.physicsConfiguration.className="PhysicsConfiguration";this.physicsConfiguration.innerHTML=""+"<table><tr><td><b>Simulation Mode:</b></td></tr>"+"<tr>"+'<td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod1" value="BH" checked="checked">Barnes Hut</td>'+'<td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod2" value="R">Repulsion</td>'+'<td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod3" value="H">Hierarchical</td>'+"</tr>"+"</table>"+'<table id="graph_BH_table" style="display:none">'+"<tr><td><b>Barnes Hut</b></td></tr>"+"<tr>"+'<td width="150px">gravitationalConstant</td><td>0</td><td><input type="range" min="0" max="20000" value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" step="25" style="width:300px" id="graph_BH_gc"></td><td  width="50px">-20000</td><td><input value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" id="graph_BH_gc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.barnesHut.centralGravity+'" step="0.05"  style="width:300px" id="graph_BH_cg"></td><td>3</td><td><input value="'+this.constants.physics.barnesHut.centralGravity+'" id="graph_BH_cg_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.barnesHut.springLength+'" step="1" style="width:300px" id="graph_BH_sl"></td><td>500</td><td><input value="'+this.constants.physics.barnesHut.springLength+'" id="graph_BH_sl_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.barnesHut.springConstant+'" step="0.001" style="width:300px" id="graph_BH_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.barnesHut.springConstant+'" id="graph_BH_sc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.barnesHut.damping+'" step="0.005" style="width:300px" id="graph_BH_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.barnesHut.damping+'" id="graph_BH_damp_value" style="width:60px"></td>'+"</tr>"+"</table>"+'<table id="graph_R_table" style="display:none">'+"<tr><td><b>Repulsion</b></td></tr>"+"<tr>"+'<td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.repulsion.nodeDistance+'" step="1" style="width:300px" id="graph_R_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.repulsion.nodeDistance+'" id="graph_R_nd_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.repulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_R_cg"></td><td>3</td><td><input value="'+this.constants.physics.repulsion.centralGravity+'" id="graph_R_cg_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.repulsion.springLength+'" step="1" style="width:300px" id="graph_R_sl"></td><td>500</td><td><input value="'+this.constants.physics.repulsion.springLength+'" id="graph_R_sl_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.repulsion.springConstant+'" step="0.001" style="width:300px" id="graph_R_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.repulsion.springConstant+'" id="graph_R_sc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.repulsion.damping+'" step="0.005" style="width:300px" id="graph_R_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.repulsion.damping+'" id="graph_R_damp_value" style="width:60px"></td>'+"</tr>"+"</table>"+'<table id="graph_H_table" style="display:none">'+'<tr><td width="150"><b>Hierarchical</b></td></tr>'+"<tr>"+'<td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" step="1" style="width:300px" id="graph_H_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" id="graph_H_nd_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_H_cg"></td><td>3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" id="graph_H_cg_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" step="1" style="width:300px" id="graph_H_sl"></td><td>500</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" id="graph_H_sl_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" step="0.001" style="width:300px" id="graph_H_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" id="graph_H_sc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.hierarchicalRepulsion.damping+'" step="0.005" style="width:300px" id="graph_H_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.damping+'" id="graph_H_damp_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">direction</td><td>1</td><td><input type="range" min="0" max="3" value="'+hierarchicalLayoutDirections.indexOf(this.constants.hierarchicalLayout.direction)+'" step="1" style="width:300px" id="graph_H_direction"></td><td>4</td><td><input value="'+this.constants.hierarchicalLayout.direction+'" id="graph_H_direction_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">levelSeparation</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.levelSeparation+'" step="1" style="width:300px" id="graph_H_levsep"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.levelSeparation+'" id="graph_H_levsep_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">nodeSpacing</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.nodeSpacing+'" step="1" style="width:300px" id="graph_H_nspac"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.nodeSpacing+'" id="graph_H_nspac_value" style="width:60px"></td>'+"</tr>"+"</table>"+"<table><tr><td><b>Options:</b></td></tr>"+"<tr>"+'<td width="180px"><input type="button" id="graph_toggleSmooth" value="Toggle smoothCurves" style="width:150px"></td>'+'<td width="180px"><input type="button" id="graph_repositionNodes" value="Reinitialize" style="width:150px"></td>'+'<td width="180px"><input type="button" id="graph_generateOptions" value="Generate Options" style="width:150px"></td>'+"</tr>"+"</table>";this.containerElement.parentElement.insertBefore(this.physicsConfiguration,this.containerElement);this.optionsDiv=document.createElement("div");this.optionsDiv.style.fontSize="14px";this.optionsDiv.style.fontFamily="verdana";this.containerElement.parentElement.insertBefore(this.optionsDiv,this.containerElement);var rangeElement;rangeElement=document.getElementById("graph_BH_gc");rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_gc",-1,"physics_barnesHut_gravitationalConstant");rangeElement=document.getElementById("graph_BH_cg");rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_cg",1,"physics_centralGravity");rangeElement=document.getElementById("graph_BH_sc");rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_sc",1,"physics_springConstant");rangeElement=document.getElementById("graph_BH_sl");rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_sl",1,"physics_springLength");rangeElement=document.getElementById("graph_BH_damp");rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_damp",1,"physics_damping");rangeElement=document.getElementById("graph_R_nd");rangeElement.onchange=showValueOfRange.bind(this,"graph_R_nd",1,"physics_repulsion_nodeDistance");rangeElement=document.getElementById("graph_R_cg");rangeElement.onchange=showValueOfRange.bind(this,"graph_R_cg",1,"physics_centralGravity");rangeElement=document.getElementById("graph_R_sc");rangeElement.onchange=showValueOfRange.bind(this,"graph_R_sc",1,"physics_springConstant");rangeElement=document.getElementById("graph_R_sl");rangeElement.onchange=showValueOfRange.bind(this,"graph_R_sl",1,"physics_springLength");rangeElement=document.getElementById("graph_R_damp");rangeElement.onchange=showValueOfRange.bind(this,"graph_R_damp",1,"physics_damping");rangeElement=document.getElementById("graph_H_nd");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance");rangeElement=document.getElementById("graph_H_cg");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_cg",1,"physics_centralGravity");rangeElement=document.getElementById("graph_H_sc");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_sc",1,"physics_springConstant");rangeElement=document.getElementById("graph_H_sl");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_sl",1,"physics_springLength");rangeElement=document.getElementById("graph_H_damp");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_damp",1,"physics_damping");rangeElement=document.getElementById("graph_H_direction");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_direction",hierarchicalLayoutDirections,"hierarchicalLayout_direction");rangeElement=document.getElementById("graph_H_levsep");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_levsep",1,"hierarchicalLayout_levelSeparation");rangeElement=document.getElementById("graph_H_nspac");rangeElement.onchange=showValueOfRange.bind(this,"graph_H_nspac",1,"hierarchicalLayout_nodeSpacing");var radioButton1=document.getElementById("graph_physicsMethod1");var radioButton2=document.getElementById("graph_physicsMethod2");var radioButton3=document.getElementById("graph_physicsMethod3");radioButton2.checked=true;if(this.constants.physics.barnesHut.enabled){radioButton1.checked=true}if(this.constants.hierarchicalLayout.enabled){radioButton3.checked=true}var graph_toggleSmooth=document.getElementById("graph_toggleSmooth");var graph_repositionNodes=document.getElementById("graph_repositionNodes");var graph_generateOptions=document.getElementById("graph_generateOptions");graph_toggleSmooth.onclick=graphToggleSmoothCurves.bind(this);graph_repositionNodes.onclick=graphRepositionNodes.bind(this);graph_generateOptions.onclick=graphGenerateOptions.bind(this);if(this.constants.smoothCurves==true&&this.constants.dynamicSmoothCurves==false){graph_toggleSmooth.style.background="#A4FF56"}else{graph_toggleSmooth.style.background="#FF8532"}switchConfigurations.apply(this);radioButton1.onchange=switchConfigurations.bind(this);radioButton2.onchange=switchConfigurations.bind(this);radioButton3.onchange=switchConfigurations.bind(this)}};exports._overWriteGraphConstants=function(constantsVariableName,value){var nameArray=constantsVariableName.split("_");if(nameArray.length==1){this.constants[nameArray[0]]=value}else if(nameArray.length==2){this.constants[nameArray[0]][nameArray[1]]=value}else if(nameArray.length==3){this.constants[nameArray[0]][nameArray[1]][nameArray[2]]=value}};function graphToggleSmoothCurves(){this.constants.smoothCurves.enabled=!this.constants.smoothCurves.enabled;var graph_toggleSmooth=document.getElementById("graph_toggleSmooth");if(this.constants.smoothCurves.enabled==true){graph_toggleSmooth.style.background="#A4FF56"}else{graph_toggleSmooth.style.background="#FF8532"}this._configureSmoothCurves(false)}function graphRepositionNodes(){for(var nodeId in this.calculationNodes){if(this.calculationNodes.hasOwnProperty(nodeId)){this.calculationNodes[nodeId].vx=0;this.calculationNodes[nodeId].vy=0;this.calculationNodes[nodeId].fx=0;this.calculationNodes[nodeId].fy=0}}if(this.constants.hierarchicalLayout.enabled==true){this._setupHierarchicalLayout();showValueOfRange.call(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance");showValueOfRange.call(this,"graph_H_cg",1,"physics_centralGravity");showValueOfRange.call(this,"graph_H_sc",1,"physics_springConstant");showValueOfRange.call(this,"graph_H_sl",1,"physics_springLength");showValueOfRange.call(this,"graph_H_damp",1,"physics_damping")}else{this.repositionNodes()}this.moving=true;this.start()}function graphGenerateOptions(){var options="No options are required, default values used.";var optionsSpecific=[];var radioButton1=document.getElementById("graph_physicsMethod1");var radioButton2=document.getElementById("graph_physicsMethod2");if(radioButton1.checked==true){if(this.constants.physics.barnesHut.gravitationalConstant!=this.backupConstants.physics.barnesHut.gravitationalConstant){optionsSpecific.push("gravitationalConstant: "+this.constants.physics.barnesHut.gravitationalConstant)}if(this.constants.physics.centralGravity!=this.backupConstants.physics.barnesHut.centralGravity){optionsSpecific.push("centralGravity: "+this.constants.physics.centralGravity)}if(this.constants.physics.springLength!=this.backupConstants.physics.barnesHut.springLength){optionsSpecific.push("springLength: "+this.constants.physics.springLength)}if(this.constants.physics.springConstant!=this.backupConstants.physics.barnesHut.springConstant){optionsSpecific.push("springConstant: "+this.constants.physics.springConstant)}if(this.constants.physics.damping!=this.backupConstants.physics.barnesHut.damping){optionsSpecific.push("damping: "+this.constants.physics.damping)}if(optionsSpecific.length!=0){options="var options = {";options+="physics: {barnesHut: {";for(var i=0;i<optionsSpecific.length;i++){options+=optionsSpecific[i];if(i<optionsSpecific.length-1){options+=", "}}options+="}}"}if(this.constants.smoothCurves.enabled!=this.backupConstants.smoothCurves.enabled){if(optionsSpecific.length==0){options="var options = {"}else{options+=", "}options+="smoothCurves: "+this.constants.smoothCurves.enabled}if(options!="No options are required, default values used."){options+="};"}}else if(radioButton2.checked==true){options="var options = {";options+="physics: {barnesHut: {enabled: false}";if(this.constants.physics.repulsion.nodeDistance!=this.backupConstants.physics.repulsion.nodeDistance){optionsSpecific.push("nodeDistance: "+this.constants.physics.repulsion.nodeDistance)}if(this.constants.physics.centralGravity!=this.backupConstants.physics.repulsion.centralGravity){optionsSpecific.push("centralGravity: "+this.constants.physics.centralGravity)}if(this.constants.physics.springLength!=this.backupConstants.physics.repulsion.springLength){optionsSpecific.push("springLength: "+this.constants.physics.springLength)}if(this.constants.physics.springConstant!=this.backupConstants.physics.repulsion.springConstant){optionsSpecific.push("springConstant: "+this.constants.physics.springConstant)}if(this.constants.physics.damping!=this.backupConstants.physics.repulsion.damping){optionsSpecific.push("damping: "+this.constants.physics.damping)}if(optionsSpecific.length!=0){options+=", repulsion: {";for(var i=0;i<optionsSpecific.length;i++){options+=optionsSpecific[i];if(i<optionsSpecific.length-1){options+=", "}}options+="}}"}if(optionsSpecific.length==0){options+="}"}if(this.constants.smoothCurves!=this.backupConstants.smoothCurves){options+=", smoothCurves: "+this.constants.smoothCurves}options+="};"}else{options="var options = {";if(this.constants.physics.hierarchicalRepulsion.nodeDistance!=this.backupConstants.physics.hierarchicalRepulsion.nodeDistance){optionsSpecific.push("nodeDistance: "+this.constants.physics.hierarchicalRepulsion.nodeDistance)}if(this.constants.physics.centralGravity!=this.backupConstants.physics.hierarchicalRepulsion.centralGravity){optionsSpecific.push("centralGravity: "+this.constants.physics.centralGravity)}if(this.constants.physics.springLength!=this.backupConstants.physics.hierarchicalRepulsion.springLength){optionsSpecific.push("springLength: "+this.constants.physics.springLength)}if(this.constants.physics.springConstant!=this.backupConstants.physics.hierarchicalRepulsion.springConstant){optionsSpecific.push("springConstant: "+this.constants.physics.springConstant)
}if(this.constants.physics.damping!=this.backupConstants.physics.hierarchicalRepulsion.damping){optionsSpecific.push("damping: "+this.constants.physics.damping)}if(optionsSpecific.length!=0){options+="physics: {hierarchicalRepulsion: {";for(var i=0;i<optionsSpecific.length;i++){options+=optionsSpecific[i];if(i<optionsSpecific.length-1){options+=", "}}options+="}},"}options+="hierarchicalLayout: {";optionsSpecific=[];if(this.constants.hierarchicalLayout.direction!=this.backupConstants.hierarchicalLayout.direction){optionsSpecific.push("direction: "+this.constants.hierarchicalLayout.direction)}if(Math.abs(this.constants.hierarchicalLayout.levelSeparation)!=this.backupConstants.hierarchicalLayout.levelSeparation){optionsSpecific.push("levelSeparation: "+this.constants.hierarchicalLayout.levelSeparation)}if(this.constants.hierarchicalLayout.nodeSpacing!=this.backupConstants.hierarchicalLayout.nodeSpacing){optionsSpecific.push("nodeSpacing: "+this.constants.hierarchicalLayout.nodeSpacing)}if(optionsSpecific.length!=0){for(var i=0;i<optionsSpecific.length;i++){options+=optionsSpecific[i];if(i<optionsSpecific.length-1){options+=", "}}options+="}"}else{options+="enabled:true}"}options+="};"}this.optionsDiv.innerHTML=options}function switchConfigurations(){var ids=["graph_BH_table","graph_R_table","graph_H_table"];var radioButton=document.querySelector('input[name="graph_physicsMethod"]:checked').value;var tableId="graph_"+radioButton+"_table";var table=document.getElementById(tableId);table.style.display="block";for(var i=0;i<ids.length;i++){if(ids[i]!=tableId){table=document.getElementById(ids[i]);table.style.display="none"}}this._restoreNodes();if(radioButton=="R"){this.constants.hierarchicalLayout.enabled=false;this.constants.physics.hierarchicalRepulsion.enabled=false;this.constants.physics.barnesHut.enabled=false}else if(radioButton=="H"){if(this.constants.hierarchicalLayout.enabled==false){this.constants.hierarchicalLayout.enabled=true;this.constants.physics.hierarchicalRepulsion.enabled=true;this.constants.physics.barnesHut.enabled=false;this.constants.smoothCurves.enabled=false;this._setupHierarchicalLayout()}}else{this.constants.hierarchicalLayout.enabled=false;this.constants.physics.hierarchicalRepulsion.enabled=false;this.constants.physics.barnesHut.enabled=true}this._loadSelectedForceSolver();var graph_toggleSmooth=document.getElementById("graph_toggleSmooth");if(this.constants.smoothCurves.enabled==true){graph_toggleSmooth.style.background="#A4FF56"}else{graph_toggleSmooth.style.background="#FF8532"}this.moving=true;this.start()}function showValueOfRange(id,map,constantsVariableName){var valueId=id+"_value";var rangeValue=document.getElementById(id).value;if(Array.isArray(map)){document.getElementById(valueId).value=map[parseInt(rangeValue)];this._overWriteGraphConstants(constantsVariableName,map[parseInt(rangeValue)])}else{document.getElementById(valueId).value=parseInt(map)*parseFloat(rangeValue);this._overWriteGraphConstants(constantsVariableName,parseInt(map)*parseFloat(rangeValue))}if(constantsVariableName=="hierarchicalLayout_direction"||constantsVariableName=="hierarchicalLayout_levelSeparation"||constantsVariableName=="hierarchicalLayout_nodeSpacing"){this._setupHierarchicalLayout()}this.moving=true;this.start()}},function(module,exports,__webpack_require__){exports._calculateNodeForces=function(){var dx,dy,angle,distance,fx,fy,combinedClusterSize,repulsingForce,node1,node2,i,j;var nodes=this.calculationNodes;var nodeIndices=this.calculationNodeIndices;var a_base=-2/3;var b=4/3;var nodeDistance=this.constants.physics.repulsion.nodeDistance;var minimumDistance=nodeDistance;for(i=0;i<nodeIndices.length-1;i++){node1=nodes[nodeIndices[i]];for(j=i+1;j<nodeIndices.length;j++){node2=nodes[nodeIndices[j]];combinedClusterSize=node1.clusterSize+node2.clusterSize-2;dx=node2.x-node1.x;dy=node2.y-node1.y;distance=Math.sqrt(dx*dx+dy*dy);minimumDistance=combinedClusterSize==0?nodeDistance:nodeDistance*(1+combinedClusterSize*this.constants.clustering.distanceAmplification);var a=a_base/minimumDistance;if(distance<2*minimumDistance){if(distance<.5*minimumDistance){repulsingForce=1}else{repulsingForce=a*distance+b}repulsingForce*=combinedClusterSize==0?1:1+combinedClusterSize*this.constants.clustering.forceAmplification;repulsingForce=repulsingForce/distance;fx=dx*repulsingForce;fy=dy*repulsingForce;node1.fx-=fx;node1.fy-=fy;node2.fx+=fx;node2.fy+=fy}}}}},function(module,exports,__webpack_require__){exports._calculateNodeForces=function(){var dx,dy,distance,fx,fy,repulsingForce,node1,node2,i,j;var nodes=this.calculationNodes;var nodeIndices=this.calculationNodeIndices;var nodeDistance=this.constants.physics.hierarchicalRepulsion.nodeDistance;for(i=0;i<nodeIndices.length-1;i++){node1=nodes[nodeIndices[i]];for(j=i+1;j<nodeIndices.length;j++){node2=nodes[nodeIndices[j]];if(node1.level==node2.level){dx=node2.x-node1.x;dy=node2.y-node1.y;distance=Math.sqrt(dx*dx+dy*dy);var steepness=.05;if(distance<nodeDistance){repulsingForce=-Math.pow(steepness*distance,2)+Math.pow(steepness*nodeDistance,2)}else{repulsingForce=0}if(distance==0){distance=.01}else{repulsingForce=repulsingForce/distance}fx=dx*repulsingForce;fy=dy*repulsingForce;node1.fx-=fx;node1.fy-=fy;node2.fx+=fx;node2.fy+=fy}}}};exports._calculateHierarchicalSpringForces=function(){var edgeLength,edge,edgeId;var dx,dy,fx,fy,springForce,distance;var edges=this.edges;var nodes=this.calculationNodes;var nodeIndices=this.calculationNodeIndices;for(var i=0;i<nodeIndices.length;i++){var node1=nodes[nodeIndices[i]];node1.springFx=0;node1.springFy=0}for(edgeId in edges){if(edges.hasOwnProperty(edgeId)){edge=edges[edgeId];if(edge.connected){if(this.nodes.hasOwnProperty(edge.toId)&&this.nodes.hasOwnProperty(edge.fromId)){edgeLength=edge.physics.springLength;edgeLength+=(edge.to.clusterSize+edge.from.clusterSize-2)*this.constants.clustering.edgeGrowth;dx=edge.from.x-edge.to.x;dy=edge.from.y-edge.to.y;distance=Math.sqrt(dx*dx+dy*dy);if(distance==0){distance=.01}springForce=this.constants.physics.springConstant*(edgeLength-distance)/distance;fx=dx*springForce;fy=dy*springForce;if(edge.to.level!=edge.from.level){edge.to.springFx-=fx;edge.to.springFy-=fy;edge.from.springFx+=fx;edge.from.springFy+=fy}else{var factor=.5;edge.to.fx-=factor*fx;edge.to.fy-=factor*fy;edge.from.fx+=factor*fx;edge.from.fy+=factor*fy}}}}}var springForce=1;var springFx,springFy;for(i=0;i<nodeIndices.length;i++){var node=nodes[nodeIndices[i]];springFx=Math.min(springForce,Math.max(-springForce,node.springFx));springFy=Math.min(springForce,Math.max(-springForce,node.springFy));node.fx+=springFx;node.fy+=springFy}var totalFx=0;var totalFy=0;for(i=0;i<nodeIndices.length;i++){var node=nodes[nodeIndices[i]];totalFx+=node.fx;totalFy+=node.fy}var correctionFx=totalFx/nodeIndices.length;var correctionFy=totalFy/nodeIndices.length;for(i=0;i<nodeIndices.length;i++){var node=nodes[nodeIndices[i]];node.fx-=correctionFx;node.fy-=correctionFy}}},function(module,exports,__webpack_require__){exports._calculateNodeForces=function(){if(this.constants.physics.barnesHut.gravitationalConstant!=0){var node;var nodes=this.calculationNodes;var nodeIndices=this.calculationNodeIndices;var nodeCount=nodeIndices.length;this._formBarnesHutTree(nodes,nodeIndices);var barnesHutTree=this.barnesHutTree;for(var i=0;i<nodeCount;i++){node=nodes[nodeIndices[i]];if(node.options.mass>0){this._getForceContribution(barnesHutTree.root.children.NW,node);this._getForceContribution(barnesHutTree.root.children.NE,node);this._getForceContribution(barnesHutTree.root.children.SW,node);this._getForceContribution(barnesHutTree.root.children.SE,node)}}}};exports._getForceContribution=function(parentBranch,node){if(parentBranch.childrenCount>0){var dx,dy,distance;dx=parentBranch.centerOfMass.x-node.x;dy=parentBranch.centerOfMass.y-node.y;distance=Math.sqrt(dx*dx+dy*dy);if(distance*parentBranch.calcSize>this.constants.physics.barnesHut.thetaInverted){if(distance==0){distance=.1*Math.random();dx=distance}var gravityForce=this.constants.physics.barnesHut.gravitationalConstant*parentBranch.mass*node.options.mass/(distance*distance*distance);var fx=dx*gravityForce;var fy=dy*gravityForce;node.fx+=fx;node.fy+=fy}else{if(parentBranch.childrenCount==4){this._getForceContribution(parentBranch.children.NW,node);this._getForceContribution(parentBranch.children.NE,node);this._getForceContribution(parentBranch.children.SW,node);this._getForceContribution(parentBranch.children.SE,node)}else{if(parentBranch.children.data.id!=node.id){if(distance==0){distance=.5*Math.random();dx=distance}var gravityForce=this.constants.physics.barnesHut.gravitationalConstant*parentBranch.mass*node.options.mass/(distance*distance*distance);var fx=dx*gravityForce;var fy=dy*gravityForce;node.fx+=fx;node.fy+=fy}}}}};exports._formBarnesHutTree=function(nodes,nodeIndices){var node;var nodeCount=nodeIndices.length;var minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=-Number.MAX_VALUE,maxY=-Number.MAX_VALUE;for(var i=0;i<nodeCount;i++){var x=nodes[nodeIndices[i]].x;var y=nodes[nodeIndices[i]].y;if(nodes[nodeIndices[i]].options.mass>0){if(x<minX){minX=x}if(x>maxX){maxX=x}if(y<minY){minY=y}if(y>maxY){maxY=y}}}var sizeDiff=Math.abs(maxX-minX)-Math.abs(maxY-minY);if(sizeDiff>0){minY-=.5*sizeDiff;maxY+=.5*sizeDiff}else{minX+=.5*sizeDiff;maxX-=.5*sizeDiff}var minimumTreeSize=1e-5;var rootSize=Math.max(minimumTreeSize,Math.abs(maxX-minX));var halfRootSize=.5*rootSize;var centerX=.5*(minX+maxX),centerY=.5*(minY+maxY);var barnesHutTree={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:centerX-halfRootSize,maxX:centerX+halfRootSize,minY:centerY-halfRootSize,maxY:centerY+halfRootSize},size:rootSize,calcSize:1/rootSize,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(barnesHutTree.root);for(i=0;i<nodeCount;i++){node=nodes[nodeIndices[i]];if(node.options.mass>0){this._placeInTree(barnesHutTree.root,node)}}this.barnesHutTree=barnesHutTree};exports._updateBranchMass=function(parentBranch,node){var totalMass=parentBranch.mass+node.options.mass;var totalMassInv=1/totalMass;parentBranch.centerOfMass.x=parentBranch.centerOfMass.x*parentBranch.mass+node.x*node.options.mass;parentBranch.centerOfMass.x*=totalMassInv;parentBranch.centerOfMass.y=parentBranch.centerOfMass.y*parentBranch.mass+node.y*node.options.mass;parentBranch.centerOfMass.y*=totalMassInv;parentBranch.mass=totalMass;var biggestSize=Math.max(Math.max(node.height,node.radius),node.width);parentBranch.maxWidth=parentBranch.maxWidth<biggestSize?biggestSize:parentBranch.maxWidth};exports._placeInTree=function(parentBranch,node,skipMassUpdate){if(skipMassUpdate!=true||skipMassUpdate===undefined){this._updateBranchMass(parentBranch,node)}if(parentBranch.children.NW.range.maxX>node.x){if(parentBranch.children.NW.range.maxY>node.y){this._placeInRegion(parentBranch,node,"NW")}else{this._placeInRegion(parentBranch,node,"SW")}}else{if(parentBranch.children.NW.range.maxY>node.y){this._placeInRegion(parentBranch,node,"NE")}else{this._placeInRegion(parentBranch,node,"SE")}}};exports._placeInRegion=function(parentBranch,node,region){switch(parentBranch.children[region].childrenCount){case 0:parentBranch.children[region].children.data=node;parentBranch.children[region].childrenCount=1;this._updateBranchMass(parentBranch.children[region],node);break;case 1:if(parentBranch.children[region].children.data.x==node.x&&parentBranch.children[region].children.data.y==node.y){node.x+=Math.random();node.y+=Math.random()}else{this._splitBranch(parentBranch.children[region]);this._placeInTree(parentBranch.children[region],node)}break;case 4:this._placeInTree(parentBranch.children[region],node);break}};exports._splitBranch=function(parentBranch){var containedNode=null;if(parentBranch.childrenCount==1){containedNode=parentBranch.children.data;parentBranch.mass=0;parentBranch.centerOfMass.x=0;parentBranch.centerOfMass.y=0}parentBranch.childrenCount=4;parentBranch.children.data=null;this._insertRegion(parentBranch,"NW");this._insertRegion(parentBranch,"NE");this._insertRegion(parentBranch,"SW");this._insertRegion(parentBranch,"SE");if(containedNode!=null){this._placeInTree(parentBranch,containedNode)}};exports._insertRegion=function(parentBranch,region){var minX,maxX,minY,maxY;var childSize=.5*parentBranch.size;switch(region){case"NW":minX=parentBranch.range.minX;maxX=parentBranch.range.minX+childSize;minY=parentBranch.range.minY;maxY=parentBranch.range.minY+childSize;break;case"NE":minX=parentBranch.range.minX+childSize;maxX=parentBranch.range.maxX;minY=parentBranch.range.minY;maxY=parentBranch.range.minY+childSize;break;case"SW":minX=parentBranch.range.minX;maxX=parentBranch.range.minX+childSize;minY=parentBranch.range.minY+childSize;maxY=parentBranch.range.maxY;break;case"SE":minX=parentBranch.range.minX+childSize;maxX=parentBranch.range.maxX;minY=parentBranch.range.minY+childSize;maxY=parentBranch.range.maxY;break}parentBranch.children[region]={centerOfMass:{x:0,y:0},mass:0,range:{minX:minX,maxX:maxX,minY:minY,maxY:maxY},size:.5*parentBranch.size,calcSize:2*parentBranch.calcSize,children:{data:null},maxWidth:0,level:parentBranch.level+1,childrenCount:0}};exports._drawTree=function(ctx,color){if(this.barnesHutTree!==undefined){ctx.lineWidth=1;this._drawBranch(this.barnesHutTree.root,ctx,color)}};exports._drawBranch=function(branch,ctx,color){if(color===undefined){color="#FF0000"}if(branch.childrenCount==4){this._drawBranch(branch.children.NW,ctx);this._drawBranch(branch.children.NE,ctx);this._drawBranch(branch.children.SE,ctx);this._drawBranch(branch.children.SW,ctx)}ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(branch.range.minX,branch.range.minY);ctx.lineTo(branch.range.maxX,branch.range.minY);ctx.stroke();ctx.beginPath();ctx.moveTo(branch.range.maxX,branch.range.minY);ctx.lineTo(branch.range.maxX,branch.range.maxY);ctx.stroke();ctx.beginPath();ctx.moveTo(branch.range.maxX,branch.range.maxY);ctx.lineTo(branch.range.minX,branch.range.maxY);ctx.stroke();ctx.beginPath();ctx.moveTo(branch.range.minX,branch.range.maxY);ctx.lineTo(branch.range.minX,branch.range.minY);ctx.stroke()}},function(module,exports,__webpack_require__){exports.startWithClustering=function(){this.clusterToFit(this.constants.clustering.initialMaxNodes,true);this.updateLabels();if(this.stabilize){this._stabilize()}this.start()};exports.clusterToFit=function(maxNumberOfNodes,reposition){var numberOfNodes=this.nodeIndices.length;var maxLevels=50;var level=0;while(numberOfNodes>maxNumberOfNodes&&level<maxLevels){if(level%3==0){this.forceAggregateHubs(true);this.normalizeClusterLevels()}else{this.increaseClusterLevel()}numberOfNodes=this.nodeIndices.length;level+=1}if(level>0&&reposition==true){this.repositionNodes()}this._updateCalculationNodes()};exports.openCluster=function(node){var isMovingBeforeClustering=this.moving;if(node.clusterSize>this.constants.clustering.sectorThreshold&&this._nodeInActiveArea(node)&&!(this._sector()=="default"&&this.nodeIndices.length==1)){this._addSector(node);var level=0;while(this.nodeIndices.length<this.constants.clustering.initialMaxNodes&&level<10){this.decreaseClusterLevel();level+=1}}else{this._expandClusterNode(node,false,true);this._updateNodeIndexList();this._updateDynamicEdges();this._updateCalculationNodes();this.updateLabels()}if(this.moving!=isMovingBeforeClustering){this.start()}};exports.updateClustersDefault=function(){if(this.constants.clustering.enabled==true){this.updateClusters(0,false,false)}};exports.increaseClusterLevel=function(){this.updateClusters(-1,false,true)};exports.decreaseClusterLevel=function(){this.updateClusters(1,false,true)};exports.updateClusters=function(zoomDirection,recursive,force,doNotStart){var isMovingBeforeClustering=this.moving;var amountOfNodes=this.nodeIndices.length;if(this.previousScale>this.scale&&zoomDirection==0){this._collapseSector()}if(this.previousScale>this.scale||zoomDirection==-1){this._formClusters(force)}else if(this.previousScale<this.scale||zoomDirection==1){if(force==true){this._openClusters(recursive,force)}else{this._openClustersBySize()}}this._updateNodeIndexList();if(this.nodeIndices.length==amountOfNodes&&(this.previousScale>this.scale||zoomDirection==-1)){this._aggregateHubs(force);this._updateNodeIndexList()}if(this.previousScale>this.scale||zoomDirection==-1){this.handleChains();this._updateNodeIndexList()}this.previousScale=this.scale;this._updateDynamicEdges();this.updateLabels();if(this.nodeIndices.length<amountOfNodes){this.clusterSession+=1;this.normalizeClusterLevels()}if(doNotStart==false||doNotStart===undefined){if(this.moving!=isMovingBeforeClustering){this.start()}}this._updateCalculationNodes()};exports.handleChains=function(){var chainPercentage=this._getChainFraction();if(chainPercentage>this.constants.clustering.chainThreshold){this._reduceAmountOfChains(1-this.constants.clustering.chainThreshold/chainPercentage)}};exports._aggregateHubs=function(force){this._getHubSize();this._formClustersByHub(force,false)};exports.forceAggregateHubs=function(doNotStart){var isMovingBeforeClustering=this.moving;var amountOfNodes=this.nodeIndices.length;this._aggregateHubs(true);this._updateNodeIndexList();this._updateDynamicEdges();this.updateLabels();if(this.nodeIndices.length!=amountOfNodes){this.clusterSession+=1}if(doNotStart==false||doNotStart===undefined){if(this.moving!=isMovingBeforeClustering){this.start()}}};exports._openClustersBySize=function(){for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];if(node.inView()==true){if(node.width*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||node.height*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight){this.openCluster(node)}}}}};exports._openClusters=function(recursive,force){for(var i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];this._expandClusterNode(node,recursive,force);this._updateCalculationNodes()}};exports._expandClusterNode=function(parentNode,recursive,force,openAll){if(parentNode.clusterSize>1){if(parentNode.clusterSize<this.constants.clustering.sectorThreshold){openAll=true}recursive=openAll?true:recursive;if(parentNode.formationScale<this.scale||force==true){for(var containedNodeId in parentNode.containedNodes){if(parentNode.containedNodes.hasOwnProperty(containedNodeId)){var childNode=parentNode.containedNodes[containedNodeId];if(force==true){if(childNode.clusterSession==parentNode.clusterSessions[parentNode.clusterSessions.length-1]||openAll){this._expelChildFromParent(parentNode,containedNodeId,recursive,force,openAll)}}else{if(this._nodeInActiveArea(parentNode)){this._expelChildFromParent(parentNode,containedNodeId,recursive,force,openAll)}}}}}}};exports._expelChildFromParent=function(parentNode,containedNodeId,recursive,force,openAll){var childNode=parentNode.containedNodes[containedNodeId];if(childNode.formationScale<this.scale||force==true){this._unselectAll();this.nodes[containedNodeId]=childNode;this._releaseContainedEdges(parentNode,childNode);this._connectEdgeBackToChild(parentNode,childNode);this._validateEdges(parentNode);parentNode.options.mass-=childNode.options.mass;parentNode.clusterSize-=childNode.clusterSize;parentNode.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*(parentNode.clusterSize-1));parentNode.dynamicEdgesLength=parentNode.dynamicEdges.length;childNode.x=parentNode.x+parentNode.growthIndicator*(.5-Math.random());childNode.y=parentNode.y+parentNode.growthIndicator*(.5-Math.random());delete parentNode.containedNodes[containedNodeId];var othersPresent=false;for(var childNodeId in parentNode.containedNodes){if(parentNode.containedNodes.hasOwnProperty(childNodeId)){if(parentNode.containedNodes[childNodeId].clusterSession==childNode.clusterSession){othersPresent=true;break}}}if(othersPresent==false){parentNode.clusterSessions.pop()}this._repositionBezierNodes(childNode);childNode.clusterSession=0;parentNode.clearSizeCache();this.moving=true}if(recursive==true){this._expandClusterNode(childNode,recursive,force,openAll)}};exports._repositionBezierNodes=function(node){for(var i=0;i<node.dynamicEdges.length;i++){node.dynamicEdges[i].positionBezierNode()}};exports._formClusters=function(force){if(force==false){this._formClustersByZoom()}else{this._forceClustersByZoom()}};exports._formClustersByZoom=function(){var dx,dy,length,minLength=this.constants.clustering.clusterEdgeThreshold/this.scale;for(var edgeId in this.edges){if(this.edges.hasOwnProperty(edgeId)){var edge=this.edges[edgeId];if(edge.connected){if(edge.toId!=edge.fromId){dx=edge.to.x-edge.from.x;dy=edge.to.y-edge.from.y;length=Math.sqrt(dx*dx+dy*dy);if(length<minLength){var parentNode=edge.from;var childNode=edge.to;if(edge.to.options.mass>edge.from.options.mass){parentNode=edge.to;childNode=edge.from}if(childNode.dynamicEdgesLength==1){this._addToCluster(parentNode,childNode,false)}else if(parentNode.dynamicEdgesLength==1){this._addToCluster(childNode,parentNode,false)}}}}}}};exports._forceClustersByZoom=function(){for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){var childNode=this.nodes[nodeId];if(childNode.dynamicEdgesLength==1&&childNode.dynamicEdges.length!=0){var edge=childNode.dynamicEdges[0];var parentNode=edge.toId==childNode.id?this.nodes[edge.fromId]:this.nodes[edge.toId];if(childNode.id!=parentNode.id){if(parentNode.options.mass>childNode.options.mass){this._addToCluster(parentNode,childNode,true)}else{this._addToCluster(childNode,parentNode,true)}}}}}};exports._clusterToSmallestNeighbour=function(node){var smallestNeighbour=-1;var smallestNeighbourNode=null;for(var i=0;i<node.dynamicEdges.length;i++){if(node.dynamicEdges[i]!==undefined){var neighbour=null;if(node.dynamicEdges[i].fromId!=node.id){neighbour=node.dynamicEdges[i].from}else if(node.dynamicEdges[i].toId!=node.id){neighbour=node.dynamicEdges[i].to}if(neighbour!=null&&smallestNeighbour>neighbour.clusterSessions.length){smallestNeighbour=neighbour.clusterSessions.length;smallestNeighbourNode=neighbour}}}if(neighbour!=null&&this.nodes[neighbour.id]!==undefined){this._addToCluster(neighbour,node,true)}};exports._formClustersByHub=function(force,onlyEqual){for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){this._formClusterFromHub(this.nodes[nodeId],force,onlyEqual)}}};exports._formClusterFromHub=function(hubNode,force,onlyEqual,absorptionSizeOffset){if(absorptionSizeOffset===undefined){absorptionSizeOffset=0}if(hubNode.dynamicEdgesLength>=this.hubThreshold&&onlyEqual==false||hubNode.dynamicEdgesLength==this.hubThreshold&&onlyEqual==true){var dx,dy,length;var minLength=this.constants.clustering.clusterEdgeThreshold/this.scale;var allowCluster=false;var edgesIdarray=[];var amountOfInitialEdges=hubNode.dynamicEdges.length;for(var j=0;j<amountOfInitialEdges;j++){edgesIdarray.push(hubNode.dynamicEdges[j].id)}if(force==false){allowCluster=false;for(j=0;j<amountOfInitialEdges;j++){var edge=this.edges[edgesIdarray[j]];if(edge!==undefined){if(edge.connected){if(edge.toId!=edge.fromId){dx=edge.to.x-edge.from.x;dy=edge.to.y-edge.from.y;length=Math.sqrt(dx*dx+dy*dy);if(length<minLength){allowCluster=true;break}}}}}}if(!force&&allowCluster||force){for(j=0;j<amountOfInitialEdges;j++){edge=this.edges[edgesIdarray[j]];if(edge!==undefined){var childNode=this.nodes[edge.fromId==hubNode.id?edge.toId:edge.fromId];if(childNode.dynamicEdges.length<=this.hubThreshold+absorptionSizeOffset&&childNode.id!=hubNode.id){this._addToCluster(hubNode,childNode,force)}}}}}};exports._addToCluster=function(parentNode,childNode,force){parentNode.containedNodes[childNode.id]=childNode;for(var i=0;i<childNode.dynamicEdges.length;i++){var edge=childNode.dynamicEdges[i];if(edge.toId==parentNode.id||edge.fromId==parentNode.id){this._addToContainedEdges(parentNode,childNode,edge)}else{this._connectEdgeToCluster(parentNode,childNode,edge)}}childNode.dynamicEdges=[];this._containCircularEdgesFromNode(parentNode,childNode);delete this.nodes[childNode.id];var massBefore=parentNode.options.mass;childNode.clusterSession=this.clusterSession;parentNode.options.mass+=childNode.options.mass;parentNode.clusterSize+=childNode.clusterSize;parentNode.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*parentNode.clusterSize);if(parentNode.clusterSessions[parentNode.clusterSessions.length-1]!=this.clusterSession){parentNode.clusterSessions.push(this.clusterSession)}if(force==true){parentNode.formationScale=0}else{parentNode.formationScale=this.scale}parentNode.clearSizeCache();parentNode.containedNodes[childNode.id].formationScale=parentNode.formationScale;childNode.clearVelocity();parentNode.updateVelocity(massBefore);this.moving=true};exports._updateDynamicEdges=function(){for(var i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];node.dynamicEdgesLength=node.dynamicEdges.length;var correction=0;if(node.dynamicEdgesLength>1){for(var j=0;j<node.dynamicEdgesLength-1;j++){var edgeToId=node.dynamicEdges[j].toId;var edgeFromId=node.dynamicEdges[j].fromId;for(var k=j+1;k<node.dynamicEdgesLength;k++){if(node.dynamicEdges[k].toId==edgeToId&&node.dynamicEdges[k].fromId==edgeFromId||node.dynamicEdges[k].fromId==edgeToId&&node.dynamicEdges[k].toId==edgeFromId){correction+=1}}}}node.dynamicEdgesLength-=correction}};exports._addToContainedEdges=function(parentNode,childNode,edge){if(!parentNode.containedEdges.hasOwnProperty(childNode.id)){parentNode.containedEdges[childNode.id]=[]}parentNode.containedEdges[childNode.id].push(edge);delete this.edges[edge.id];for(var i=0;i<parentNode.dynamicEdges.length;i++){if(parentNode.dynamicEdges[i].id==edge.id){parentNode.dynamicEdges.splice(i,1);break}}};exports._connectEdgeToCluster=function(parentNode,childNode,edge){if(edge.toId==edge.fromId){this._addToContainedEdges(parentNode,childNode,edge)}else{if(edge.toId==childNode.id){edge.originalToId.push(childNode.id);edge.to=parentNode;edge.toId=parentNode.id}else{edge.originalFromId.push(childNode.id);edge.from=parentNode;edge.fromId=parentNode.id}this._addToReroutedEdges(parentNode,childNode,edge)}};exports._containCircularEdgesFromNode=function(parentNode,childNode){for(var i=0;i<parentNode.dynamicEdges.length;i++){var edge=parentNode.dynamicEdges[i];if(edge.toId==edge.fromId){this._addToContainedEdges(parentNode,childNode,edge)}}};exports._addToReroutedEdges=function(parentNode,childNode,edge){if(!parentNode.reroutedEdges.hasOwnProperty(childNode.id)){parentNode.reroutedEdges[childNode.id]=[]}parentNode.reroutedEdges[childNode.id].push(edge);parentNode.dynamicEdges.push(edge)};exports._connectEdgeBackToChild=function(parentNode,childNode){if(parentNode.reroutedEdges.hasOwnProperty(childNode.id)){for(var i=0;i<parentNode.reroutedEdges[childNode.id].length;i++){var edge=parentNode.reroutedEdges[childNode.id][i];if(edge.originalFromId[edge.originalFromId.length-1]==childNode.id){edge.originalFromId.pop();edge.fromId=childNode.id;edge.from=childNode}else{edge.originalToId.pop();edge.toId=childNode.id;edge.to=childNode}childNode.dynamicEdges.push(edge);for(var j=0;j<parentNode.dynamicEdges.length;j++){if(parentNode.dynamicEdges[j].id==edge.id){parentNode.dynamicEdges.splice(j,1);break}}}delete parentNode.reroutedEdges[childNode.id]}};exports._validateEdges=function(parentNode){for(var i=0;i<parentNode.dynamicEdges.length;i++){var edge=parentNode.dynamicEdges[i];if(parentNode.id!=edge.toId&&parentNode.id!=edge.fromId){parentNode.dynamicEdges.splice(i,1)}}};exports._releaseContainedEdges=function(parentNode,childNode){for(var i=0;i<parentNode.containedEdges[childNode.id].length;i++){var edge=parentNode.containedEdges[childNode.id][i];this.edges[edge.id]=edge;childNode.dynamicEdges.push(edge);parentNode.dynamicEdges.push(edge)}delete parentNode.containedEdges[childNode.id]};exports.updateLabels=function(){var nodeId;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];if(node.clusterSize>1){node.label="[".concat(String(node.clusterSize),"]")}}}for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];if(node.clusterSize==1){if(node.originalLabel!==undefined){node.label=node.originalLabel}else{node.label=String(node.id)}}}}};exports.normalizeClusterLevels=function(){var maxLevel=0;var minLevel=1e9;var clusterLevel=0;var nodeId;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){clusterLevel=this.nodes[nodeId].clusterSessions.length;if(maxLevel<clusterLevel){maxLevel=clusterLevel}if(minLevel>clusterLevel){minLevel=clusterLevel}}}if(maxLevel-minLevel>this.constants.clustering.clusterLevelDifference){var amountOfNodes=this.nodeIndices.length;var targetLevel=maxLevel-this.constants.clustering.clusterLevelDifference;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){if(this.nodes[nodeId].clusterSessions.length<targetLevel){this._clusterToSmallestNeighbour(this.nodes[nodeId])}}}this._updateNodeIndexList();this._updateDynamicEdges();if(this.nodeIndices.length!=amountOfNodes){this.clusterSession+=1}}};exports._nodeInActiveArea=function(node){return Math.abs(node.x-this.areaCenter.x)<=this.constants.clustering.activeAreaBoxSize/this.scale&&Math.abs(node.y-this.areaCenter.y)<=this.constants.clustering.activeAreaBoxSize/this.scale};exports.repositionNodes=function(){for(var i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];if(node.xFixed==false||node.yFixed==false){var radius=10*.1*this.nodeIndices.length*Math.min(100,node.options.mass);var angle=2*Math.PI*Math.random();if(node.xFixed==false){node.x=radius*Math.cos(angle)}if(node.yFixed==false){node.y=radius*Math.sin(angle)}this._repositionBezierNodes(node)}}};exports._getHubSize=function(){var average=0;var averageSquared=0;var hubCounter=0;var largestHub=0;for(var i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];if(node.dynamicEdgesLength>largestHub){largestHub=node.dynamicEdgesLength}average+=node.dynamicEdgesLength;averageSquared+=Math.pow(node.dynamicEdgesLength,2);hubCounter+=1}average=average/hubCounter;averageSquared=averageSquared/hubCounter;var variance=averageSquared-Math.pow(average,2);var standardDeviation=Math.sqrt(variance);this.hubThreshold=Math.floor(average+2*standardDeviation);if(this.hubThreshold>largestHub){this.hubThreshold=largestHub}};exports._reduceAmountOfChains=function(fraction){this.hubThreshold=2;var reduceAmount=Math.floor(this.nodeIndices.length*fraction);for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){if(this.nodes[nodeId].dynamicEdgesLength==2&&this.nodes[nodeId].dynamicEdges.length>=2){if(reduceAmount>0){this._formClusterFromHub(this.nodes[nodeId],true,true,1);reduceAmount-=1}}}}};exports._getChainFraction=function(){var chains=0;var total=0;for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){if(this.nodes[nodeId].dynamicEdgesLength==2&&this.nodes[nodeId].dynamicEdges.length>=2){chains+=1}total+=1}}return chains/total}},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Node=__webpack_require__(56);exports._putDataInSector=function(){this.sectors["active"][this._sector()].nodes=this.nodes;this.sectors["active"][this._sector()].edges=this.edges;this.sectors["active"][this._sector()].nodeIndices=this.nodeIndices};exports._switchToSector=function(sectorId,sectorType){if(sectorType===undefined||sectorType=="active"){this._switchToActiveSector(sectorId)}else{this._switchToFrozenSector(sectorId)}};exports._switchToActiveSector=function(sectorId){this.nodeIndices=this.sectors["active"][sectorId]["nodeIndices"];this.nodes=this.sectors["active"][sectorId]["nodes"];this.edges=this.sectors["active"][sectorId]["edges"]};exports._switchToSupportSector=function(){this.nodeIndices=this.sectors["support"]["nodeIndices"];this.nodes=this.sectors["support"]["nodes"];this.edges=this.sectors["support"]["edges"]
};exports._switchToFrozenSector=function(sectorId){this.nodeIndices=this.sectors["frozen"][sectorId]["nodeIndices"];this.nodes=this.sectors["frozen"][sectorId]["nodes"];this.edges=this.sectors["frozen"][sectorId]["edges"]};exports._loadLatestSector=function(){this._switchToSector(this._sector())};exports._sector=function(){return this.activeSector[this.activeSector.length-1]};exports._previousSector=function(){if(this.activeSector.length>1){return this.activeSector[this.activeSector.length-2]}else{throw new TypeError("there are not enough sectors in the this.activeSector array.")}};exports._setActiveSector=function(newId){this.activeSector.push(newId)};exports._forgetLastSector=function(){this.activeSector.pop()};exports._createNewSector=function(newId){this.sectors["active"][newId]={nodes:{},edges:{},nodeIndices:[],formationScale:this.scale,drawingNode:undefined};this.sectors["active"][newId]["drawingNode"]=new Node({id:newId,color:{background:"#eaefef",border:"495c5e"}},{},{},this.constants);this.sectors["active"][newId]["drawingNode"].clusterSize=2};exports._deleteActiveSector=function(sectorId){delete this.sectors["active"][sectorId]};exports._deleteFrozenSector=function(sectorId){delete this.sectors["frozen"][sectorId]};exports._freezeSector=function(sectorId){this.sectors["frozen"][sectorId]=this.sectors["active"][sectorId];this._deleteActiveSector(sectorId)};exports._activateSector=function(sectorId){this.sectors["active"][sectorId]=this.sectors["frozen"][sectorId];this._deleteFrozenSector(sectorId)};exports._mergeThisWithFrozen=function(sectorId){for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){this.sectors["frozen"][sectorId]["nodes"][nodeId]=this.nodes[nodeId]}}for(var edgeId in this.edges){if(this.edges.hasOwnProperty(edgeId)){this.sectors["frozen"][sectorId]["edges"][edgeId]=this.edges[edgeId]}}for(var i=0;i<this.nodeIndices.length;i++){this.sectors["frozen"][sectorId]["nodeIndices"].push(this.nodeIndices[i])}};exports._collapseThisToSingleCluster=function(){this.clusterToFit(1,false)};exports._addSector=function(node){var sector=this._sector();delete this.nodes[node.id];var unqiueIdentifier=util.randomUUID();this._freezeSector(sector);this._createNewSector(unqiueIdentifier);this._setActiveSector(unqiueIdentifier);this._switchToSector(this._sector());this.nodes[node.id]=node};exports._collapseSector=function(){var sector=this._sector();if(sector!="default"){if(this.nodeIndices.length==1||this.sectors["active"][sector]["drawingNode"].width*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||this.sectors["active"][sector]["drawingNode"].height*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight){var previousSector=this._previousSector();this._collapseThisToSingleCluster();this._mergeThisWithFrozen(previousSector);this._deleteActiveSector(sector);this._activateSector(previousSector);this._switchToSector(previousSector);this._forgetLastSector();this._updateNodeIndexList();this._updateCalculationNodes()}}};exports._doInAllActiveSectors=function(runFunction,argument){var returnValues=[];if(argument===undefined){for(var sector in this.sectors["active"]){if(this.sectors["active"].hasOwnProperty(sector)){this._switchToActiveSector(sector);returnValues.push(this[runFunction]())}}}else{for(var sector in this.sectors["active"]){if(this.sectors["active"].hasOwnProperty(sector)){this._switchToActiveSector(sector);var args=Array.prototype.splice.call(arguments,1);if(args.length>1){returnValues.push(this[runFunction](args[0],args[1]))}else{returnValues.push(this[runFunction](argument))}}}}this._loadLatestSector();return returnValues};exports._doInSupportSector=function(runFunction,argument){var returnValues=false;if(argument===undefined){this._switchToSupportSector();returnValues=this[runFunction]()}else{this._switchToSupportSector();var args=Array.prototype.splice.call(arguments,1);if(args.length>1){returnValues=this[runFunction](args[0],args[1])}else{returnValues=this[runFunction](argument)}}this._loadLatestSector();return returnValues};exports._doInAllFrozenSectors=function(runFunction,argument){if(argument===undefined){for(var sector in this.sectors["frozen"]){if(this.sectors["frozen"].hasOwnProperty(sector)){this._switchToFrozenSector(sector);this[runFunction]()}}}else{for(var sector in this.sectors["frozen"]){if(this.sectors["frozen"].hasOwnProperty(sector)){this._switchToFrozenSector(sector);var args=Array.prototype.splice.call(arguments,1);if(args.length>1){this[runFunction](args[0],args[1])}else{this[runFunction](argument)}}}}this._loadLatestSector()};exports._doInAllSectors=function(runFunction,argument){var args=Array.prototype.splice.call(arguments,1);if(argument===undefined){this._doInAllActiveSectors(runFunction);this._doInAllFrozenSectors(runFunction)}else{if(args.length>1){this._doInAllActiveSectors(runFunction,args[0],args[1]);this._doInAllFrozenSectors(runFunction,args[0],args[1])}else{this._doInAllActiveSectors(runFunction,argument);this._doInAllFrozenSectors(runFunction,argument)}}};exports._clearNodeIndexList=function(){var sector=this._sector();this.sectors["active"][sector]["nodeIndices"]=[];this.nodeIndices=this.sectors["active"][sector]["nodeIndices"]};exports._drawSectorNodes=function(ctx,sectorType){var minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9,node;for(var sector in this.sectors[sectorType]){if(this.sectors[sectorType].hasOwnProperty(sector)){if(this.sectors[sectorType][sector]["drawingNode"]!==undefined){this._switchToSector(sector,sectorType);minY=1e9;maxY=-1e9;minX=1e9;maxX=-1e9;for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];node.resize(ctx);if(minX>node.x-.5*node.width){minX=node.x-.5*node.width}if(maxX<node.x+.5*node.width){maxX=node.x+.5*node.width}if(minY>node.y-.5*node.height){minY=node.y-.5*node.height}if(maxY<node.y+.5*node.height){maxY=node.y+.5*node.height}}}node=this.sectors[sectorType][sector]["drawingNode"];node.x=.5*(maxX+minX);node.y=.5*(maxY+minY);node.width=2*(node.x-minX);node.height=2*(node.y-minY);node.options.radius=Math.sqrt(Math.pow(.5*node.width,2)+Math.pow(.5*node.height,2));node.setScale(this.scale);node._drawCircle(ctx)}}}};exports._drawAllSectorNodes=function(ctx){this._drawSectorNodes(ctx,"frozen");this._drawSectorNodes(ctx,"active");this._loadLatestSector()}},function(module,exports,__webpack_require__){var Node=__webpack_require__(56);exports._getNodesOverlappingWith=function(object,overlappingNodes){var nodes=this.nodes;for(var nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){if(nodes[nodeId].isOverlappingWith(object)){overlappingNodes.push(nodeId)}}}};exports._getAllNodesOverlappingWith=function(object){var overlappingNodes=[];this._doInAllActiveSectors("_getNodesOverlappingWith",object,overlappingNodes);return overlappingNodes};exports._pointerToPositionObject=function(pointer){var x=this._XconvertDOMtoCanvas(pointer.x);var y=this._YconvertDOMtoCanvas(pointer.y);return{left:x,top:y,right:x,bottom:y}};exports._getNodeAt=function(pointer){var positionObject=this._pointerToPositionObject(pointer);var overlappingNodes=this._getAllNodesOverlappingWith(positionObject);if(overlappingNodes.length>0){return this.nodes[overlappingNodes[overlappingNodes.length-1]]}else{return null}};exports._getEdgesOverlappingWith=function(object,overlappingEdges){var edges=this.edges;for(var edgeId in edges){if(edges.hasOwnProperty(edgeId)){if(edges[edgeId].isOverlappingWith(object)){overlappingEdges.push(edgeId)}}}};exports._getAllEdgesOverlappingWith=function(object){var overlappingEdges=[];this._doInAllActiveSectors("_getEdgesOverlappingWith",object,overlappingEdges);return overlappingEdges};exports._getEdgeAt=function(pointer){var positionObject=this._pointerToPositionObject(pointer);var overlappingEdges=this._getAllEdgesOverlappingWith(positionObject);if(overlappingEdges.length>0){return this.edges[overlappingEdges[overlappingEdges.length-1]]}else{return null}};exports._addToSelection=function(obj){if(obj instanceof Node){this.selectionObj.nodes[obj.id]=obj}else{this.selectionObj.edges[obj.id]=obj}};exports._addToHover=function(obj){if(obj instanceof Node){this.hoverObj.nodes[obj.id]=obj}else{this.hoverObj.edges[obj.id]=obj}};exports._removeFromSelection=function(obj){if(obj instanceof Node){delete this.selectionObj.nodes[obj.id]}else{delete this.selectionObj.edges[obj.id]}};exports._unselectAll=function(doNotTrigger){if(doNotTrigger===undefined){doNotTrigger=false}for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){this.selectionObj.nodes[nodeId].unselect()}}for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){this.selectionObj.edges[edgeId].unselect()}}this.selectionObj={nodes:{},edges:{}};if(doNotTrigger==false){this.emit("select",this.getSelection())}};exports._unselectClusters=function(doNotTrigger){if(doNotTrigger===undefined){doNotTrigger=false}for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){if(this.selectionObj.nodes[nodeId].clusterSize>1){this.selectionObj.nodes[nodeId].unselect();this._removeFromSelection(this.selectionObj.nodes[nodeId])}}}if(doNotTrigger==false){this.emit("select",this.getSelection())}};exports._getSelectedNodeCount=function(){var count=0;for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){count+=1}}return count};exports._getSelectedNode=function(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){return this.selectionObj.nodes[nodeId]}}return null};exports._getSelectedEdge=function(){for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){return this.selectionObj.edges[edgeId]}}return null};exports._getSelectedEdgeCount=function(){var count=0;for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){count+=1}}return count};exports._getSelectedObjectCount=function(){var count=0;for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){count+=1}}for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){count+=1}}return count};exports._selectionIsEmpty=function(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){return false}}for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){return false}}return true};exports._clusterInSelection=function(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){if(this.selectionObj.nodes[nodeId].clusterSize>1){return true}}}return false};exports._selectConnectedEdges=function(node){for(var i=0;i<node.dynamicEdges.length;i++){var edge=node.dynamicEdges[i];edge.select();this._addToSelection(edge)}};exports._hoverConnectedEdges=function(node){for(var i=0;i<node.dynamicEdges.length;i++){var edge=node.dynamicEdges[i];edge.hover=true;this._addToHover(edge)}};exports._unselectConnectedEdges=function(node){for(var i=0;i<node.dynamicEdges.length;i++){var edge=node.dynamicEdges[i];edge.unselect();this._removeFromSelection(edge)}};exports._selectObject=function(object,append,doNotTrigger,highlightEdges,overrideSelectable){if(doNotTrigger===undefined){doNotTrigger=false}if(highlightEdges===undefined){highlightEdges=true}if(this._selectionIsEmpty()==false&&append==false&&this.forceAppendSelection==false){this._unselectAll(true)}if(object.selected==false&&(this.constants.selectable==true||overrideSelectable)){object.select();this._addToSelection(object);if(object instanceof Node&&this.blockConnectingEdgeSelection==false&&highlightEdges==true){this._selectConnectedEdges(object)}}else if(object.selected==false){this._addToSelection(object);doNotTrigger=true}else{object.unselect();this._removeFromSelection(object)}if(doNotTrigger==false){this.emit("select",this.getSelection())}};exports._blurObject=function(object){if(object.hover==true){object.hover=false;this.emit("blurNode",{node:object.id})}};exports._hoverObject=function(object){if(object.hover==false){object.hover=true;this._addToHover(object);if(object instanceof Node){this.emit("hoverNode",{node:object.id})}}if(object instanceof Node){this._hoverConnectedEdges(object)}};exports._handleTouch=function(pointer){};exports._handleTap=function(pointer){var node=this._getNodeAt(pointer);if(node!=null){this._selectObject(node,false)}else{var edge=this._getEdgeAt(pointer);if(edge!=null){this._selectObject(edge,false)}else{this._unselectAll()}}var properties=this.getSelection();properties["pointer"]={DOM:{x:pointer.x,y:pointer.y},canvas:{x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)}};this.emit("click",properties);this._redraw()};exports._handleDoubleTap=function(pointer){var node=this._getNodeAt(pointer);if(node!=null&&node!==undefined){this.areaCenter={x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)};this.openCluster(node)}var properties=this.getSelection();properties["pointer"]={DOM:{x:pointer.x,y:pointer.y},canvas:{x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)}};this.emit("doubleClick",properties)};exports._handleOnHold=function(pointer){var node=this._getNodeAt(pointer);if(node!=null){this._selectObject(node,true)}else{var edge=this._getEdgeAt(pointer);if(edge!=null){this._selectObject(edge,true)}}this._redraw()};exports._handleOnRelease=function(pointer){this._manipulationReleaseOverload(pointer);this._navigationReleaseOverload(pointer)};exports._manipulationReleaseOverload=function(pointer){};exports._navigationReleaseOverload=function(pointer){};exports.getSelection=function(){var nodeIds=this.getSelectedNodes();var edgeIds=this.getSelectedEdges();return{nodes:nodeIds,edges:edgeIds}};exports.getSelectedNodes=function(){var idArray=[];if(this.constants.selectable==true){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){idArray.push(nodeId)}}}return idArray};exports.getSelectedEdges=function(){var idArray=[];if(this.constants.selectable==true){for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){idArray.push(edgeId)}}}return idArray};exports.setSelection=function(){console.log("setSelection is deprecated. Please use selectNodes instead.")};exports.selectNodes=function(selection,highlightEdges){var i,iMax,id;if(!selection||selection.length==undefined)throw"Selection must be an array with ids";this._unselectAll(true);for(i=0,iMax=selection.length;i<iMax;i++){id=selection[i];var node=this.nodes[id];if(!node){throw new RangeError('Node with id "'+id+'" not found')}this._selectObject(node,true,true,highlightEdges,true)}this.redraw()};exports.selectEdges=function(selection){var i,iMax,id;if(!selection||selection.length==undefined)throw"Selection must be an array with ids";this._unselectAll(true);for(i=0,iMax=selection.length;i<iMax;i++){id=selection[i];var edge=this.edges[id];if(!edge){throw new RangeError('Edge with id "'+id+'" not found')}this._selectObject(edge,true,true,false,true)}this.redraw()};exports._updateSelection=function(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){if(!this.nodes.hasOwnProperty(nodeId)){delete this.selectionObj.nodes[nodeId]}}}for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){if(!this.edges.hasOwnProperty(edgeId)){delete this.selectionObj.edges[edgeId]}}}}},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Node=__webpack_require__(56);var Edge=__webpack_require__(57);exports._clearManipulatorBar=function(){while(this.manipulationDiv.hasChildNodes()){this.manipulationDiv.removeChild(this.manipulationDiv.firstChild)}this.manipulationDOM={};this._manipulationReleaseOverload=function(){};delete this.sectors["support"]["nodes"]["targetNode"];delete this.sectors["support"]["nodes"]["targetViaNode"];this.controlNodesActive=false};exports._restoreOverloadedFunctions=function(){for(var functionName in this.cachedFunctions){if(this.cachedFunctions.hasOwnProperty(functionName)){this[functionName]=this.cachedFunctions[functionName]}}};exports._toggleEditMode=function(){this.editMode=!this.editMode;var toolbar=this.manipulationDiv;var closeDiv=this.closeDiv;var editModeDiv=this.editModeDiv;if(this.editMode==true){toolbar.style.display="block";closeDiv.style.display="block";editModeDiv.style.display="none";closeDiv.onclick=this._toggleEditMode.bind(this)}else{toolbar.style.display="none";closeDiv.style.display="none";editModeDiv.style.display="block";closeDiv.onclick=null}this._createManipulatorBar()};exports._createManipulatorBar=function(){if(this.boundFunction){this.off("select",this.boundFunction)}var locale=this.constants.locales[this.constants.locale];if(this.edgeBeingEdited!==undefined){this.edgeBeingEdited._disableControlNodes();this.edgeBeingEdited=undefined;this.selectedControlNode=null;this.controlNodesActive=false;this._redraw()}this._restoreOverloadedFunctions();this.freezeSimulation=false;this.blockConnectingEdgeSelection=false;this.forceAppendSelection=false;this.manipulationDOM={};if(this.editMode==true){while(this.manipulationDiv.hasChildNodes()){this.manipulationDiv.removeChild(this.manipulationDiv.firstChild)}this.manipulationDOM["addNodeSpan"]=document.createElement("span");this.manipulationDOM["addNodeSpan"].className="network-manipulationUI add";this.manipulationDOM["addNodeLabelSpan"]=document.createElement("span");this.manipulationDOM["addNodeLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["addNodeLabelSpan"].innerHTML=locale["addNode"];this.manipulationDOM["addNodeSpan"].appendChild(this.manipulationDOM["addNodeLabelSpan"]);this.manipulationDOM["seperatorLineDiv1"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv1"].className="network-seperatorLine";this.manipulationDOM["addEdgeSpan"]=document.createElement("span");this.manipulationDOM["addEdgeSpan"].className="network-manipulationUI connect";this.manipulationDOM["addEdgeLabelSpan"]=document.createElement("span");this.manipulationDOM["addEdgeLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["addEdgeLabelSpan"].innerHTML=locale["addEdge"];this.manipulationDOM["addEdgeSpan"].appendChild(this.manipulationDOM["addEdgeLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["addNodeSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv1"]);this.manipulationDiv.appendChild(this.manipulationDOM["addEdgeSpan"]);if(this._getSelectedNodeCount()==1&&this.triggerFunctions.edit){this.manipulationDOM["seperatorLineDiv2"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv2"].className="network-seperatorLine";this.manipulationDOM["editNodeSpan"]=document.createElement("span");this.manipulationDOM["editNodeSpan"].className="network-manipulationUI edit";this.manipulationDOM["editNodeLabelSpan"]=document.createElement("span");this.manipulationDOM["editNodeLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["editNodeLabelSpan"].innerHTML=locale["editNode"];this.manipulationDOM["editNodeSpan"].appendChild(this.manipulationDOM["editNodeLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv2"]);this.manipulationDiv.appendChild(this.manipulationDOM["editNodeSpan"])}else if(this._getSelectedEdgeCount()==1&&this._getSelectedNodeCount()==0){this.manipulationDOM["seperatorLineDiv3"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv3"].className="network-seperatorLine";this.manipulationDOM["editEdgeSpan"]=document.createElement("span");this.manipulationDOM["editEdgeSpan"].className="network-manipulationUI edit";this.manipulationDOM["editEdgeLabelSpan"]=document.createElement("span");this.manipulationDOM["editEdgeLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["editEdgeLabelSpan"].innerHTML=locale["editEdge"];this.manipulationDOM["editEdgeSpan"].appendChild(this.manipulationDOM["editEdgeLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv3"]);this.manipulationDiv.appendChild(this.manipulationDOM["editEdgeSpan"])}if(this._selectionIsEmpty()==false){this.manipulationDOM["seperatorLineDiv4"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv4"].className="network-seperatorLine";this.manipulationDOM["deleteSpan"]=document.createElement("span");this.manipulationDOM["deleteSpan"].className="network-manipulationUI delete";this.manipulationDOM["deleteLabelSpan"]=document.createElement("span");this.manipulationDOM["deleteLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["deleteLabelSpan"].innerHTML=locale["del"];this.manipulationDOM["deleteSpan"].appendChild(this.manipulationDOM["deleteLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv4"]);this.manipulationDiv.appendChild(this.manipulationDOM["deleteSpan"])}this.manipulationDOM["addNodeSpan"].onclick=this._createAddNodeToolbar.bind(this);this.manipulationDOM["addEdgeSpan"].onclick=this._createAddEdgeToolbar.bind(this);if(this._getSelectedNodeCount()==1&&this.triggerFunctions.edit){this.manipulationDOM["editNodeSpan"].onclick=this._editNode.bind(this)}else if(this._getSelectedEdgeCount()==1&&this._getSelectedNodeCount()==0){this.manipulationDOM["editEdgeSpan"].onclick=this._createEditEdgeToolbar.bind(this)}if(this._selectionIsEmpty()==false){this.manipulationDOM["deleteSpan"].onclick=this._deleteSelected.bind(this)}this.closeDiv.onclick=this._toggleEditMode.bind(this);this.boundFunction=this._createManipulatorBar.bind(this);this.on("select",this.boundFunction)}else{while(this.editModeDiv.hasChildNodes()){this.editModeDiv.removeChild(this.editModeDiv.firstChild)}this.manipulationDOM["editModeSpan"]=document.createElement("span");this.manipulationDOM["editModeSpan"].className="network-manipulationUI edit editmode";this.manipulationDOM["editModeLabelSpan"]=document.createElement("span");this.manipulationDOM["editModeLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["editModeLabelSpan"].innerHTML=locale["edit"];this.manipulationDOM["editModeSpan"].appendChild(this.manipulationDOM["editModeLabelSpan"]);this.editModeDiv.appendChild(this.manipulationDOM["editModeSpan"]);this.manipulationDOM["editModeSpan"].onclick=this._toggleEditMode.bind(this)}};exports._createAddNodeToolbar=function(){this._clearManipulatorBar();if(this.boundFunction){this.off("select",this.boundFunction)}var locale=this.constants.locales[this.constants.locale];this.manipulationDOM={};this.manipulationDOM["backSpan"]=document.createElement("span");this.manipulationDOM["backSpan"].className="network-manipulationUI back";this.manipulationDOM["backLabelSpan"]=document.createElement("span");this.manipulationDOM["backLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["backLabelSpan"].innerHTML=locale["back"];this.manipulationDOM["backSpan"].appendChild(this.manipulationDOM["backLabelSpan"]);this.manipulationDOM["seperatorLineDiv1"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv1"].className="network-seperatorLine";this.manipulationDOM["descriptionSpan"]=document.createElement("span");this.manipulationDOM["descriptionSpan"].className="network-manipulationUI none";this.manipulationDOM["descriptionLabelSpan"]=document.createElement("span");this.manipulationDOM["descriptionLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["descriptionLabelSpan"].innerHTML=locale["addDescription"];this.manipulationDOM["descriptionSpan"].appendChild(this.manipulationDOM["descriptionLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["backSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv1"]);this.manipulationDiv.appendChild(this.manipulationDOM["descriptionSpan"]);this.manipulationDOM["backSpan"].onclick=this._createManipulatorBar.bind(this);this.boundFunction=this._addNode.bind(this);this.on("select",this.boundFunction)};exports._createAddEdgeToolbar=function(){this._clearManipulatorBar();this._unselectAll(true);this.freezeSimulation=true;var locale=this.constants.locales[this.constants.locale];if(this.boundFunction){this.off("select",this.boundFunction)}this._unselectAll();this.forceAppendSelection=false;this.blockConnectingEdgeSelection=true;this.manipulationDOM={};this.manipulationDOM["backSpan"]=document.createElement("span");this.manipulationDOM["backSpan"].className="network-manipulationUI back";this.manipulationDOM["backLabelSpan"]=document.createElement("span");this.manipulationDOM["backLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["backLabelSpan"].innerHTML=locale["back"];this.manipulationDOM["backSpan"].appendChild(this.manipulationDOM["backLabelSpan"]);this.manipulationDOM["seperatorLineDiv1"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv1"].className="network-seperatorLine";this.manipulationDOM["descriptionSpan"]=document.createElement("span");this.manipulationDOM["descriptionSpan"].className="network-manipulationUI none";this.manipulationDOM["descriptionLabelSpan"]=document.createElement("span");this.manipulationDOM["descriptionLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["descriptionLabelSpan"].innerHTML=locale["edgeDescription"];this.manipulationDOM["descriptionSpan"].appendChild(this.manipulationDOM["descriptionLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["backSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv1"]);this.manipulationDiv.appendChild(this.manipulationDOM["descriptionSpan"]);this.manipulationDOM["backSpan"].onclick=this._createManipulatorBar.bind(this);this.boundFunction=this._handleConnect.bind(this);this.on("select",this.boundFunction);this.cachedFunctions["_handleTouch"]=this._handleTouch;this.cachedFunctions["_manipulationReleaseOverload"]=this._manipulationReleaseOverload;this.cachedFunctions["_handleDragStart"]=this._handleDragStart;this.cachedFunctions["_handleDragEnd"]=this._handleDragEnd;this._handleTouch=this._handleConnect;this._manipulationReleaseOverload=function(){};this._handleDragStart=function(){};this._handleDragEnd=this._finishConnect;this._redraw()};exports._createEditEdgeToolbar=function(){this._clearManipulatorBar();this.controlNodesActive=true;if(this.boundFunction){this.off("select",this.boundFunction)}this.edgeBeingEdited=this._getSelectedEdge();this.edgeBeingEdited._enableControlNodes();var locale=this.constants.locales[this.constants.locale];this.manipulationDOM={};this.manipulationDOM["backSpan"]=document.createElement("span");this.manipulationDOM["backSpan"].className="network-manipulationUI back";this.manipulationDOM["backLabelSpan"]=document.createElement("span");this.manipulationDOM["backLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["backLabelSpan"].innerHTML=locale["back"];this.manipulationDOM["backSpan"].appendChild(this.manipulationDOM["backLabelSpan"]);this.manipulationDOM["seperatorLineDiv1"]=document.createElement("div");this.manipulationDOM["seperatorLineDiv1"].className="network-seperatorLine";this.manipulationDOM["descriptionSpan"]=document.createElement("span");this.manipulationDOM["descriptionSpan"].className="network-manipulationUI none";this.manipulationDOM["descriptionLabelSpan"]=document.createElement("span");this.manipulationDOM["descriptionLabelSpan"].className="network-manipulationLabel";this.manipulationDOM["descriptionLabelSpan"].innerHTML=locale["editEdgeDescription"];this.manipulationDOM["descriptionSpan"].appendChild(this.manipulationDOM["descriptionLabelSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["backSpan"]);this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv1"]);this.manipulationDiv.appendChild(this.manipulationDOM["descriptionSpan"]);this.manipulationDOM["backSpan"].onclick=this._createManipulatorBar.bind(this);this.cachedFunctions["_handleTouch"]=this._handleTouch;this.cachedFunctions["_manipulationReleaseOverload"]=this._manipulationReleaseOverload;this.cachedFunctions["_handleTap"]=this._handleTap;this.cachedFunctions["_handleDragStart"]=this._handleDragStart;this.cachedFunctions["_handleOnDrag"]=this._handleOnDrag;this._handleTouch=this._selectControlNode;this._handleTap=function(){};this._handleOnDrag=this._controlNodeDrag;this._handleDragStart=function(){};this._manipulationReleaseOverload=this._releaseControlNode;this._redraw()};exports._selectControlNode=function(pointer){this.edgeBeingEdited.controlNodes.from.unselect();this.edgeBeingEdited.controlNodes.to.unselect();this.selectedControlNode=this.edgeBeingEdited._getSelectedControlNode(this._XconvertDOMtoCanvas(pointer.x),this._YconvertDOMtoCanvas(pointer.y));if(this.selectedControlNode!==null){this.selectedControlNode.select();this.freezeSimulation=true}this._redraw()};exports._controlNodeDrag=function(event){var pointer=this._getPointer(event.gesture.center);if(this.selectedControlNode!==null&&this.selectedControlNode!==undefined){this.selectedControlNode.x=this._XconvertDOMtoCanvas(pointer.x);this.selectedControlNode.y=this._YconvertDOMtoCanvas(pointer.y)}this._redraw()};exports._releaseControlNode=function(pointer){var newNode=this._getNodeAt(pointer);if(newNode!==null){if(this.edgeBeingEdited.controlNodes.from.selected==true){this._editEdge(newNode.id,this.edgeBeingEdited.to.id);this.edgeBeingEdited.controlNodes.from.unselect()}if(this.edgeBeingEdited.controlNodes.to.selected==true){this._editEdge(this.edgeBeingEdited.from.id,newNode.id);this.edgeBeingEdited.controlNodes.to.unselect()}}else{this.edgeBeingEdited._restoreControlNodes()}this.freezeSimulation=false;this._redraw()};exports._handleConnect=function(pointer){if(this._getSelectedNodeCount()==0){var node=this._getNodeAt(pointer);if(node!=null){if(node.clusterSize>1){alert(this.constants.locales[this.constants.locale]["createEdgeError"])}else{this._selectObject(node,false);var supportNodes=this.sectors["support"]["nodes"];supportNodes["targetNode"]=new Node({id:"targetNode"},{},{},this.constants);var targetNode=supportNodes["targetNode"];targetNode.x=node.x;targetNode.y=node.y;this.edges["connectionEdge"]=new Edge({id:"connectionEdge",from:node.id,to:targetNode.id},this,this.constants);var connectionEdge=this.edges["connectionEdge"];connectionEdge.from=node;connectionEdge.connected=true;connectionEdge.options.smoothCurves={enabled:true,dynamic:false,type:"continuous",roundness:.5};connectionEdge.selected=true;connectionEdge.to=targetNode;this.cachedFunctions["_handleOnDrag"]=this._handleOnDrag;this._handleOnDrag=function(event){var pointer=this._getPointer(event.gesture.center);var connectionEdge=this.edges["connectionEdge"];connectionEdge.to.x=this._XconvertDOMtoCanvas(pointer.x);connectionEdge.to.y=this._YconvertDOMtoCanvas(pointer.y)};this.moving=true;this.start()}}}};exports._finishConnect=function(event){if(this._getSelectedNodeCount()==1){var pointer=this._getPointer(event.gesture.center);this._handleOnDrag=this.cachedFunctions["_handleOnDrag"];delete this.cachedFunctions["_handleOnDrag"];var connectFromId=this.edges["connectionEdge"].fromId;delete this.edges["connectionEdge"];delete this.sectors["support"]["nodes"]["targetNode"];delete this.sectors["support"]["nodes"]["targetViaNode"];var node=this._getNodeAt(pointer);if(node!=null){if(node.clusterSize>1){alert(this.constants.locales[this.constants.locale]["createEdgeError"])}else{this._createEdge(connectFromId,node.id);this._createManipulatorBar()}}this._unselectAll()}};exports._addNode=function(){if(this._selectionIsEmpty()&&this.editMode==true){var positionObject=this._pointerToPositionObject(this.pointerPosition);var defaultData={id:util.randomUUID(),x:positionObject.left,y:positionObject.top,label:"new",allowedToMoveX:true,allowedToMoveY:true};
if(this.triggerFunctions.add){if(this.triggerFunctions.add.length==2){var me=this;this.triggerFunctions.add(defaultData,function(finalizedData){me.nodesData.add(finalizedData);me._createManipulatorBar();me.moving=true;me.start()})}else{throw new Error("The function for add does not support two arguments (data,callback)");this._createManipulatorBar();this.moving=true;this.start()}}else{this.nodesData.add(defaultData);this._createManipulatorBar();this.moving=true;this.start()}}};exports._createEdge=function(sourceNodeId,targetNodeId){if(this.editMode==true){var defaultData={from:sourceNodeId,to:targetNodeId};if(this.triggerFunctions.connect){if(this.triggerFunctions.connect.length==2){var me=this;this.triggerFunctions.connect(defaultData,function(finalizedData){me.edgesData.add(finalizedData);me.moving=true;me.start()})}else{throw new Error("The function for connect does not support two arguments (data,callback)");this.moving=true;this.start()}}else{this.edgesData.add(defaultData);this.moving=true;this.start()}}};exports._editEdge=function(sourceNodeId,targetNodeId){if(this.editMode==true){var defaultData={id:this.edgeBeingEdited.id,from:sourceNodeId,to:targetNodeId};if(this.triggerFunctions.editEdge){if(this.triggerFunctions.editEdge.length==2){var me=this;this.triggerFunctions.editEdge(defaultData,function(finalizedData){me.edgesData.update(finalizedData);me.moving=true;me.start()})}else{throw new Error("The function for edit does not support two arguments (data, callback)");this.moving=true;this.start()}}else{this.edgesData.update(defaultData);this.moving=true;this.start()}}};exports._editNode=function(){if(this.triggerFunctions.edit&&this.editMode==true){var node=this._getSelectedNode();var data={id:node.id,label:node.label,group:node.options.group,shape:node.options.shape,color:{background:node.options.color.background,border:node.options.color.border,highlight:{background:node.options.color.highlight.background,border:node.options.color.highlight.border}}};if(this.triggerFunctions.edit.length==2){var me=this;this.triggerFunctions.edit(data,function(finalizedData){me.nodesData.update(finalizedData);me._createManipulatorBar();me.moving=true;me.start()})}else{throw new Error("The function for edit does not support two arguments (data, callback)")}}else{throw new Error("No edit function has been bound to this button")}};exports._deleteSelected=function(){if(!this._selectionIsEmpty()&&this.editMode==true){if(!this._clusterInSelection()){var selectedNodes=this.getSelectedNodes();var selectedEdges=this.getSelectedEdges();if(this.triggerFunctions.del){var me=this;var data={nodes:selectedNodes,edges:selectedEdges};if(this.triggerFunctions.del.length==2){this.triggerFunctions.del(data,function(finalizedData){me.edgesData.remove(finalizedData.edges);me.nodesData.remove(finalizedData.nodes);me._unselectAll();me.moving=true;me.start()})}else{throw new Error("The function for delete does not support two arguments (data, callback)")}}else{this.edgesData.remove(selectedEdges);this.nodesData.remove(selectedNodes);this._unselectAll();this.moving=true;this.start()}}else{alert(this.constants.locales[this.constants.locale]["deleteClusterError"])}}}},function(module,exports,__webpack_require__){var util=__webpack_require__(1);var Hammer=__webpack_require__(19);exports._cleanNavigation=function(){if(this.navigationHammers.existing.length!=0){for(var i=0;i<this.navigationHammers.existing.length;i++){this.navigationHammers.existing[i].dispose()}this.navigationHammers.existing=[]}this._navigationReleaseOverload=function(){};if(this.navigationDivs&&this.navigationDivs["wrapper"]&&this.navigationDivs["wrapper"].parentNode){this.navigationDivs["wrapper"].parentNode.removeChild(this.navigationDivs["wrapper"])}};exports._loadNavigationElements=function(){this._cleanNavigation();this.navigationDivs={};var navigationDivs=["up","down","left","right","zoomIn","zoomOut","zoomExtends"];var navigationDivActions=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_zoomExtent"];this.navigationDivs["wrapper"]=document.createElement("div");this.frame.appendChild(this.navigationDivs["wrapper"]);for(var i=0;i<navigationDivs.length;i++){this.navigationDivs[navigationDivs[i]]=document.createElement("div");this.navigationDivs[navigationDivs[i]].className="network-navigation "+navigationDivs[i];this.navigationDivs["wrapper"].appendChild(this.navigationDivs[navigationDivs[i]]);var hammer=Hammer(this.navigationDivs[navigationDivs[i]],{prevent_default:true});hammer.on("touch",this[navigationDivActions[i]].bind(this));this.navigationHammers._new.push(hammer)}this._navigationReleaseOverload=this._stopMovement;this.navigationHammers.existing=this.navigationHammers._new};exports._zoomExtent=function(event){this.zoomExtent({duration:700});event.stopPropagation()};exports._stopMovement=function(){this._xStopMoving();this._yStopMoving();this._stopZoom()};exports._moveUp=function(event){this.yIncrement=this.constants.keyboard.speed.y;this.start();event.preventDefault()};exports._moveDown=function(event){this.yIncrement=-this.constants.keyboard.speed.y;this.start();event.preventDefault()};exports._moveLeft=function(event){this.xIncrement=this.constants.keyboard.speed.x;this.start();event.preventDefault()};exports._moveRight=function(event){this.xIncrement=-this.constants.keyboard.speed.y;this.start();event.preventDefault()};exports._zoomIn=function(event){this.zoomIncrement=this.constants.keyboard.speed.zoom;this.start();event.preventDefault()};exports._zoomOut=function(event){this.zoomIncrement=-this.constants.keyboard.speed.zoom;this.start();event.preventDefault()};exports._stopZoom=function(event){this.zoomIncrement=0;event&&event.preventDefault()};exports._yStopMoving=function(event){this.yIncrement=0;event&&event.preventDefault()};exports._xStopMoving=function(event){this.xIncrement=0;event&&event.preventDefault()}},function(module,exports,__webpack_require__){exports._resetLevels=function(){for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];if(node.preassignedLevel==false){node.level=-1;node.hierarchyEnumerated=false}}}};exports._setupHierarchicalLayout=function(){if(this.constants.hierarchicalLayout.enabled==true&&this.nodeIndices.length>0){if(this.constants.hierarchicalLayout.direction=="RL"||this.constants.hierarchicalLayout.direction=="DU"){this.constants.hierarchicalLayout.levelSeparation=this.constants.hierarchicalLayout.levelSeparation<0?this.constants.hierarchicalLayout.levelSeparation:this.constants.hierarchicalLayout.levelSeparation*-1}else{this.constants.hierarchicalLayout.levelSeparation=Math.abs(this.constants.hierarchicalLayout.levelSeparation)}if(this.constants.hierarchicalLayout.direction=="RL"||this.constants.hierarchicalLayout.direction=="LR"){if(this.constants.smoothCurves.enabled==true){this.constants.smoothCurves.type="vertical"}}else{if(this.constants.smoothCurves.enabled==true){this.constants.smoothCurves.type="horizontal"}}var hubsize=0;var node,nodeId;var definedLevel=false;var undefinedLevel=false;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];if(node.level!=-1){definedLevel=true}else{undefinedLevel=true}if(hubsize<node.edges.length){hubsize=node.edges.length}}}if(undefinedLevel==true&&definedLevel==true){throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");this.zoomExtent(undefined,true,this.constants.clustering.enabled);if(!this.constants.clustering.enabled){this.start()}}else{this._changeConstants();if(undefinedLevel==true){if(this.constants.hierarchicalLayout.layout=="hubsize"){this._determineLevels(hubsize)}else{this._determineLevelsDirected()}}var distribution=this._getDistribution();this._placeNodesByHierarchy(distribution);this.start()}}};exports._placeNodesByHierarchy=function(distribution){var nodeId,node;for(var level in distribution){if(distribution.hasOwnProperty(level)){for(nodeId in distribution[level].nodes){if(distribution[level].nodes.hasOwnProperty(nodeId)){node=distribution[level].nodes[nodeId];if(this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"){if(node.xFixed){node.x=distribution[level].minPos;node.xFixed=false;distribution[level].minPos+=distribution[level].nodeSpacing}}else{if(node.yFixed){node.y=distribution[level].minPos;node.yFixed=false;distribution[level].minPos+=distribution[level].nodeSpacing}}this._placeBranchNodes(node.edges,node.id,distribution,node.level)}}}}this._stabilize()};exports._getDistribution=function(){var distribution={};var nodeId,node,level;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];node.xFixed=true;node.yFixed=true;if(this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"){node.y=this.constants.hierarchicalLayout.levelSeparation*node.level}else{node.x=this.constants.hierarchicalLayout.levelSeparation*node.level}if(distribution[node.level]===undefined){distribution[node.level]={amount:0,nodes:{},minPos:0,nodeSpacing:0}}distribution[node.level].amount+=1;distribution[node.level].nodes[nodeId]=node}}var maxCount=0;for(level in distribution){if(distribution.hasOwnProperty(level)){if(maxCount<distribution[level].amount){maxCount=distribution[level].amount}}}for(level in distribution){if(distribution.hasOwnProperty(level)){distribution[level].nodeSpacing=(maxCount+1)*this.constants.hierarchicalLayout.nodeSpacing;distribution[level].nodeSpacing/=distribution[level].amount+1;distribution[level].minPos=distribution[level].nodeSpacing-.5*(distribution[level].amount+1)*distribution[level].nodeSpacing}}return distribution};exports._determineLevels=function(hubsize){var nodeId,node;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];if(node.edges.length==hubsize){node.level=0}}}for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];if(node.level==0){this._setLevel(1,node.edges,node.id)}}}};exports._determineLevelsDirected=function(){var nodeId,node;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){this.nodes[nodeId].level=1e4;break}}for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];if(node.level==1e4){this._setLevelDirected(1e4,node.edges,node.id)}}}var minLevel=1e4;for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];minLevel=node.level<minLevel?node.level:minLevel}}for(nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){node=this.nodes[nodeId];node.level-=minLevel}}};exports._changeConstants=function(){this.constants.clustering.enabled=false;this.constants.physics.barnesHut.enabled=false;this.constants.physics.hierarchicalRepulsion.enabled=true;this._loadSelectedForceSolver();if(this.constants.smoothCurves.enabled==true){this.constants.smoothCurves.dynamic=false}this._configureSmoothCurves()};exports._placeBranchNodes=function(edges,parentId,distribution,parentLevel){for(var i=0;i<edges.length;i++){var childNode=null;if(edges[i].toId==parentId){childNode=edges[i].from}else{childNode=edges[i].to}var nodeMoved=false;if(this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"){if(childNode.xFixed&&childNode.level>parentLevel){childNode.xFixed=false;childNode.x=distribution[childNode.level].minPos;nodeMoved=true}}else{if(childNode.yFixed&&childNode.level>parentLevel){childNode.yFixed=false;childNode.y=distribution[childNode.level].minPos;nodeMoved=true}}if(nodeMoved==true){distribution[childNode.level].minPos+=distribution[childNode.level].nodeSpacing;if(childNode.edges.length>1){this._placeBranchNodes(childNode.edges,childNode.id,distribution,childNode.level)}}}};exports._setLevel=function(level,edges,parentId){for(var i=0;i<edges.length;i++){var childNode=null;if(edges[i].toId==parentId){childNode=edges[i].from}else{childNode=edges[i].to}if(childNode.level==-1||childNode.level>level){childNode.level=level;if(childNode.edges.length>1){this._setLevel(level+1,childNode.edges,childNode.id)}}}};exports._setLevelDirected=function(level,edges,parentId){this.nodes[parentId].hierarchyEnumerated=true;for(var i=0;i<edges.length;i++){var childNode=null;var direction=1;if(edges[i].toId==parentId){childNode=edges[i].from;direction=-1}else{childNode=edges[i].to}if(childNode.level==-1){childNode.level=level+direction}}for(var i=0;i<edges.length;i++){var childNode=null;if(edges[i].toId==parentId){childNode=edges[i].from}else{childNode=edges[i].to}if(childNode.edges.length>1&&childNode.hierarchyEnumerated===false){this._setLevelDirected(childNode.level,childNode.edges,childNode.id)}}};exports._restoreNodes=function(){for(var nodeId in this.nodes){if(this.nodes.hasOwnProperty(nodeId)){this.nodes[nodeId].xFixed=false;this.nodes[nodeId].yFixed=false}}}},function(module,exports,__webpack_require__){exports["en"]={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted."};exports["en_EN"]=exports["en"];exports["en_US"]=exports["en"];exports["nl"]={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd."};exports["nl_NL"]=exports["nl"];exports["nl_BE"]=exports["nl"]},function(module,exports,__webpack_require__){if(typeof CanvasRenderingContext2D!=="undefined"){CanvasRenderingContext2D.prototype.circle=function(x,y,r){this.beginPath();this.arc(x,y,r,0,2*Math.PI,false)};CanvasRenderingContext2D.prototype.square=function(x,y,r){this.beginPath();this.rect(x-r,y-r,r*2,r*2)};CanvasRenderingContext2D.prototype.triangle=function(x,y,r){this.beginPath();var s=r*2;var s2=s/2;var ir=Math.sqrt(3)/6*s;var h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y-(h-ir));this.lineTo(x+s2,y+ir);this.lineTo(x-s2,y+ir);this.lineTo(x,y-(h-ir));this.closePath()};CanvasRenderingContext2D.prototype.triangleDown=function(x,y,r){this.beginPath();var s=r*2;var s2=s/2;var ir=Math.sqrt(3)/6*s;var h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y+(h-ir));this.lineTo(x+s2,y-ir);this.lineTo(x-s2,y-ir);this.lineTo(x,y+(h-ir));this.closePath()};CanvasRenderingContext2D.prototype.star=function(x,y,r){this.beginPath();for(var n=0;n<10;n++){var radius=n%2===0?r*1.3:r*.5;this.lineTo(x+radius*Math.sin(n*2*Math.PI/10),y-radius*Math.cos(n*2*Math.PI/10))}this.closePath()};CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){var r2d=Math.PI/180;if(w-2*r<0){r=w/2}if(h-2*r<0){r=h/2}this.beginPath();this.moveTo(x+r,y);this.lineTo(x+w-r,y);this.arc(x+w-r,y+r,r,r2d*270,r2d*360,false);this.lineTo(x+w,y+h-r);this.arc(x+w-r,y+h-r,r,0,r2d*90,false);this.lineTo(x+r,y+h);this.arc(x+r,y+h-r,r,r2d*90,r2d*180,false);this.lineTo(x,y+r);this.arc(x+r,y+r,r,r2d*180,r2d*270,false)};CanvasRenderingContext2D.prototype.ellipse=function(x,y,w,h){var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;this.beginPath();this.moveTo(x,ym);this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym)};CanvasRenderingContext2D.prototype.database=function(x,y,w,h){var f=1/3;var wEllipse=w;var hEllipse=h*f;var kappa=.5522848,ox=wEllipse/2*kappa,oy=hEllipse/2*kappa,xe=x+wEllipse,ye=y+hEllipse,xm=x+wEllipse/2,ym=y+hEllipse/2,ymb=y+(h-hEllipse/2),yeb=y+h;this.beginPath();this.moveTo(xe,ym);this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);this.lineTo(xe,ymb);this.bezierCurveTo(xe,ymb+oy,xm+ox,yeb,xm,yeb);this.bezierCurveTo(xm-ox,yeb,x,ymb+oy,x,ymb);this.lineTo(x,ym)};CanvasRenderingContext2D.prototype.arrow=function(x,y,angle,length){var xt=x-length*Math.cos(angle);var yt=y-length*Math.sin(angle);var xi=x-length*.9*Math.cos(angle);var yi=y-length*.9*Math.sin(angle);var xl=xt+length/3*Math.cos(angle+.5*Math.PI);var yl=yt+length/3*Math.sin(angle+.5*Math.PI);var xr=xt+length/3*Math.cos(angle-.5*Math.PI);var yr=yt+length/3*Math.sin(angle-.5*Math.PI);this.beginPath();this.moveTo(x,y);this.lineTo(xl,yl);this.lineTo(xi,yi);this.lineTo(xr,yr);this.closePath()};CanvasRenderingContext2D.prototype.dashedLine=function(x,y,x2,y2,dashArray){if(!dashArray)dashArray=[10,5];if(dashLength==0)dashLength=.001;var dashCount=dashArray.length;this.moveTo(x,y);var dx=x2-x,dy=y2-y;var slope=dy/dx;var distRemaining=Math.sqrt(dx*dx+dy*dy);var dashIndex=0,draw=true;while(distRemaining>=.1){var dashLength=dashArray[dashIndex++%dashCount];if(dashLength>distRemaining)dashLength=distRemaining;var xStep=Math.sqrt(dashLength*dashLength/(1+slope*slope));if(dx<0)xStep=-xStep;x+=xStep;y+=slope*xStep;this[draw?"lineTo":"moveTo"](x,y);distRemaining-=dashLength;draw=!draw}}}}])});
